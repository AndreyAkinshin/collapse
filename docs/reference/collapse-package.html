<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head><link rel="shortcut icon" href="https://sebkrantz.github.io/collapse/favicon.ico" type="image/x-icon">
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>
Advanced and Fast Data Transformation — collapse-package • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="
Advanced and Fast Data Transformation — collapse-package" />
<meta property="og:description" content="collapse is a C/C++ based package for data transformation and statistical computing in R. It's aims are:
To facilitate complex data transformation, exploration and computing tasks in R.
To help make R code fast, flexible, parsimonious and programmer friendly. 

It is made compatible with dplyr, data.table and the plm approach to panel data, and non-destructively handles other classes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://sebkrantz.github.io/Rblog/" target="_blank">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse_R" target="_blank">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse" target="_blank">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1><!-- %   \code{collapse:} -->
Advanced and Fast Data Transformation</h1>
    
    <div class="hidden name"><code>collapse-package.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><em>collapse</em> is a C/C++ based package for data transformation and statistical computing in R. It's aims are:</p><ul>
<li><p>To facilitate complex data transformation, exploration and computing tasks in R.</p></li>
<li><p>To help make R code fast, flexible, parsimonious and programmer friendly. <!-- % \emph{collapse} is a fast  %to facilitate (advanced) data manipulation in R   % To achieve the latter, -->
<!-- % collapse provides a broad set.. -&gt; Nah, it's not a misc package --></p></li>
</ul><p>It is made compatible with <em>dplyr</em>, <em>data.table</em> and the <em>plm</em> approach to panel data, and non-destructively handles other classes.</p>
    </div>



    <h2 class="hasAnchor" id="getting-started"><a class="anchor" href="#getting-started"></a>Getting Started</h2>

    <p>Please see <a href='index.html'>Collapse Documentation &amp; Overview</a>, or the introductory vignette. The documentation and vignettes can also comfortably be read on the <a href='https://sebkrantz.github.io/collapse/'>package website</a>. A cheatsheet is available at <a href='https://rstudio.com/resources/cheatsheets/'>Rstudio</a>.
A compact introduction for quick-starters is provided in the examples below.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><!-- % Put this below bullet points ?? % \emph{collapse} provides a carefully conceived % \emph{collapse} provides a compact set of functions % organized roughly into several topics -->
<em>collapse</em> provides an integrated suite of statistical and data manipulation functions (see <a href='index.html'>Collapse Overview</a>). These improve, complement and significantly extend the capabilities of base R and packages like <em>dplyr</em>, <em>data.table</em>, <em>plm</em>, <em>matrixStats</em>, <em>Rfast</em> etc.. Key improvements and extensions are:</p>
<ul>
<li><p>Fast C/C++ based (grouped, weighted) computations embedded in highly optimized R code.</p></li>
<li><p>More complex statistical, time series / panel data and recursive (list-processing) operations.</p></li>
<li><p>A flexible and generic approach supporting and preserving many R objects. <!-- % standard  % (S3 generic statistical functions, class/attribute preservation). % , compatibility with \emph{dplyr}, \emph{plm} and \emph{data.table} --></p></li>
<li><p>Optimized programming in standard and non-standard evaluation.</p></li>
</ul><p><!-- % To explain this a bit: -->
The statistical and data transformation functions in <em>collapse</em> are S3 generic with core methods for vectors, matrices and data frames, and internally support grouped and weighted computations carried out in C/C++. Thus functions need only be called once for column-wise and/or grouped computations, providing a lot of extra speed and full support for sampling weights. Furthermore the R code is strongly optimized and inputs are swiftly passed to compiled C/C++ code, with further checks run at C/C++ level. Various efficient algorithms are implemented in C/C++. <!-- %This approach enables flexible and parsimonious programming and data manipulation in R at high speeds. --></p>
<p><!-- %when passed to a \emph{collapse} statistical function together with a suitable data object % To provide extra speed and programmability -->
Core S3 methods and efficient grouping and ordering functionality can be accessed by the user. For example <code><a href='GRP, fgroup_by.html'>GRP()</a></code> creates grouping objects directly passed to C++ by statistical functions. <code><a href='GRP, fgroup_by.html'>fgroup_by()</a></code> attaches these objects to a data frame, yielding efficient chained calls when combined with <em>magrittr</em> pipes, <a href='A3-fast-data-manipulation.html'>fast manipulation functions</a> and <a href='A1-fast-statistical-functions.html'>fast statistical functions</a>. Performance gains are also realized when grouping with factors, or computing on grouped (<em>dplyr</em>) or panel data (<em>plm</em>) frames. <!-- %Hence \emph{collapse} enables optimized programming and data manipulation in both standard and non-standard evaluation. --></p>
<p><!-- %The function \code{fgroup_by} can be used to efficiently create a grouped tibble inside dplyr-like chained calls (constructed with \emph{magrittr} pipes, fast manipulation functions like \code{fselect}, \code{fsubset}, \code{ftransform} and fast statistical functions). Thus \emph{collapse} enables optimized programming in both standard and non-standard evaluation. --></p>

<p><!-- % attributes of atomic objects are preserved if the dimensions are unaltered by the computation, and data frame attributes are always preserved, --></p>
<p>Additional (hidden) S3 methods provide broad based compatibility and support for <em>dplyr</em> (grouped tibble), <em>data.table</em> and <em>plm</em> panel data classes. Non-generic functions and core methods also seek to preserve object attributes (including column attributes such as variable labels), ensuring flexibility and non-destructive workflows.</p>
<p>Missing values are efficiently skipped at C/C++ level. The package default is <code>na.rm = TRUE</code>, whereas <code>na.rm = FALSE</code> also yields efficient checking and early termination. Missing weights are supported. Core functionality and all statistical functions / computations are tested with 7700 unit tests for Base R equivalence, exempting some improvements (e.g. <code><a href='fsum.html'>fsum(NA, na.rm = TRUE)</a></code> evaluates to <code>NA</code>, not 0 like <code><a href='https://rdrr.io/r/base/sum.html'>sum(NA, na.rm = TRUE)</a></code>; similarly for <code>fmin</code> and <code>fmax</code>; no <code>NaN</code> values are generated from computations involving <code>NA</code> values etc...). Generic functions provide <a href='collapse-options.html'>security</a> against silent swallowing of unknown / misspelled arguments.</p>
<p><!-- %Hence they also handle various date and time series classes etc., and can easily be integreated into most approaches to data transformation. --></p>
<p><!-- %A global \code{option("collapse_unused_arg_action")} can be set to regulate the behavior when unused arguments are passed to a generic function. The default is to issue a warning. --></p>

<p><em>collapse</em> installs with a built-in hierarchical <a href='index.html'>documentation</a> facilitating the use of the package. The vignettes are complimentary and also follow a more structured approach. <!-- % and \code{base/stats}. % extra methods warrant, provide ? --></p>
<p>Apart from general performance considerations, <em>collapse</em> excels at applications involving fast panel data transformations and techniques, fast weighted computations (e.g. weighted aggregation), fast programming and aggregation with categorical and mixed-type data, fast programming with (multivariate) time series, and programming with lists of data objects. <!-- %Other broad areas are fast grouped and weighted programming to implement new statistical techniques and packages, and fast data manipulation code (i.e. server-side for \code{shiny} apps). --></p>
<p><!-- % The package largely avoids non-standard evaluation and exports core methods for maximum programmability.  % Most are S3 generic with methods for common \code{R} objects (vectors, matrices, data frames, \dots) % high computation  %(aggregation and transformations ~10x \emph{data.table} on data &lt;1 Mio obs.). --></p>
<p><!-- % Beyond speed, flexibility and parsimony in coding, a central objective of \emph{collapse} is to facilitate advanced / complex operations on data. -->
<em>collapse</em> is mainly coded in C++ and built with <code>Rcpp</code>, but also uses C functions from <em>data.table</em> (grouping, ordering, subsetting, row-binding), <em>lfe</em> (centering on multiple factors) and <em>stats</em> (ACF and PACF). For the moment <em>collapse</em> does not use low-level parallelism (such as OpenMP).
<!-- % \emph{collapse} is built with \code{Rcpp} and imports \code{C} functions from \emph{data.table}, \emph{lfe} and \emph{stats}. %, and uses \code{ggplot2} visualizations. --></p>


    <h2 class="hasAnchor" id="author-s-"><a class="anchor" href="#author-s-"></a>Author(s)</h2>

    <p><!-- % \author{ -->
<b>Maintainer</b>: Sebastian Krantz <a href='mailto:sebastian.krantz@graduateinstitute.ch'>sebastian.krantz@graduateinstitute.ch</a></p>
<p>Other contributors from packages <em>collapse</em> utilizes:</p><ul>
<li><p>Matt Dowle, Arun Srinivasan and contributors worldwide (data.table)</p></li>
<li><p>Simen Gaure (lfe)</p></li>
<li><p>Dirk Eddelbuettel and contributors worldwide (Rcpp)</p></li>
<li><p>R Core Team and contributors worldwide (stats)</p></li>
</ul><p>I thank Ralf Stubner, Joseph Wood and Dirk Eddelbuettel for helpful answers on Stackoverflow, Joris Meys for encouraging me and helping to set up the <a href='https://github.com/SebKrantz/collapse'>Github repository</a> for <em>collapse</em>, Matthieu Stigler, Patrice Kiener, Zhiyi Xu and Kevin Tappe for feature requests and helpful suggestions.</p>
    <h2 class="hasAnchor" id="developing-feature-requests-bug-reporting"><a class="anchor" href="#developing-feature-requests-bug-reporting"></a>Developing / Feature Requests / Bug Reporting</h2>

    
<ul>
<li><p>If you are interested in extending or optimizing this package, see the source code at <a href='https://github.com/SebKrantz/collapse/tree/master'>https://github.com/SebKrantz/collapse/tree/master</a>, fork and send pull-requests, or e-mail me.</p></li>
<li><p>Please send feature requests via e-mail.</p></li>
<li><p>Please report issues at <a href='https://github.com/SebKrantz/collapse/issues'>https://github.com/SebKrantz/collapse/issues</a> or e-mail me.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Let's start with some statistical programming</span>
<span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Length</span>
<span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span>    <span class='co'># Saving numeric variables</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span>      <span class='co'># Factor</span>

<span class='co'># Simple statistics</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>               <span class='co'># vector</span>
</div><div class='output co'>#&gt; [1] 5.843333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># matrix (qM is a faster as.matrix)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>               <span class='co'># data.frame</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.843333     3.057333     3.758000     1.199333 </div><div class='input'>
<span class='co'># Preserving data structure</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Still a matrix</span>
</div><div class='output co'>#&gt;      Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; [1,]     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>         <span class='co'># Still a data.frame</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333</div><div class='input'>
<span class='co'># Weighted statistics, supported by most functions...</span>
<span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='AA2-small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, w <span class='op'>=</span> <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
#&gt;     5.877386     3.073472     3.809625     1.205031 </div><div class='input'>
<span class='co'># Grouped statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa            5.006       3.428        1.462       0.246
#&gt; versicolor        5.936       2.770        4.260       1.326
#&gt; virginica         6.588       2.974        5.552       2.026</div><div class='input'>
<span class='co'># Groupwise-weighted statistics...</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; setosa         5.035577    3.490255     1.474480    0.233055
#&gt; versicolor     5.981707    2.733746     4.305737    1.320131
#&gt; virginica      6.594051    3.009243     5.589086    2.037909</div><div class='input'>
<span class='co'># Simple Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Replacing values with the mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1            5           3          1.5         0.2
#&gt; 2            5           3          1.5         0.2
#&gt; 3            5           3          1.5         0.2
#&gt; 4            5           3          1.5         0.2
#&gt; 5            5           3          1.5         0.2
#&gt; 6            5           3          1.5         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Subtracting the median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1         -0.7         0.5        -2.95        -1.1
#&gt; 2         -0.9         0.0        -2.95        -1.1
#&gt; 3         -1.1         0.2        -3.05        -1.1
#&gt; 4         -1.2         0.1        -2.85        -1.1
#&gt; 5         -0.8         0.6        -2.95        -1.1
#&gt; 6         -0.4         0.9        -2.65        -0.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"%"</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Computing percentages</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.5818597   0.7631923    0.2483591   0.1111729
#&gt; 2    0.5590416   0.6541648    0.2483591   0.1111729
#&gt; 3    0.5362236   0.6977758    0.2306191   0.1111729
#&gt; 4    0.5248146   0.6759703    0.2660990   0.1111729
#&gt; 5    0.5704507   0.7849978    0.2483591   0.1111729
#&gt; 6    0.6160867   0.8504143    0.3015789   0.2223457</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>            <span class='co'># Dividing by the standard-deviation (scaling), etc...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     6.158928    8.029986    0.7930671   0.2623854
#&gt; 2     5.917402    6.882845    0.7930671   0.2623854
#&gt; 3     5.675875    7.341701    0.7364195   0.2623854
#&gt; 4     5.555112    7.112273    0.8497148   0.2623854
#&gt; 5     6.038165    8.259414    0.7930671   0.2623854
#&gt; 6     6.521218    8.947698    0.9630101   0.5247707</div><div class='input'>
<span class='co'># Weighted Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='fl'>0.75</span>, w <span class='op'>=</span> <span class='va'>w</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing by the weighted 3rd quartile</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          6.4         3.4          5.1         1.8
#&gt; 2          6.4         3.4          5.1         1.8
#&gt; 3          6.4         3.4          5.1         1.8
#&gt; 4          6.4         3.4          5.1         1.8
#&gt; 5          6.4         3.4          5.1         1.8
#&gt; 6          6.4         3.4          5.1         1.8</div><div class='input'>
<span class='co'># Grouped Transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fvar</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Replacing values with the group variance</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 2     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 3     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 4     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 5     0.124249   0.1436898   0.03015918  0.01110612
#&gt; 6     0.124249   0.1436898   0.03015918  0.01110612</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Grouped scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     14.46851    9.233260     8.061544    1.897793
#&gt; 2     13.90112    7.914223     8.061544    1.897793
#&gt; 3     13.33372    8.441838     7.485720    1.897793
#&gt; 4     13.05003    8.178031     8.637369    1.897793
#&gt; 5     14.18481    9.497068     8.061544    1.897793
#&gt; 6     15.31960   10.288490     9.789018    3.795585</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmin, fmax.html'>fmin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Setting the minimum value in each species to 0</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.8         1.2          0.4         0.1
#&gt; 2          0.6         0.7          0.4         0.1
#&gt; 3          0.4         0.9          0.3         0.1
#&gt; 4          0.3         0.8          0.5         0.1
#&gt; 5          0.7         1.3          0.4         0.1
#&gt; 6          1.1         1.6          0.7         0.3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Dividing by the sum (proportions)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.02037555  0.02042007   0.01915185  0.01626016
#&gt; 2   0.01957651  0.01750292   0.01915185  0.01626016
#&gt; 3   0.01877747  0.01866978   0.01778386  0.01626016
#&gt; 4   0.01837795  0.01808635   0.02051984  0.01626016
#&gt; 5   0.01997603  0.02100350   0.01915185  0.01626016
#&gt; 6   0.02157411  0.02275379   0.02325581  0.03252033</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Groupwise de-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.1         0.1         -0.1         0.0
#&gt; 2         -0.1        -0.4         -0.1         0.0
#&gt; 3         -0.3        -0.2         -0.2         0.0
#&gt; 4         -0.4        -0.3          0.0         0.0
#&gt; 5          0.0         0.2         -0.1         0.0
#&gt; 6          0.4         0.5          0.2         0.2</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ffirst, flast.html'>ffirst</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, TRA <span class='op'>=</span> <span class='st'>"%%"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Taking modulus of first group-value, etc. ...</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.0         0.0          0.0           0
#&gt; 2          4.9         3.0          0.0           0
#&gt; 3          4.7         3.2          1.3           0
#&gt; 4          4.6         3.1          0.1           0
#&gt; 5          5.0         0.1          0.0           0
#&gt; 6          0.3         0.4          0.3           0</div><div class='input'>
<span class='co'># Grouped and weighted transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>         <span class='co'># weighted scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     15.23177    8.894492     8.430091    1.961157
#&gt; 2     14.63444    7.623850     8.430091    1.961157
#&gt; 3     14.03712    8.132107     7.827942    1.961157</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"-"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span>     <span class='co'># subtracting the weighted group-median</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          0.0         0.1         -0.1           0
#&gt; 2         -0.2        -0.4         -0.1           0
#&gt; 3         -0.4        -0.2         -0.2           0</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fmode.html'>fmode</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, <span class='st'>"replace"</span><span class='op'>)</span>, <span class='fl'>3</span><span class='op'>)</span> <span class='co'># replace with weighted statistical mode</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1          5.1         3.4          1.4         0.2
#&gt; 2          5.1         3.4          1.4         0.2
#&gt; 3          5.1         3.4          1.4         0.2</div><div class='input'>
<span class='co'>## Some more advanced transformations...</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fbetween</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                             <span class='co'># Averaging (faster t.: fmean(d, TRA = "replace"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.843333    3.057333        3.758    1.199333
#&gt; 2     5.843333    3.057333        3.758    1.199333
#&gt; 3     5.843333    3.057333        3.758    1.199333
#&gt; 4     5.843333    3.057333        3.758    1.199333
#&gt; 5     5.843333    3.057333        3.758    1.199333
#&gt; 6     5.843333    3.057333        3.758    1.199333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                              <span class='co'># Centering (faster than: fmean(d, TRA = "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.7433333  0.44266667       -2.358  -0.9993333
#&gt; 2   -0.9433333 -0.05733333       -2.358  -0.9993333
#&gt; 3   -1.1433333  0.14266667       -2.458  -0.9993333
#&gt; 4   -1.2433333  0.04266667       -2.258  -0.9993333
#&gt; 5   -0.8433333  0.54266667       -2.358  -0.9993333
#&gt; 6   -0.4433333  0.84266667       -2.058  -0.7993333</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                        <span class='co'># Grouped and weighted (same as fmean(d, f, w, "-"))</span>
</div><div class='output co'>#&gt;   Sepal.Length  Sepal.Width Petal.Length Petal.Width
#&gt; 1   0.06442335  0.009745289  -0.07448016 -0.03305496
#&gt; 2  -0.13557665 -0.490254711  -0.07448016 -0.03305496
#&gt; 3  -0.33557665 -0.290254711  -0.17448016 -0.03305496
#&gt; 4  -0.43557665 -0.390254711   0.02551984 -0.03305496
#&gt; 5  -0.03557665  0.109745289  -0.07448016 -0.03305496
#&gt; 6   0.36442335  0.409745289   0.22551984  0.16694504</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># Setting a custom mean</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.064423    5.009745      4.92552    4.966945
#&gt; 2     4.864423    4.509745      4.92552    4.966945
#&gt; 3     4.664423    4.709745      4.82552    4.966945
#&gt; 4     4.564423    4.609745      5.02552    4.966945
#&gt; 5     4.964423    5.109745      4.92552    4.966945
#&gt; 6     5.364423    5.409745      5.22552    5.166945</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, theta <span class='op'>=</span> <span class='fl'>0.76</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Quasi-centering i.e. d - theta*fbetween(d, f, w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    1.2729617   0.8474064    0.2793951  0.02287823
#&gt; 2    1.0729617   0.3474064    0.2793951  0.02287823
#&gt; 3    0.8729617   0.5474064    0.1793951  0.02287823
#&gt; 4    0.7729617   0.4474064    0.3793951  0.02287823
#&gt; 5    1.1729617   0.9474064    0.2793951  0.02287823
#&gt; 6    1.5729617   1.2474064    0.5793951  0.22287823</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Preserving the overall mean of the data</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1      5.94181    3.083218     3.735145    1.171976
#&gt; 2      5.74181    2.583218     3.735145    1.171976
#&gt; 3      5.54181    2.783218     3.635145    1.171976
#&gt; 4      5.44181    2.683218     3.835145    1.171976
#&gt; 5      5.84181    3.183218     3.735145    1.171976
#&gt; 6      6.24181    3.483218     4.035145    1.371976</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span><span class='op'>)</span>                               <span class='co'># Scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1   -0.8976739  1.01560199    -1.335752   -1.311052
#&gt; 2   -1.1392005 -0.13153881    -1.335752   -1.311052
#&gt; 3   -1.3807271  0.32731751    -1.392399   -1.311052
#&gt; 4   -1.5014904  0.09788935    -1.279104   -1.311052
#&gt; 5   -1.0184372  1.24503015    -1.335752   -1.311052
#&gt; 6   -0.5353840  1.93331463    -1.165809   -1.048667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Custom scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    2.3069784    8.046806    0.9927451    1.066844
#&gt; 2    1.5823985    4.605384    0.9927451    1.066844
#&gt; 3    0.8578187    5.981953    0.8228021    1.066844
#&gt; 4    0.4955288    5.293668    1.1626881    1.066844
#&gt; 5    1.9446885    8.735090    0.9927451    1.066844
#&gt; 6    3.3938481   10.799944    1.5025740    1.854000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Mean preserving scaling</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     3.150312    6.104139  -0.24925490   -2.733823
#&gt; 2     2.425732    2.662717  -0.24925490   -2.733823
#&gt; 3     1.701152    4.039286  -0.41919786   -2.733823
#&gt; 4     1.338862    3.351001  -0.07931195   -2.733823
#&gt; 5     2.788022    6.792424  -0.24925490   -2.733823
#&gt; 6     4.237181    8.857277   0.26057397   -1.946667</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># Grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1    0.1924081  0.02476554   -0.4484818  -0.3241298
#&gt; 2   -0.4049161 -1.24587610   -0.4484818  -0.3241298
#&gt; 3   -1.0022403 -0.73761945   -1.0506312  -0.3241298
#&gt; 4   -1.3009024 -0.99174778    0.1536675  -0.3241298
#&gt; 5   -0.1062540  0.27889387   -0.4484818  -0.3241298
#&gt; 6    1.0883944  1.04127886    1.3579663   1.6370273</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='fl'>5</span>, sd <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># Custom grouped and weighted scaling and centering</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.577224    5.074297     3.654554    4.027611
#&gt; 2     3.785252    1.262372     3.654554    4.027611
#&gt; 3     1.993279    2.787142     1.848106    4.027611
#&gt; 4     1.097293    2.024757     5.461003    4.027611
#&gt; 5     4.681238    5.836682     3.654554    4.027611
#&gt; 6     8.265183    8.123837     9.073899    9.911082</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='cn'>FALSE</span>,            <span class='co'># Preserving group means</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># and setting group-sd to fsd(fwithin(d, f, w), w = w)</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.137859    3.499121     1.280266   0.1688547
#&gt; 2     4.820327    3.044220     1.280266   0.1688547
#&gt; 3     4.502795    3.226180     1.019507   0.1688547
#&gt; 4     4.344028    3.135200     1.541025   0.1688547
#&gt; 5     4.979093    3.590101     1.280266   0.1688547
#&gt; 6     5.614158    3.863042     2.062544   0.5573004</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>f</span>, <span class='va'>w</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span>,   <span class='co'># Full harmonization of group means and variances,</span>
            sd <span class='op'>=</span> <span class='st'>"within.sd"</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># while preserving the level and scale of the data.</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width
#&gt; 1     5.979669    3.082339     3.615411    1.140830
#&gt; 2     5.662137    2.627437     3.615411    1.140830
#&gt; 3     5.344604    2.809398     3.354652    1.140830
#&gt; 4     5.185838    2.718418     3.876170    1.140830
#&gt; 5     5.820903    3.173319     3.615411    1.140830
#&gt; 6     6.455967    3.446260     4.397688    1.529276</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Use get_vars for fast selecting, gv is shortcut</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1          5.1         3.5
#&gt; 2          4.9         3.0
#&gt; 3          4.7         3.2
#&gt; 4          4.6         3.1
#&gt; 5          5.0         3.6
#&gt; 6          5.4         3.9</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>fHDbetween</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Linear prediction with factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1     4.950107    3.389732
#&gt; 2     4.950107    3.389732
#&gt; 3     4.859513    3.374264
#&gt; 4     5.040702    3.405199
#&gt; 5     4.950107    3.389732
#&gt; 6     5.220692    3.560823</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>fHDwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>3</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Linear partialling out factors and covariates</span>
</div><div class='output co'>#&gt;   Sepal.Length Sepal.Width
#&gt; 1   0.14989286   0.1102684
#&gt; 2  -0.05010714  -0.3897316
#&gt; 3  -0.15951256  -0.1742640
#&gt; 4  -0.44070173  -0.3051992
#&gt; 5   0.04989286   0.2102684
#&gt; 6   0.17930818   0.3391766</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>                            <span class='co'># Similarly fsubset/ss for fast subsetting rows</span>
</div><div class='output co'>#&gt;    Sepal.Length Sepal.Width
#&gt; 1           5.1         3.5
#&gt; 2           4.9         3.0
#&gt; 3           4.7         3.2
#&gt; 4           4.6         3.1
#&gt; 5           5.0         3.6
#&gt; 6           5.4         3.9
#&gt; 7           4.6         3.4
#&gt; 8           5.0         3.4
#&gt; 9           4.4         2.9
#&gt; 10          4.9         3.1</div><div class='input'>
<span class='co'># Simple Time-Computations..</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='va'>AirPassengers</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># One lead and three lags</span>
</div><div class='output co'>#&gt;       F1  --  L1  L2  L3
#&gt; [1,] 118 112  NA  NA  NA
#&gt; [2,] 132 118 112  NA  NA
#&gt; [3,] 129 132 118 112  NA
#&gt; [4,] 121 129 132 118 112
#&gt; [5,] 135 121 129 132 118
#&gt; [6,] 148 135 121 129 132</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>,                     <span class='co'># Suitably lagged first and second differences</span>
      <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/stats/time.html'>frequency</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>, diff <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      D1.DAX D2.DAX L260D1.DAX L260D2.DAX D1.SMI D2.SMI L260D1.SMI L260D2.SMI
#&gt; [1,]     NA     NA         NA         NA     NA     NA         NA         NA
#&gt; [2,] -15.12     NA         NA         NA   10.4     NA         NA         NA
#&gt; [3,]  -7.12   8.00         NA         NA   -9.9  -20.3         NA         NA
#&gt; [4,]  14.53  21.65         NA         NA    5.5   15.4         NA         NA
#&gt; [5,]  -2.88 -17.41         NA         NA    2.5   -3.0         NA         NA
#&gt; [6,]  -7.55  -4.67         NA         NA  -15.0  -17.5         NA         NA
#&gt;      D1.CAC D2.CAC L260D1.CAC L260D2.CAC D1.FTSE D2.FTSE L260D1.FTSE
#&gt; [1,]     NA     NA         NA         NA      NA      NA          NA
#&gt; [2,]  -22.3     NA         NA         NA    16.6      NA          NA
#&gt; [3,]  -32.5  -10.2         NA         NA   -12.0   -28.6          NA
#&gt; [4,]   -9.9   22.6         NA         NA    22.2    34.2          NA
#&gt; [5,]   15.0   24.9         NA         NA    14.3    -7.9          NA
#&gt; [6,]   -8.8  -23.8         NA         NA   -17.9   -32.2          NA
#&gt;      L260D2.FTSE
#&gt; [1,]          NA
#&gt; [2,]          NA
#&gt; [3,]          NA
#&gt; [4,]          NA
#&gt; [5,]          NA
#&gt; [6,]          NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, rho <span class='op'>=</span> <span class='fl'>0.87</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Quasi-differences (x_t - rho*x_t-1)</span>
</div><div class='output co'>#&gt;           DAX     SMI     CAC    FTSE
#&gt; [1,]       NA      NA      NA      NA
#&gt; [2,] 196.6175 228.553 208.164 334.268
#&gt; [3,] 202.6519 209.605 195.065 307.826
#&gt; [4,] 223.3763 223.718 213.440 340.466
#&gt; [5,] 207.8552 221.433 237.053 335.452
#&gt; [6,] 202.8108 204.258 215.203 305.111</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, log <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>        <span class='co'># Log-differences</span>
</div><div class='output co'>#&gt;               DAX          SMI          CAC         FTSE
#&gt; [1,]           NA           NA           NA           NA
#&gt; [2,] -0.009326550  0.006178360 -0.012658756  0.006770286
#&gt; [3,] -0.004422175 -0.005880448 -0.018740638 -0.004889587
#&gt; [4,]  0.009003794  0.003271184 -0.005779182  0.009027020
#&gt; [5,] -0.001778217  0.001483372  0.008743353  0.005771847
#&gt; [6,] -0.004676712 -0.008933417 -0.005120160 -0.007230164</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Exact growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9283193  0.6197485 -1.2578971  0.6793256
#&gt; [3,] -0.4412412 -0.5863192 -1.8566124 -0.4877652
#&gt; [4,]  0.9044450  0.3276540 -0.5762515  0.9067887
#&gt; [5,] -0.1776637  0.1484472  0.8781687  0.5788536
#&gt; [6,] -0.4665793 -0.8893632 -0.5107074 -0.7204089</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='va'>EuStockMarkets</span>, logdiff <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Log-difference growth rates (percentage change)</span>
</div><div class='output co'>#&gt;             DAX        SMI        CAC       FTSE
#&gt; [1,]         NA         NA         NA         NA
#&gt; [2,] -0.9326550  0.6178360 -1.2658756  0.6770286
#&gt; [3,] -0.4422175 -0.5880448 -1.8740638 -0.4889587
#&gt; [4,]  0.9003794  0.3271184 -0.5779182  0.9027020
#&gt; [5,] -0.1778217  0.1483372  0.8743353  0.5771847
#&gt; [6,] -0.4676712 -0.8933417 -0.5120160 -0.7230164</div><div class='input'><span class='co'># \donttest{</span>
<span class='co'># Note that it is not necessary to use factors for grouping.</span>
<span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span> <span class='co'># Can also use vector (internally converted using qF())</span>
</div><div class='output co'>#&gt;        mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4 26.66364 105.1364  82.63636 4.070909 2.285727 19.13727 4.090909 1.545455
#&gt; 6 19.74286 183.3143 122.28571 3.585714 3.117143 17.97714 3.857143 3.428571
#&gt; 8 15.10000 353.1000 209.21429 3.229286 3.999214 16.77214 3.285714 3.500000</div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>,
      <span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>              <span class='co'># or a list of vector (internally grouped using GRP())</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'><a href='GRP, fgroup_by.html'>GRP</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>~</span> <span class='va'>cyl</span> <span class='op'>+</span> <span class='va'>vs</span> <span class='op'>+</span> <span class='va'>am</span><span class='op'>)</span>        <span class='co'># It is also possible to create grouping objects</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                 <span class='co'># These are instructive to learn about the grouping,</span>
</div><div class='output co'>#&gt; collapse grouping object of length 32 with 7 ordered groups
#&gt; 
#&gt; Call: GRP.default(X = mtcars, by = ~cyl + vs + am), X is unordered
#&gt; 
#&gt; Distribution of group sizes: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;   1.000   2.500   3.000   4.571   5.500  12.000 
#&gt; 
#&gt; Groups with sizes: 
#&gt; 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1 
#&gt;     1     3     7     3     4    12     2 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>g</span><span class='op'>)</span>                                  <span class='co'># and are directly handed down to C++ code</span>
</div><div class='img'><img src='collapse-package-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>          <span class='co'># This can speed up multiple computations over same groups</span>
</div><div class='output co'>#&gt;            mpg     disp        hp     drat       wt     qsec     gear     carb
#&gt; 4.0.1 26.00000 120.3000  91.00000 4.430000 2.140000 16.70000 5.000000 2.000000
#&gt; 4.1.0 22.90000 135.8667  84.66667 3.770000 2.935000 20.97000 3.666667 1.666667
#&gt; 4.1.1 28.37143  89.8000  80.57143 4.148571 2.028286 18.70000 4.142857 1.428571
#&gt; 6.0.1 20.56667 155.0000 131.66667 3.806667 2.755000 16.32667 4.333333 4.666667
#&gt; 6.1.0 19.12500 204.5500 115.25000 3.420000 3.388750 19.21500 3.500000 2.500000
#&gt; 8.0.0 15.05000 357.6167 194.16667 3.120833 4.104083 17.14250 3.000000 3.083333
#&gt; 8.0.1 15.40000 326.0000 299.50000 3.880000 3.370000 14.55000 5.000000 6.000000</div><div class='input'><span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span>, <span class='va'>g</span><span class='op'>)</span>
</div><div class='output co'>#&gt;             mpg      disp       hp      drat        wt       qsec      gear
#&gt; 4.0.1        NA        NA       NA        NA        NA         NA        NA
#&gt; 4.1.0 1.4525839 13.969371 19.65536 0.1300000 0.4075230 1.67143651 0.5773503
#&gt; 4.1.1 4.7577005 18.802128 24.14441 0.3783926 0.4400840 0.94546285 0.3779645
#&gt; 6.0.1 0.7505553  8.660254 37.52777 0.1616581 0.1281601 0.76872188 0.5773503
#&gt; 6.1.0 1.6317169 44.742634  9.17878 0.5919459 0.1162164 0.81590441 0.5773503
#&gt; 8.0.0 2.7743959 71.823494 33.35984 0.2302749 0.7683069 0.80164745 0.0000000
#&gt; 8.0.1 0.5656854 35.355339 50.20458 0.4808326 0.2828427 0.07071068 0.0000000
#&gt;            carb
#&gt; 4.0.1        NA
#&gt; 4.1.0 0.5773503
#&gt; 4.1.1 0.5345225
#&gt; 6.0.1 1.1547005
#&gt; 6.1.0 1.7320508
#&gt; 8.0.0 0.9003366
#&gt; 8.0.1 2.8284271</div><div class='input'>
<span class='co'># Factors can efficiently be created using qF()</span>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>                     <span class='co'># Unlike GRP objects, factors are checked for NA's</span>
<span class='va'>f2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>$</span><span class='va'>cyl</span>, na.exclude <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># This can however be avoided through this option</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>f2</span><span class='op'>)</span>                                <span class='co'># Note the added class</span>
</div><div class='output co'>#&gt; [1] "factor"      "na.included"</div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/joshuaulrich/microbenchmark/'>microbenchmark</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: package ‘microbenchmark’ was built under R version 4.0.3</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f1</span><span class='op'>)</span>, <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A minor difference, larger on larger data</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;               expr    min     lq     mean median     uq     max neval cld
#&gt;  fmean(mtcars, f1) 17.404 19.412 23.95488 20.527 21.420 109.332   100   a
#&gt;  fmean(mtcars, f2) 16.511 18.519 22.85710 19.635 20.305  72.739   100   a</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='va'>cyl</span>, <span class='va'>vs</span>, <span class='va'>am</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># Efficient interactions of vectors and/or factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'><span class='fu'><a href='qF, qG, finteraction.html'>finteraction</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>8</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>       <span class='co'># .. or lists of vectors/factors</span>
</div><div class='output co'>#&gt;  [1] 6.0.1 6.0.1 4.1.1 6.1.0 8.0.0 6.1.0 8.0.0 4.1.0 4.1.0 6.1.0 6.1.0 8.0.0
#&gt; [13] 8.0.0 8.0.0 8.0.0 8.0.0 8.0.0 4.1.1 4.1.1 4.1.1 4.1.0 8.0.0 8.0.0 8.0.0
#&gt; [25] 8.0.0 4.1.1 4.0.1 4.1.1 8.0.1 6.0.1 8.0.1 4.1.1
#&gt; Levels: 4.0.1 4.1.0 4.1.1 6.0.1 6.1.0 8.0.0 8.0.1</div><div class='input'>
<span class='co'># Simple row- or column-wise computations on matrices or data frames with dapply()</span>
<span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span><span class='op'>)</span>                 <span class='co'># column quantiles</span>
</div><div class='output co'>#&gt;         mpg cyl    disp    hp  drat      wt    qsec vs am gear carb
#&gt; 0%   10.400   4  71.100  52.0 2.760 1.51300 14.5000  0  0    3    1
#&gt; 25%  15.425   4 120.825  96.5 3.080 2.58125 16.8925  0  0    3    2
#&gt; 50%  19.200   6 196.300 123.0 3.695 3.32500 17.7100  0  0    4    2
#&gt; 75%  22.800   8 326.000 180.0 3.920 3.61000 18.9000  1  1    4    4
#&gt; 100% 33.900   8 472.000 335.0 4.930 5.42400 22.9000  1  1    5    8</div><div class='input'><span class='fu'><a href='dapply.html'>dapply</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>quantile</span>, MARGIN <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>     <span class='co'># Row-quantiles</span>
</div><div class='output co'>#&gt;                     0%    25%   50%    75%  100%
#&gt; Mazda RX4            0 3.2600 4.000 18.730 160.0
#&gt; Mazda RX4 Wag        0 3.3875 4.000 19.010 160.0
#&gt; Datsun 710           1 1.6600 4.000 20.705 108.0
#&gt; Hornet 4 Drive       0 2.0000 3.215 20.420 258.0
#&gt; Hornet Sportabout    0 2.5000 3.440 17.860 360.0
#&gt; Valiant              0 1.8800 3.460 19.160 225.0
#&gt; Duster 360           0 3.1050 4.000 15.070 360.0
#&gt; Merc 240D            0 2.5950 4.000 22.200 146.7
#&gt; Merc 230             0 2.5750 4.000 22.850 140.8
#&gt; Merc 280             0 3.6800 4.000 18.750 167.6
#&gt; Merc 280C            0 3.6800 4.000 18.350 167.6
#&gt; Merc 450SE           0 3.0000 4.070 16.900 275.8
#&gt; Merc 450SL           0 3.0000 3.730 17.450 275.8
#&gt; Merc 450SLC          0 3.0000 3.780 16.600 275.8
#&gt; Cadillac Fleetwood   0 2.9650 5.250 14.190 472.0
#&gt; Lincoln Continental  0 3.0000 5.424 14.110 460.0
#&gt; Chrysler Imperial    0 3.1150 5.345 16.060 440.0
#&gt; Fiat 128             1 1.6000 4.000 25.935  78.7
#&gt; Honda Civic          1 1.8075 4.000 24.460  75.7
#&gt; Toyota Corolla       1 1.4175 4.000 26.900  71.1
#&gt; Toyota Corona        0 1.7325 3.700 20.755 120.1
#&gt; Dodge Challenger     0 2.3800 3.520 16.185 318.0
#&gt; AMC Javelin          0 2.5000 3.435 16.250 304.0
#&gt; Camaro Z28           0 3.3650 4.000 14.355 350.0
#&gt; Pontiac Firebird     0 2.5000 3.845 18.125 400.0
#&gt; Fiat X1-9            1 1.4675 4.000 23.100  79.0
#&gt; Porsche 914-2        0 2.0700 4.430 21.350 120.3
#&gt; Lotus Europa         1 1.7565 4.000 23.650 113.0
#&gt; Ford Pantera L       0 3.5850 5.000 15.150 351.0
#&gt; Ferrari Dino         0 3.1950 6.000 17.600 175.0
#&gt; Maserati Bora        0 3.5550 8.000 14.800 335.0
#&gt; Volvo 142E           1 2.3900 4.000 20.000 121.0</div><div class='input'>  <span class='co'># dapply preserves the data structure of any matrices / data frames passed</span>
  <span class='co'># Some fast matrix row/column functions are also provided by the matrixStats package</span>
<span class='co'># Similarly, BY performs grouped comptations</span>
<span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          mpg cyl   disp     hp  drat      wt    qsec vs  am gear carb
#&gt; 4.0%   21.40   4  71.10  52.00 3.690 1.51300 16.7000  0 0.0  3.0 1.00
#&gt; 4.25%  22.80   4  78.85  65.50 3.810 1.88500 18.5600  1 0.5  4.0 1.00
#&gt; 4.50%  26.00   4 108.00  91.00 4.080 2.20000 18.9000  1 1.0  4.0 2.00
#&gt; 4.75%  30.40   4 120.65  96.00 4.165 2.62250 19.9500  1 1.0  4.0 2.00
#&gt; 4.100% 33.90   4 146.70 113.00 4.930 3.19000 22.9000  1 1.0  5.0 2.00
#&gt; 6.0%   17.80   6 145.00 105.00 2.760 2.62000 15.5000  0 0.0  3.0 1.00
#&gt; 6.25%  18.65   6 160.00 110.00 3.350 2.82250 16.7400  0 0.0  3.5 2.50
#&gt; 6.50%  19.70   6 167.60 110.00 3.900 3.21500 18.3000  1 0.0  4.0 4.00
#&gt; 6.75%  21.00   6 196.30 123.00 3.910 3.44000 19.1700  1 1.0  4.0 4.00
#&gt; 6.100% 21.40   6 258.00 175.00 3.920 3.46000 20.2200  1 1.0  5.0 6.00
#&gt; 8.0%   10.40   8 275.80 150.00 2.760 3.17000 14.5000  0 0.0  3.0 2.00
#&gt; 8.25%  14.40   8 301.75 176.25 3.070 3.53250 16.0975  0 0.0  3.0 2.25
#&gt; 8.50%  15.20   8 350.50 192.50 3.115 3.75500 17.1750  0 0.0  3.0 3.50
#&gt; 8.75%  16.25   8 390.00 241.25 3.225 4.01375 17.5550  0 0.0  3.0 4.00
#&gt; 8.100% 19.20   8 472.00 335.00 4.220 5.42400 18.0000  0 1.0  5.0 8.00</div><div class='input'><span class='fu'><a href='BY.html'>BY</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span>, <span class='va'>quantile</span>, expand.wide <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   mpg.0% mpg.25% mpg.50% mpg.75% mpg.100% cyl.0% cyl.25% cyl.50% cyl.75%
#&gt; 4   21.4   22.80    26.0   30.40     33.9      4       4       4       4
#&gt; 6   17.8   18.65    19.7   21.00     21.4      6       6       6       6
#&gt; 8   10.4   14.40    15.2   16.25     19.2      8       8       8       8
#&gt;   cyl.100% disp.0% disp.25% disp.50% disp.75% disp.100% hp.0% hp.25% hp.50%
#&gt; 4        4    71.1    78.85    108.0   120.65     146.7    52  65.50   91.0
#&gt; 6        6   145.0   160.00    167.6   196.30     258.0   105 110.00  110.0
#&gt; 8        8   275.8   301.75    350.5   390.00     472.0   150 176.25  192.5
#&gt;   hp.75% hp.100% drat.0% drat.25% drat.50% drat.75% drat.100% wt.0% wt.25%
#&gt; 4  96.00     113    3.69     3.81    4.080    4.165      4.93 1.513 1.8850
#&gt; 6 123.00     175    2.76     3.35    3.900    3.910      3.92 2.620 2.8225
#&gt; 8 241.25     335    2.76     3.07    3.115    3.225      4.22 3.170 3.5325
#&gt;   wt.50%  wt.75% wt.100% qsec.0% qsec.25% qsec.50% qsec.75% qsec.100% vs.0%
#&gt; 4  2.200 2.62250   3.190    16.7  18.5600   18.900   19.950     22.90     0
#&gt; 6  3.215 3.44000   3.460    15.5  16.7400   18.300   19.170     20.22     0
#&gt; 8  3.755 4.01375   5.424    14.5  16.0975   17.175   17.555     18.00     0
#&gt;   vs.25% vs.50% vs.75% vs.100% am.0% am.25% am.50% am.75% am.100% gear.0%
#&gt; 4      1      1      1       1     0    0.5      1      1       1       3
#&gt; 6      0      1      1       1     0    0.0      0      1       1       3
#&gt; 8      0      0      0       0     0    0.0      0      0       1       3
#&gt;   gear.25% gear.50% gear.75% gear.100% carb.0% carb.25% carb.50% carb.75%
#&gt; 4      4.0        4        4         5       1     1.00      2.0        2
#&gt; 6      3.5        4        4         5       1     2.50      4.0        4
#&gt; 8      3.0        3        3         5       2     2.25      3.5        4
#&gt;   carb.100%
#&gt; 4         2
#&gt; 6         6
#&gt; 8         8</div><div class='input'><span class='co'># For efficient (grouped) replacing and sweeping out computed statistics, use TRA()</span>
<span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># Simple scaling (if sd's not needed, use fsd(mtcars, TRA = "/"))</span>
</div><div class='output co'>#&gt;                        mpg     cyl      disp       hp     drat       wt
#&gt; Mazda RX4         3.484351 3.35961 1.2909608 1.604367 7.294100 2.677684
#&gt; Mazda RX4 Wag     3.484351 3.35961 1.2909608 1.604367 7.294100 2.938298
#&gt; Datsun 710        3.783009 2.23974 0.8713986 1.356419 7.200586 2.371079
#&gt; Hornet 4 Drive    3.550719 3.35961 2.0816744 1.604367 5.760468 3.285784
#&gt; Hornet Sportabout 3.102731 4.47948 2.9046619 2.552402 5.891388 3.515738
#&gt; Valiant           3.003178 3.35961 1.8154137 1.531441 5.161978 3.536178
#&gt;                        qsec       vs       am     gear      carb
#&gt; Mazda RX4          9.211261 0.000000 2.004044 5.421494 2.4764735
#&gt; Mazda RX4 Wag      9.524645 0.000000 2.004044 5.421494 2.4764735
#&gt; Datsun 710        10.414433 1.984063 2.004044 5.421494 0.6191184
#&gt; Hornet 4 Drive    10.878913 1.984063 0.000000 4.066120 0.6191184
#&gt; Hornet Sportabout  9.524645 0.000000 0.000000 4.066120 1.2382368
#&gt; Valiant           11.315413 1.984063 0.000000 4.066120 0.6191184</div><div class='input'><span class='fu'><a href='https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html'>microbenchmark</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/sweep.html'>sweep</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fl'>2</span>, <span class='va'>sds</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># A remarkable performance gain..</span>
</div><div class='output co'>#&gt; Unit: microseconds
#&gt;                        expr      min       lq       mean    median       uq
#&gt;       TRA(mtcars, sds, "/")   13.388   16.958   25.03925   25.8825   30.568
#&gt;  sweep(mtcars, 2, sds, "/") 1110.712 1134.586 1250.98142 1255.2965 1273.593
#&gt;       max neval cld
#&gt;    49.088   100  a 
#&gt;  1784.101   100   b</div><div class='input'><span class='va'>sds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>f2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='TRA.html'>TRA</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='va'>sds</span>, <span class='st'>"/"</span>, <span class='va'>f2</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Groupd scaling (if sd's not needed: fsd(mtcars, f2, TRA = "/"))</span>
</div><div class='output co'>#&gt;                         mpg cyl     disp       hp      drat       wt      qsec
#&gt; Mazda RX4         14.447218 Inf 3.849628 4.534121  8.192327 7.352414  9.643407
#&gt; Mazda RX4 Wag     14.447218 Inf 3.849628 4.534121  8.192327 8.068012  9.971493
#&gt; Datsun 710         5.055626 Inf 4.019114 4.442421 10.534350 4.073293 11.061282
#&gt; Hornet 4 Drive    14.722403 Inf 6.207525 4.534121  6.469838 9.022142 11.389297
#&gt; Hornet Sportabout  7.304550 Inf 5.311981 3.432928  8.459515 4.529864 14.230606
#&gt; Valiant           12.452126 Inf 5.413539 4.328025  5.797647 9.709677 11.846275
#&gt;                         vs       am     gear      carb
#&gt; Mazda RX4         0.000000 1.870829 5.796551 2.2067091
#&gt; Mazda RX4 Wag     0.000000 1.870829 5.796551 2.2067091
#&gt; Datsun 710        3.316625 2.140872 7.416198 1.9148542
#&gt; Hornet 4 Drive    1.870829 0.000000 4.347413 0.5516773
#&gt; Hornet Sportabout      NaN 0.000000 4.130678 1.2848321
#&gt; Valiant           1.870829 0.000000 4.347413 0.5516773</div><div class='input'>
<span class='co'># All functions above perserve the structure of matrices / data frames</span>
<span class='co'># If conversions are required, use these efficient functions:</span>
<span class='va'>mtcarsM</span> <span class='op'>&lt;-</span> <span class='fu'><a href='A4-quick-conversion.html'>qM</a></span><span class='op'>(</span><span class='va'>mtcars</span><span class='op'>)</span>                      <span class='co'># Matrix from data.frame</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>qDF</a></span><span class='op'>(</span><span class='va'>mtcarsM</span><span class='op'>)</span><span class='op'>)</span>                         <span class='co'># data.frame from matrix columns</span>
</div><div class='output co'>#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>mrtl</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='cn'>TRUE</span>, <span class='st'>"data.frame"</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># data.frame from matrix rows, etc..</span>
</div><div class='output co'>#&gt;      Mazda RX4 Mazda RX4 Wag Datsun 710 Hornet 4 Drive Hornet Sportabout
#&gt; mpg      21.00        21.000      22.80         21.400             18.70
#&gt; cyl       6.00         6.000       4.00          6.000              8.00
#&gt; disp    160.00       160.000     108.00        258.000            360.00
#&gt; hp      110.00       110.000      93.00        110.000            175.00
#&gt; drat      3.90         3.900       3.85          3.080              3.15
#&gt; wt        2.62         2.875       2.32          3.215              3.44
#&gt;      Valiant Duster 360 Merc 240D Merc 230 Merc 280 Merc 280C Merc 450SE
#&gt; mpg    18.10      14.30     24.40    22.80    19.20     17.80      16.40
#&gt; cyl     6.00       8.00      4.00     4.00     6.00      6.00       8.00
#&gt; disp  225.00     360.00    146.70   140.80   167.60    167.60     275.80
#&gt; hp    105.00     245.00     62.00    95.00   123.00    123.00     180.00
#&gt; drat    2.76       3.21      3.69     3.92     3.92      3.92       3.07
#&gt; wt      3.46       3.57      3.19     3.15     3.44      3.44       4.07
#&gt;      Merc 450SL Merc 450SLC Cadillac Fleetwood Lincoln Continental
#&gt; mpg       17.30       15.20              10.40              10.400
#&gt; cyl        8.00        8.00               8.00               8.000
#&gt; disp     275.80      275.80             472.00             460.000
#&gt; hp       180.00      180.00             205.00             215.000
#&gt; drat       3.07        3.07               2.93               3.000
#&gt; wt         3.73        3.78               5.25               5.424
#&gt;      Chrysler Imperial Fiat 128 Honda Civic Toyota Corolla Toyota Corona
#&gt; mpg             14.700    32.40      30.400         33.900        21.500
#&gt; cyl              8.000     4.00       4.000          4.000         4.000
#&gt; disp           440.000    78.70      75.700         71.100       120.100
#&gt; hp             230.000    66.00      52.000         65.000        97.000
#&gt; drat             3.230     4.08       4.930          4.220         3.700
#&gt; wt               5.345     2.20       1.615          1.835         2.465
#&gt;      Dodge Challenger AMC Javelin Camaro Z28 Pontiac Firebird Fiat X1-9
#&gt; mpg             15.50      15.200      13.30           19.200    27.300
#&gt; cyl              8.00       8.000       8.00            8.000     4.000
#&gt; disp           318.00     304.000     350.00          400.000    79.000
#&gt; hp             150.00     150.000     245.00          175.000    66.000
#&gt; drat             2.76       3.150       3.73            3.080     4.080
#&gt; wt               3.52       3.435       3.84            3.845     1.935
#&gt;      Porsche 914-2 Lotus Europa Ford Pantera L Ferrari Dino Maserati Bora
#&gt; mpg          26.00       30.400          15.80        19.70         15.00
#&gt; cyl           4.00        4.000           8.00         6.00          8.00
#&gt; disp        120.30       95.100         351.00       145.00        301.00
#&gt; hp           91.00      113.000         264.00       175.00        335.00
#&gt; drat          4.43        3.770           4.22         3.62          3.54
#&gt; wt            2.14        1.513           3.17         2.77          3.57
#&gt;      Volvo 142E
#&gt; mpg       21.40
#&gt; cyl        4.00
#&gt; disp     121.00
#&gt; hp       109.00
#&gt; drat       4.11
#&gt; wt         2.78</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcarsM</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                 <span class='co'># Saving row.names when converting matrix to data.table</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='A4-quick-conversion.html'>qDT</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='st'>"cars"</span><span class='op'>)</span><span class='op'>)</span>                  <span class='co'># Same use a data.frame</span>
</div><div class='output co'>#&gt;                 cars  mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; 1:         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; 2:     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; 3:        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; 4:    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; 5: Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; 6:           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</div><div class='input'>

<span class='co'>## Now let's get some real data and see how we can use this power for data manipulation</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>magrittr</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: package ‘magrittr’ was built under R version 4.0.3</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘magrittr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:testthat’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    equals, is_less_than, not</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='co'># World Bank World Development Data: 216 countries, 59 years, 4 series (columns 9-12)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA
#&gt; 1 32.292   NA 114440000
#&gt; 2 32.742   NA 233350000
#&gt; 3 33.185   NA 114880000
#&gt; 4 33.624   NA 236450000
#&gt; 5 34.060   NA 302480000
#&gt; 6 34.495   NA 370250000</div><div class='input'>
<span class='co'># Starting with some discriptive tools...</span>
<span class='fu'><a href='AA2-small-helpers.html'>namlab</a></span><span class='op'>(</span><span class='va'>wlddev</span>, class <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>           <span class='co'># Show variable names, labels and classes</span>
</div><div class='output co'>#&gt;    Variable     Class                                   Label
#&gt; 1   country character                            Country Name
#&gt; 2     iso3c    factor                            Country Code
#&gt; 3      date      Date              Date Recorded (Fictitious)
#&gt; 4      year   integer                                    Year
#&gt; 5    decade   numeric                                  Decade
#&gt; 6    region    factor                                  Region
#&gt; 7    income    factor                            Income Level
#&gt; 8      OECD   logical                 Is OECD Member Country?
#&gt; 9     PCGDP   numeric      GDP per capita (constant 2010 US$)
#&gt; 10   LIFEEX   numeric Life expectancy at birth, total (years)
#&gt; 11     GINI   numeric        GINI index (World Bank estimate)
#&gt; 12      ODA   numeric    Net ODA received (constant 2015 US$)</div><div class='input'><span class='fu'><a href='fNobs.html'>fNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Observation count</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;   12744   12744   12744   12744   12744   12744   12744   12744    8995   11068 
#&gt;    GINI     ODA 
#&gt;    1356    8336 </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                         <span class='co'># Pairwise observation count</span>
</div><div class='output co'>#&gt;         country iso3c  date  year decade region income  OECD PCGDP LIFEEX GINI
#&gt; country   12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; iso3c     12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; date      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; year      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; decade    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; region    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; income    12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; OECD      12744 12744 12744 12744  12744  12744  12744 12744  8995  11068 1356
#&gt; PCGDP      8995  8995  8995  8995   8995   8995   8995  8995  8995   8398 1342
#&gt; LIFEEX    11068 11068 11068 11068  11068  11068  11068 11068  8398  11068 1353
#&gt; GINI       1356  1356  1356  1356   1356   1356   1356  1356  1342   1353 1356
#&gt; ODA        8336  8336  8336  8336   8336   8336   8336  8336  6852   7746  951
#&gt;          ODA
#&gt; country 8336
#&gt; iso3c   8336
#&gt; date    8336
#&gt; year    8336
#&gt; decade  8336
#&gt; region  8336
#&gt; income  8336
#&gt; OECD    8336
#&gt; PCGDP   6852
#&gt; LIFEEX  7746
#&gt; GINI     951
#&gt; ODA     8336</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fNobs.html'>fNobs</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span><span class='op'>)</span>    <span class='co'># Grouped observation count</span>
</div><div class='output co'>#&gt;                country iso3c date year decade region income OECD PCGDP LIFEEX
#&gt; Afghanistan         59    59   59   59     59     59     59   59    16     57
#&gt; Albania             59    59   59   59     59     59     59   59    38     57
#&gt; Algeria             59    59   59   59     59     59     59   59    58     57
#&gt; American Samoa      59    59   59   59     59     59     59   59    16      0
#&gt; Andorra             59    59   59   59     59     59     59   59    48      0
#&gt; Angola              59    59   59   59     59     59     59   59    38     57
#&gt;                GINI ODA
#&gt; Afghanistan       0  58
#&gt; Albania           5  30
#&gt; Algeria           3  58
#&gt; American Samoa    0   0
#&gt; Andorra           0   0
#&gt; Angola            2  56</div><div class='input'><span class='fu'><a href='fNdistinct.html'>fNdistinct</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                     <span class='co'># Distinct values</span>
</div><div class='output co'>#&gt; country   iso3c    date    year  decade  region  income    OECD   PCGDP  LIFEEX 
#&gt;     216     216      59      59       7       7       4       2    8995   10048 
#&gt;    GINI     ODA 
#&gt;     363    7564 </div><div class='input'><span class='fu'><a href='descr.html'>descr</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                          <span class='co'># Describe data</span>
</div><div class='output co'>#&gt; Dataset: wlddev, 12 Variables, N = 12744
#&gt; --------------------------------------------------------------------------------
#&gt; country (character): Country Name
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744    216
#&gt; Table: 
#&gt;                      Freq  Perc
#&gt; Afghanistan            59  0.46
#&gt; Albania                59  0.46
#&gt; Algeria                59  0.46
#&gt; American Samoa         59  0.46
#&gt; Andorra                59  0.46
#&gt; Angola                 59  0.46
#&gt; Antigua and Barbuda    59  0.46
#&gt;   ---
#&gt;                        Freq  Perc
#&gt; Vanuatu                  59  0.46
#&gt; Venezuela, RB            59  0.46
#&gt; Vietnam                  59  0.46
#&gt; Virgin Islands (U.S.)    59  0.46
#&gt; West Bank and Gaza       59  0.46
#&gt; Yemen, Rep.              59  0.46
#&gt; Zambia                   59  0.46
#&gt; Zimbabwe                 59  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      59      59      59      59      59      59 
#&gt; --------------------------------------------------------------------------------
#&gt; iso3c (factor): Country Code
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744    216
#&gt; Table: 
#&gt;      Freq  Perc
#&gt; ABW    59  0.46
#&gt; AFG    59  0.46
#&gt; AGO    59  0.46
#&gt; ALB    59  0.46
#&gt; AND    59  0.46
#&gt; ARE    59  0.46
#&gt; ARG    59  0.46
#&gt;   ---
#&gt;      Freq  Perc
#&gt; VNM    59  0.46
#&gt; VUT    59  0.46
#&gt; WSM    59  0.46
#&gt; XKX    59  0.46
#&gt; YEM    59  0.46
#&gt; ZAF    59  0.46
#&gt; ZMB    59  0.46
#&gt; ZWE    59  0.46
#&gt; 
#&gt; Summary of Table: 
#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#&gt;      59      59      59      59      59      59 
#&gt; --------------------------------------------------------------------------------
#&gt; date (Date): Date Recorded (Fictitious)
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744     59
#&gt; --------------------------------------------------------------------------------
#&gt; year (integer): Year
#&gt; Stats: 
#&gt;       N  Ndist  Mean     SD   Min   Max  Skew  Kurt
#&gt;   12744     59  1989  17.03  1960  2018    -0   1.8
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1962  1974  1989  2004  2016  2018
#&gt; --------------------------------------------------------------------------------
#&gt; decade (numeric): Decade
#&gt; Stats: 
#&gt;       N  Ndist     Mean     SD   Min   Max  Skew  Kurt
#&gt;   12744      7  1988.98  17.63  1960  2020  0.01  1.95
#&gt; Quant: 
#&gt;     1%    5%   25%   50%   75%   95%   99%
#&gt;   1960  1960  1970  1990  2000  2020  2020
#&gt; --------------------------------------------------------------------------------
#&gt; region (factor): Region
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      7
#&gt; Table: 
#&gt;                             Freq   Perc
#&gt; East Asia &amp; Pacific         2124  16.67
#&gt; Europe &amp; Central Asia       3422  26.85
#&gt; Latin America &amp; Caribbean   2478  19.44
#&gt; Middle East &amp; North Africa  1239   9.72
#&gt; North America                177   1.39
#&gt; South Asia                   472   3.70
#&gt; Sub-Saharan Africa          2832  22.22
#&gt; --------------------------------------------------------------------------------
#&gt; income (factor): Income Level
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      4
#&gt; Table: 
#&gt;                      Freq   Perc
#&gt; High income          4720  37.04
#&gt; Low income           1947  15.28
#&gt; Lower middle income  2773  21.76
#&gt; Upper middle income  3304  25.93
#&gt; --------------------------------------------------------------------------------
#&gt; OECD (logical): Is OECD Member Country?
#&gt; Stats: 
#&gt;       N  Ndist
#&gt;   12744      2
#&gt; Table: 
#&gt;         Freq   Perc
#&gt; FALSE  10620  83.33
#&gt; TRUE    2124  16.67
#&gt; --------------------------------------------------------------------------------
#&gt; PCGDP (numeric): GDP per capita (constant 2010 US$)
#&gt; Stats: 
#&gt;      N  Ndist      Mean        SD     Min        Max  Skew   Kurt
#&gt;   8995   8995  11563.65  18348.41  131.65  191586.64  3.11  16.96
#&gt; Quant: 
#&gt;       1%      5%      25%      50%       75%       95%       99%
#&gt;   223.54  374.38  1215.59  3619.61  14084.71  46591.94  87780.62
#&gt; --------------------------------------------------------------------------------
#&gt; LIFEEX (numeric): Life expectancy at birth, total (years)
#&gt; Stats: 
#&gt;       N  Ndist   Mean     SD    Min    Max   Skew  Kurt
#&gt;   11068  10048  63.84  11.45  18.91  85.42  -0.67  2.65
#&gt; Quant: 
#&gt;      1%     5%    25%    50%   75%    95%    99%
#&gt;   35.49  42.23  55.84  66.97  72.5  78.82  81.83
#&gt; --------------------------------------------------------------------------------
#&gt; GINI (numeric): GINI index (World Bank estimate)
#&gt; Stats: 
#&gt;      N  Ndist  Mean    SD   Min   Max  Skew  Kurt
#&gt;   1356    363  39.4  9.68  16.2  65.8  0.46  2.29
#&gt; Quant: 
#&gt;      1%    5%   25%   50%   75%   95%    99%
#&gt;   24.66  26.5  31.7  37.4  46.8  57.2  60.84
#&gt; --------------------------------------------------------------------------------
#&gt; ODA (numeric): Net ODA received (constant 2015 US$)
#&gt; Stats: 
#&gt;      N  Ndist        Mean          SD              Min             Max  Skew
#&gt;   8336   7564  428,746468  819,868971  -1.08038000e+09  2.45521800e+10  7.19
#&gt;    Kurt
#&gt;   122.9
#&gt; Quant: 
#&gt;           1%        5%        25%         50%         75%             95%
#&gt;   -11,731500  1,097500  41,020000  157,360000  463,057500  1.82400500e+09
#&gt;              99%
#&gt;   3.48697750e+09
#&gt; --------------------------------------------------------------------------------</div><div class='input'><span class='fu'><a href='varying.html'>varying</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span><span class='op'>)</span>             <span class='co'># Show which variables vary within countries</span>
</div><div class='output co'>#&gt;  iso3c   date   year decade region income   OECD  PCGDP LIFEEX   GINI    ODA 
#&gt;  FALSE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE   TRUE   TRUE   TRUE   TRUE </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, pid <span class='op'>=</span> <span class='op'>~</span> <span class='va'>country</span>,           <span class='co'># Panel-summarize columns 9 though 12 of this data</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, vlabels <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>       <span class='co'># (between and within countries)</span>
</div><div class='output co'>#&gt; , , PCGDP: GDP per capita (constant 2010 US$)
#&gt; 
#&gt;              N/T        Mean          SD          Min         Max
#&gt; Overall     8995  11563.6529  18348.4052     131.6464   191586.64
#&gt; Between      203  12488.8577  19628.3668     255.3999  141165.083
#&gt; Within   44.3103  11563.6529   6334.9523  -30529.0928   75348.067
#&gt; 
#&gt; , , LIFEEX: Life expectancy at birth, total (years)
#&gt; 
#&gt;              N/T     Mean       SD      Min      Max
#&gt; Overall    11068  63.8411  11.4497   18.907  85.4171
#&gt; Between      207  64.5285  10.0235   39.349  85.4171
#&gt; Within   53.4686  63.8411   5.8292  33.4671  83.8595
#&gt; 
#&gt; , , GINI: GINI index (World Bank estimate)
#&gt; 
#&gt;             N/T     Mean      SD      Min      Max
#&gt; Overall    1356  39.3976  9.6764     16.2     65.8
#&gt; Between     161  39.5799  8.3679  23.3667  61.7143
#&gt; Within   8.4224  39.3976  3.0406  23.9576  54.7976
#&gt; 
#&gt; , , ODA: Net ODA received (constant 2015 US$)
#&gt; 
#&gt;              N/T        Mean          SD              Min             Max
#&gt; Overall     8336  428,746468  819,868971  -1.08038000e+09  2.45521800e+10
#&gt; Between      178  418,026522  548,293709       423846.154  3.53258914e+09
#&gt; Within   46.8315  428,746468  607,024040  -2.47969577e+09  2.35093916e+10
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>,       <span class='co'># Do all of that by region and also compute higher moments</span>
    cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, higher <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>        <span class='co'># -&gt; returns a 4D array</span>
</div><div class='output co'>#&gt; , , Overall, PCGDP
#&gt; 
#&gt;                              N/T        Mean          SD         Min
#&gt; East Asia &amp; Pacific         1391  10337.0463  14094.8338    131.9634
#&gt; Europe &amp; Central Asia       2084  25664.8064   26181.671    367.0493
#&gt; Latin America &amp; Caribbean   1896   6976.0649   6705.5377    662.2795
#&gt; Middle East &amp; North Africa   805  13760.2761  18374.2208    570.5574
#&gt; North America                170  43650.5193  18345.0419  17550.5732
#&gt; South Asia                   366   1178.3447   1581.2678    267.0736
#&gt; Sub-Saharan Africa          2283   1750.0069   2553.7889    131.6464
#&gt;                                    Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         72183.3033  1.6378   4.7544
#&gt; Europe &amp; Central Asia        191586.64  2.0987   9.2794
#&gt; Latin America &amp; Caribbean    42491.454  2.1357   7.9172
#&gt; Middle East &amp; North Africa  113682.038  2.4215   9.6667
#&gt; North America               94903.1915  0.9047   3.3501
#&gt; South Asia                   8971.1285  3.0144  11.8985
#&gt; Sub-Saharan Africa          20333.9404   3.209  15.1549
#&gt; 
#&gt; , , Between, PCGDP
#&gt; 
#&gt;                             N/T        Mean          SD         Min         Max
#&gt; East Asia &amp; Pacific          34  10337.0463    12576.62    410.2004  40046.4089
#&gt; Europe &amp; Central Asia        56  25664.8064  24008.1006    788.0229  141165.083
#&gt; Latin America &amp; Caribbean    36   6976.0649   6294.8452    884.5499  36049.6948
#&gt; Middle East &amp; North Africa   20  13760.2761  17291.0461   1084.5999  65963.2711
#&gt; North America                 3  43650.5193  12062.9919  35346.4194  61278.2411
#&gt; South Asia                    8   1178.3447   1470.7041    397.4451   6638.3501
#&gt; Sub-Saharan Africa           46   1750.0069   2199.9901    255.3999    9916.656
#&gt;                               Skew     Kurt
#&gt; East Asia &amp; Pacific         1.1707   2.7873
#&gt; Europe &amp; Central Asia       1.9279   8.4878
#&gt; Latin America &amp; Caribbean   2.1451   7.9744
#&gt; Middle East &amp; North Africa  1.9946   6.2755
#&gt; North America               0.7832   1.6136
#&gt; South Asia                  3.1759  12.0293
#&gt; Sub-Saharan Africa          2.2221   7.2472
#&gt; 
#&gt; , , Within, PCGDP
#&gt; 
#&gt;                                 N/T        Mean          SD          Min
#&gt; East Asia &amp; Pacific         40.9118  11563.6529   6363.4087  -11892.0702
#&gt; Europe &amp; Central Asia       37.2143  11563.6529  10444.6637  -30529.0928
#&gt; Latin America &amp; Caribbean   52.6667  11563.6529   2310.6622    -519.1743
#&gt; Middle East &amp; North Africa    40.25  11563.6529   6215.4419  -18492.1455
#&gt; North America               56.6667  11563.6529  13821.1717  -21876.1952
#&gt; South Asia                    45.75  11563.6529    580.8934    9525.9724
#&gt; Sub-Saharan Africa          49.6304  11563.6529   1296.8738    4528.6387
#&gt;                                    Max     Skew     Kurt
#&gt; East Asia &amp; Pacific         50475.9873   0.9072   9.3702
#&gt; Europe &amp; Central Asia        75348.067   0.3914   7.3036
#&gt; Latin America &amp; Caribbean   21734.0427   0.0638   7.8009
#&gt; Middle East &amp; North Africa       60152   1.7628  22.4172
#&gt; North America               45188.6033  -0.0258   2.8074
#&gt; South Asia                  13896.4313   1.0243   6.3765
#&gt; Sub-Saharan Africa          24375.5944   1.5433  29.8043
#&gt; 
#&gt; , , Overall, LIFEEX
#&gt; 
#&gt;                              N/T     Mean       SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         1717  65.6493  10.1221   18.907   84.278  -0.8473
#&gt; Europe &amp; Central Asia       2886  71.9323   5.4596   45.369  85.4171  -0.4758
#&gt; Latin America &amp; Caribbean   1995  67.7473   7.2844   42.113  82.1902  -0.9721
#&gt; Middle East &amp; North Africa  1163  65.7501   9.5211   34.361  82.4073    -0.76
#&gt; North America                135  75.9931   3.4825  68.8978  82.3005   -0.144
#&gt; South Asia                   456  56.7471  11.1073   32.292   77.339  -0.2666
#&gt; Sub-Saharan Africa          2716  51.0007   8.5873    27.61  74.3949   0.1514
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         4.2562
#&gt; Europe &amp; Central Asia       3.9257
#&gt; Latin America &amp; Caribbean   3.7783
#&gt; Middle East &amp; North Africa  2.8428
#&gt; North America               1.9842
#&gt; South Asia                  2.1147
#&gt; Sub-Saharan Africa          2.8059
#&gt; 
#&gt; , , Between, LIFEEX
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          32  65.6493  7.7148  48.8626  77.5681  -0.3937
#&gt; Europe &amp; Central Asia        55  71.9323  4.2526  61.9424  85.4171  -0.5323
#&gt; Latin America &amp; Caribbean    40  67.7473  4.9716  53.4959  82.1902  -0.9638
#&gt; Middle East &amp; North Africa   21  65.7501  5.8655  53.0192   76.401  -0.2274
#&gt; North America                 3  75.9931  1.2682  74.6066  77.9553   0.0859
#&gt; South Asia                    8  56.7471  5.8027  47.8822  68.6733   0.5542
#&gt; Sub-Saharan Africa           48  51.0007  5.9389   39.349   71.403   1.0178
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific          2.488
#&gt; Europe &amp; Central Asia       2.5438
#&gt; Latin America &amp; Caribbean   4.0726
#&gt; Middle East &amp; North Africa  2.8315
#&gt; North America               1.5491
#&gt; South Asia                   3.008
#&gt; Sub-Saharan Africa          4.5846
#&gt; 
#&gt; , , Within, LIFEEX
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific         53.6562  63.8411  6.5528  33.4671  83.8595  -0.3476
#&gt; Europe &amp; Central Asia       52.4727  63.8411  3.4239  46.6863  77.0723  -0.0902
#&gt; Latin America &amp; Caribbean    49.875  63.8411  5.3241  47.1311  78.2611  -0.3366
#&gt; Middle East &amp; North Africa   55.381  63.8411  7.4998  41.8394  78.4739  -0.5889
#&gt; North America                    45  63.8411  3.2433  54.7836   69.485  -0.3624
#&gt; South Asia                       57  63.8411  9.4711  42.0094  82.0276  -0.0422
#&gt; Sub-Saharan Africa          56.5833  63.8411  6.2025  43.7422  83.2612   0.0559
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         3.9061
#&gt; Europe &amp; Central Asia       3.8904
#&gt; Latin America &amp; Caribbean   2.9553
#&gt; Middle East &amp; North Africa  2.7235
#&gt; North America               2.2514
#&gt; South Asia                  2.1366
#&gt; Sub-Saharan Africa          2.8488
#&gt; 
#&gt; , , Overall, GINI
#&gt; 
#&gt;                             N/T     Mean      SD   Min   Max     Skew    Kurt
#&gt; East Asia &amp; Pacific          92  38.5065  5.3684  27.8  55.4   0.4917    2.85
#&gt; Europe &amp; Central Asia       588   31.902  4.7383  16.2  48.4   0.2524  3.0724
#&gt; Latin America &amp; Caribbean   363  50.5664  5.3238  34.4  63.3  -0.0893  2.4511
#&gt; Middle East &amp; North Africa   76  36.1947  5.1244  27.6  47.4    0.109  1.9657
#&gt; North America                22  36.1636  3.9282    31  41.1   0.1481  1.3322
#&gt; South Asia                   39  34.1641  4.3411  25.9  43.8   0.2892  2.4065
#&gt; Sub-Saharan Africa          176  44.8165  8.3376  28.9  65.8    0.634  2.8286
#&gt; 
#&gt; , , Between, GINI
#&gt; 
#&gt;                             N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific          21  38.5065  4.8352     30.8    48.65   0.1913
#&gt; Europe &amp; Central Asia        47   31.902   4.054  23.3667     40.8   0.3926
#&gt; Latin America &amp; Caribbean    25  50.5664  4.0186     41.1  57.7333  -0.0433
#&gt; Middle East &amp; North Africa   14  36.1947  4.6346    29.05  43.0667  -0.1349
#&gt; North America                 2  36.1636  3.5731  32.6727  39.6545       -0
#&gt; South Asia                    7  34.1641  3.4562  30.3556    39.85   0.2502
#&gt; Sub-Saharan Africa           45  44.8165  7.0733    31.45  61.7143   0.8873
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         1.9261
#&gt; Europe &amp; Central Asia       2.5421
#&gt; Latin America &amp; Caribbean   2.2618
#&gt; Middle East &amp; North Africa  1.7987
#&gt; North America                    1
#&gt; South Asia                  1.3567
#&gt; Sub-Saharan Africa          3.1577
#&gt; 
#&gt; , , Within, GINI
#&gt; 
#&gt;                                 N/T     Mean      SD      Min      Max     Skew
#&gt; East Asia &amp; Pacific           4.381  39.3976  2.3325  32.6476  46.1476   0.0321
#&gt; Europe &amp; Central Asia       12.5106  39.3976  2.4529   28.636  54.4976   0.8011
#&gt; Latin America &amp; Caribbean     14.52  39.3976  3.4921  26.3076  48.7365  -0.2144
#&gt; Middle East &amp; North Africa   5.4286  39.3976  2.1863  32.6309  46.6404   0.0424
#&gt; North America                    11  39.3976  1.6323   34.343   40.843  -1.4734
#&gt; South Asia                   5.5714  39.3976  2.6268  34.6726  45.9309   0.0038
#&gt; Sub-Saharan Africa           3.9111  39.3976  4.4142  23.9576  54.7976   0.1224
#&gt;                               Kurt
#&gt; East Asia &amp; Pacific         4.2462
#&gt; Europe &amp; Central Asia       9.7301
#&gt; Latin America &amp; Caribbean   3.0356
#&gt; Middle East &amp; North Africa  5.2628
#&gt; North America               5.0766
#&gt; South Asia                  2.5971
#&gt; Sub-Saharan Africa          4.1458
#&gt; 
#&gt; , , Overall, ODA
#&gt; 
#&gt;                              N/T            Mean              SD
#&gt; East Asia &amp; Pacific         1491      346,977686      615,361973
#&gt; Europe &amp; Central Asia        751      394,089867      566,834650
#&gt; Latin America &amp; Caribbean   1918      173,728368      259,343122
#&gt; Middle East &amp; North Africa  1079      663,574245  1.40635884e+09
#&gt; North America                 39      423846.154     9,678883.86
#&gt; South Asia                   450  1.25150376e+09  1.56736667e+09
#&gt; Sub-Saharan Africa          2608      440,308474      596,033604
#&gt;                                         Min             Max    Skew     Kurt
#&gt; East Asia &amp; Pacific         -1.08038000e+09  3.92003000e+09   2.712  11.3035
#&gt; Europe &amp; Central Asia           -343,480000  4.64666000e+09  3.1673  15.5881
#&gt; Latin America &amp; Caribbean       -512,730000  2.95163000e+09  3.1857  20.4058
#&gt; Middle East &amp; North Africa      -169,710000  2.45521800e+10   7.176  91.7057
#&gt; North America                    -14,520000       55,820000  4.8406  29.1877
#&gt; South Asia                            80000  8.53900000e+09  1.8057   6.6894
#&gt; Sub-Saharan Africa               -16,780000  1.12780600e+10  4.8992  57.6191
#&gt; 
#&gt; , , Between, ODA
#&gt; 
#&gt;                             N/T            Mean              SD          Min
#&gt; East Asia &amp; Pacific          31      346,977686      460,186340  1,550512.82
#&gt; Europe &amp; Central Asia        32      394,089867      446,099453  12,115777.8
#&gt; Latin America &amp; Caribbean    37      173,728368      169,248215  2,089677.42
#&gt; Middle East &amp; North Africa   21      663,574245      725,711345  2,946923.08
#&gt; North America                 1      423846.154               0   423846.154
#&gt; South Asia                    8  1.25150376e+09  1.15946284e+09  25,663448.3
#&gt; Sub-Saharan Africa           48      440,308474      357,457530  27,340689.7
#&gt;                                        Max    Skew    Kurt
#&gt; East Asia &amp; Pacific         1.64164241e+09  1.8351  5.3242
#&gt; Europe &amp; Central Asia       2.16970133e+09  2.2773  8.5531
#&gt; Latin America &amp; Caribbean       560,007241  0.9171  2.5611
#&gt; Middle East &amp; North Africa  2.73873224e+09  1.2769  4.0978
#&gt; North America                   423846.154       -       -
#&gt; South Asia                  3.53258914e+09  0.7083  2.3441
#&gt; Sub-Saharan Africa          1.41753857e+09  0.9724  3.1001
#&gt; 
#&gt; , , Within, ODA
#&gt; 
#&gt;                                 N/T        Mean              SD
#&gt; East Asia &amp; Pacific         48.0968  428,746468      408,532605
#&gt; Europe &amp; Central Asia       23.4688  428,746468      349,709591
#&gt; Latin America &amp; Caribbean   51.8378  428,746468      196,504190
#&gt; Middle East &amp; North Africa   51.381  428,746468  1.20465275e+09
#&gt; North America                    39  428,746468     9,678883.86
#&gt; South Asia                    56.25  428,746468  1.05464885e+09
#&gt; Sub-Saharan Africa          54.3333  428,746468      476,948814
#&gt;                                         Min             Max    Skew      Kurt
#&gt; East Asia &amp; Pacific         -2.18778866e+09  3.57867647e+09   0.148   14.9208
#&gt; Europe &amp; Central Asia       -1.14106420e+09  3.01475819e+09   2.161   17.7781
#&gt; Latin America &amp; Caribbean       -579,470773  2.97543078e+09  3.4431   37.7999
#&gt; Middle East &amp; North Africa  -2.47969577e+09  2.35093916e+10  8.6743  139.5562
#&gt; North America                    413,802622      484,142622  4.8406   29.1877
#&gt; South Asia                  -2.37972267e+09  5.51177302e+09  2.0067   10.5477
#&gt; Sub-Saharan Africa              -825,184566  1.07855444e+10  5.9273  104.1212
#&gt; </div><div class='input'><span class='fu'><a href='qsu.html'>qsu</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>region</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>,
    higher <span class='op'>=</span> <span class='cn'>TRUE</span>, array <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>                           <span class='co'># Return as a list of matrices..</span>
<span class='fu'><a href='unlist2d.html'>unlist2d</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Variable"</span>,<span class='st'>"Trans"</span><span class='op'>)</span>, row.names <span class='op'>=</span> <span class='st'>"Region"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>  <span class='co'># and turn into a tidy data.frame</span>
</div><div class='output co'>#&gt;   Variable   Trans                     Region    N      Mean        SD
#&gt; 1    PCGDP Overall        East Asia &amp; Pacific 1391 10337.046 14094.834
#&gt; 2    PCGDP Overall      Europe &amp; Central Asia 2084 25664.806 26181.671
#&gt; 3    PCGDP Overall Latin America &amp; Caribbean  1896  6976.065  6705.538
#&gt; 4    PCGDP Overall Middle East &amp; North Africa  805 13760.276 18374.221
#&gt; 5    PCGDP Overall              North America  170 43650.519 18345.042
#&gt; 6    PCGDP Overall                 South Asia  366  1178.345  1581.268
#&gt;          Min        Max      Skew      Kurt
#&gt; 1   131.9634  72183.303 1.6377612  4.754406
#&gt; 2   367.0493 191586.640 2.0987365  9.279446
#&gt; 3   662.2795  42491.454 2.1357240  7.917158
#&gt; 4   570.5574 113682.038 2.4214546  9.666703
#&gt; 5 17550.5732  94903.192 0.9047195  3.350085
#&gt; 6   267.0736   8971.128 3.0144216 11.898500</div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>                           <span class='co'># Pairwise correlations with p-value</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA
#&gt; year      1     .99*   .15*   .45*  -.30*   .12*
#&gt; decade   .99*    1     .15*   .44*  -.27*   .12*
#&gt; PCGDP    .15*   .15*    1     .57*  -.42*  -.16*
#&gt; LIFEEX   .45*   .44*   .57*    1    -.34*  -.02*
#&gt; GINI    -.30*  -.27*  -.42*  -.34*    1    -.17*
#&gt; ODA      .12*   .12*  -.16*  -.02*  -.17*    1  </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>    <span class='co'># Correlating country means</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: the standard deviation is zero</span></div><div class='output co'>#&gt;           year  decade   PCGDP  LIFEEX    GINI     ODA
#&gt; year       1       NA      NA      NA      NA      NA 
#&gt; decade     NA      1       NA      NA      NA      NA 
#&gt; PCGDP      NA      NA      1      .60*   -.41*   -.24*
#&gt; LIFEEX     NA      NA     .60*     1     -.41*   -.18*
#&gt; GINI       NA      NA    -.41*   -.41*     1     -.17 
#&gt; ODA        NA      NA    -.24*   -.18*   -.17      1  </div><div class='input'><span class='fu'><a href='pwcor, pwcov, pwNobs.html'>pwcor</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>fwithin</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>num_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>, <span class='va'>wlddev</span><span class='op'>$</span><span class='va'>country</span><span class='op'>)</span>, P <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>  <span class='co'># Within-country correlations</span>
</div><div class='output co'>#&gt;          year decade  PCGDP LIFEEX   GINI    ODA
#&gt; year      1     .99*   .43*   .84*  -.20*   .17*
#&gt; decade   .99*    1     .43*   .83*  -.19*   .16*
#&gt; PCGDP    .43*   .43*    1     .30*  -.03   -.01 
#&gt; LIFEEX   .84*   .83*   .30*    1    -.15*   .14*
#&gt; GINI    -.20*  -.19*  -.03   -.15*    1    -.02 
#&gt; ODA      .17*   .16*  -.01    .14*  -.02     1  </div><div class='input'><span class='fu'><a href='psacf.html'>psacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                 <span class='co'># Panel-data Autocorrelation function</span>
</div><div class='img'><img src='collapse-package-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psacf.html'>pspacf</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>                <span class='co'># Partial panel-autocorrelations</span>
</div><div class='img'><img src='collapse-package-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='psmat.html'>psmat</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span><span class='va'>iso3c</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>plot</span>          <span class='co'># Convert panel to 3D array and plot</span>
</div><div class='img'><img src='collapse-package-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## collapse offers a few very efficent functions for data manipulation:</span>
<span class='co'># Fast selecting and replacing columns</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>     <span class='co'># Same as wlddev[9:12] but 2x faster</span>
<span class='va'>series</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='co'># Same thing: &gt; 100x faster than dplyr::select</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span>     <span class='co'># Replace, 8x faster wlddev[9:12] &lt;- series + replaces names</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>series</span> <span class='co'># Same thing</span>

<span class='co'># Fast subsetting</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>iso3c</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         date year decade                region      income OECD PCGDP   LIFEEX
#&gt; 1 1961-01-01 1960   1960 Europe &amp; Central Asia High income TRUE    NA 69.79651
#&gt; 2 1962-01-01 1961   1960 Europe &amp; Central Asia High income TRUE    NA 69.97827
#&gt; 3 1963-01-01 1962   1960 Europe &amp; Central Asia High income TRUE    NA 70.13407
#&gt; 4 1964-01-01 1963   1960 Europe &amp; Central Asia High income TRUE    NA 70.27293
#&gt; 5 1965-01-01 1964   1960 Europe &amp; Central Asia High income TRUE    NA 70.40129
#&gt; 6 1966-01-01 1965   1960 Europe &amp; Central Asia High income TRUE    NA 70.52315
#&gt;   GINI ODA
#&gt; 1   NA  NA
#&gt; 2   NA  NA
#&gt; 3   NA  NA
#&gt; 4   NA  NA
#&gt; 5   NA  NA
#&gt; 6   NA  NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"Ireland"</span> <span class='op'>&amp;</span> <span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   year    PCGDP   LIFEEX GINI ODA
#&gt; 1 1991 24033.77 75.00527   NA  NA
#&gt; 2 1992 24668.41 75.18095   NA  NA
#&gt; 3 1993 25206.33 75.33612   NA  NA
#&gt; 4 1994 26552.29 75.47680   NA  NA
#&gt; 5 1995 28961.58 75.61756   NA  NA
#&gt; 6 1996 30977.18 75.83171   NA  NA</div><div class='input'><span class='fu'><a href='fsubset.html'>ss</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span> <span class='co'># This is an order of magnitude faster than wlddev[1:10, 1:10]</span>
</div><div class='output co'>#&gt;        country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1  Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2  Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3  Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4  Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5  Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6  Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt; 7  Afghanistan   AFG 1967-01-01 1966   1970 South Asia Low income FALSE    NA
#&gt; 8  Afghanistan   AFG 1968-01-01 1967   1970 South Asia Low income FALSE    NA
#&gt; 9  Afghanistan   AFG 1969-01-01 1968   1970 South Asia Low income FALSE    NA
#&gt; 10 Afghanistan   AFG 1970-01-01 1969   1970 South Asia Low income FALSE    NA
#&gt;    LIFEEX
#&gt; 1  32.292
#&gt; 2  32.742
#&gt; 3  33.185
#&gt; 4  33.624
#&gt; 5  34.060
#&gt; 6  34.495
#&gt; 7  34.928
#&gt; 8  35.361
#&gt; 9  35.796
#&gt; 10 36.234</div><div class='input'>
<span class='co'># Fast transforming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;   LIFEEX GINI       ODA ODA_GDP ODA_LIFEEX
#&gt; 1 32.292   NA 114440000      NA   331.2791
#&gt; 2 32.742   NA 233350000      NA   466.5505
#&gt; 3 33.185   NA 114880000      NA   322.9835
#&gt; 4 33.624   NA 236450000      NA   457.3201
#&gt; 5 34.060   NA 302480000      NA   510.6269
#&gt; 6 34.495   NA 370250000      NA   557.8165</div><div class='input'><span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, ODA_GDP <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>/</span> <span class='va'>PCGDP</span>, ODA_LIFEEX <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='co'># by reference</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, PCGDP <span class='op'>=</span> <span class='cn'>NULL</span>, ODA <span class='op'>=</span> <span class='cn'>NULL</span>, GINI_sum <span class='op'>=</span> <span class='fu'><a href='fsum.html'>fsum</a></span><span class='op'>(</span><span class='va'>GINI</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD LIFEEX
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE 32.292
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE 32.742
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE 33.185
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE 33.624
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE 34.060
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE 34.495
#&gt;   GINI ODA_GDP ODA_LIFEEX GINI_sum
#&gt; 1   NA      NA   331.2791  53423.1
#&gt; 2   NA      NA   466.5505  53423.1
#&gt; 3   NA      NA   322.9835  53423.1
#&gt; 4   NA      NA   457.3201  53423.1
#&gt; 5   NA      NA   510.6269  53423.1
#&gt; 6   NA      NA   557.8165  53423.1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>log</span><span class='op'>)</span><span class='op'>)</span>           <span class='co'># Can also transform with lists of columns</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: NaNs produced</span></div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;     LIFEEX GINI      ODA ODA_GDP ODA_LIFEEX
#&gt; 1 3.474820   NA 18.55556      NA   331.2791
#&gt; 2 3.488659   NA 19.26805      NA   466.5505
#&gt; 3 3.502098   NA 18.55940      NA   322.9835
#&gt; 4 3.515240   NA 19.28125      NA   457.3201
#&gt; 5 3.528124   NA 19.52753      NA   510.6269
#&gt; 6 3.540814   NA 19.72969      NA   557.8165</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># apply = FALSE invokes fscale.data.frame</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'><span class='fu'><a href='ftransform.html'>settransformv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>     <span class='co'># Changing the data by reference</span>
<span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>         <span class='co'># Same thing (using replacement method)</span>
<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransformv</a></span><span class='op'>(</span><span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, <span class='va'>fscale</span>, apply <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># Same thing, using magrittr</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>gv</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span> <span class='op'>%&gt;%</span>              <span class='co'># With compound pipes: Scaling and lagging</span>
                        <span class='va'>fscale</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>iso3c</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;       country iso3c       date year decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX L1.PCGDP L2.PCGDP L1.LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791       NA       NA        NA
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505       NA       NA -2.755448
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835       NA       NA -2.716145
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201       NA       NA -2.677455
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269       NA       NA -2.639113
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165       NA       NA -2.601033
#&gt;   L2.LIFEEX L1.GINI L2.GINI     L1.ODA     L2.ODA
#&gt; 1        NA      NA      NA         NA         NA
#&gt; 2        NA      NA      NA -0.3833618         NA
#&gt; 3 -2.755448      NA      NA -0.2383265 -0.3833618
#&gt; 4 -2.716145      NA      NA -0.3828252 -0.2383265
#&gt; 5 -2.677455      NA      NA -0.2345454 -0.3828252
#&gt; 6 -2.639113      NA      NA -0.1540081 -0.2345454</div><div class='input'>
<span class='co'># Fast reordering</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='roworder.html'>roworder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    country iso3c       date year decade              region     income  OECD
#&gt; 1 Zimbabwe   ZWE 1961-01-01 1960   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 2 Zimbabwe   ZWE 1962-01-01 1961   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 3 Zimbabwe   ZWE 1963-01-01 1962   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 4 Zimbabwe   ZWE 1964-01-01 1963   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 5 Zimbabwe   ZWE 1965-01-01 1964   1960 Sub-Saharan Africa  Low income FALSE
#&gt; 6 Zimbabwe   ZWE 1966-01-01 1965   1960 Sub-Saharan Africa  Low income FALSE
#&gt;        PCGDP     LIFEEX GINI        ODA     ODA_GDP ODA_LIFEEX
#&gt; 1 -0.5755909 -1.0721742   NA         NA          NA         NA
#&gt; 2 -0.5739916 -1.0395970   NA -0.5228353    87.22431   5.776118
#&gt; 3 -0.5750200 -1.0079805   NA         NA          NA         NA
#&gt; 4 -0.5734651 -0.9773247   NA -0.4063045 91820.94873 185.733590
#&gt; 5 -0.5758954 -0.9474550   NA -0.4758766 38710.37564 117.224633
#&gt; 6 -0.5750414 -0.9184586   NA -0.4870979 29025.41714 101.664406</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='colorder.html'>colorder</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>country</span>, <span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year iso3c       date decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan 1960   AFG 1961-01-01   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan 1961   AFG 1962-01-01   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan 1962   AFG 1963-01-01   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan 1963   AFG 1964-01-01   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan 1964   AFG 1965-01-01   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan 1965   AFG 1966-01-01   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'>
<span class='co'># Fast renaming</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD PCGDP
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      LIFEEX GINI         ODA ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'><span class='fu'><a href='frename.html'>setrename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, country <span class='op'>=</span> <span class='va'>Ctry</span>, year <span class='op'>=</span> <span class='va'>Yr</span><span class='op'>)</span>     <span class='co'># By reference</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='frename.html'>frename</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>tolower</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          Ctry iso3c       date   Yr decade     region     income  OECD pcgdp
#&gt; 1 Afghanistan   AFG 1961-01-01 1960   1960 South Asia Low income FALSE    NA
#&gt; 2 Afghanistan   AFG 1962-01-01 1961   1960 South Asia Low income FALSE    NA
#&gt; 3 Afghanistan   AFG 1963-01-01 1962   1960 South Asia Low income FALSE    NA
#&gt; 4 Afghanistan   AFG 1964-01-01 1963   1960 South Asia Low income FALSE    NA
#&gt; 5 Afghanistan   AFG 1965-01-01 1964   1960 South Asia Low income FALSE    NA
#&gt; 6 Afghanistan   AFG 1966-01-01 1965   1960 South Asia Low income FALSE    NA
#&gt;      lifeex gini         oda ODA_GDP ODA_LIFEEX
#&gt; 1 -2.755448   NA -0.38336183      NA   331.2791
#&gt; 2 -2.716145   NA -0.23832646      NA   466.5505
#&gt; 3 -2.677455   NA -0.38282516      NA   322.9835
#&gt; 4 -2.639113   NA -0.23454537      NA   457.3201
#&gt; 5 -2.601033   NA -0.15400811      NA   510.6269
#&gt; 6 -2.563041   NA -0.07134856      NA   557.8165</div><div class='input'>
<span class='co'># Fast grouping</span>
<span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>Ctry</span>, <span class='va'>decade</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fgroup_vars</span>  <span class='co'># fgroup_by is a lot faster than dplyr::group_by</span>
</div><div class='output co'>#&gt;                    Ctry decade
#&gt; 1           Afghanistan   1960
#&gt; 2           Afghanistan   1960
#&gt; 3           Afghanistan   1960
#&gt; 4           Afghanistan   1960
#&gt; 5           Afghanistan   1960
#&gt; 6           Afghanistan   1960
#&gt; 7           Afghanistan   1970
#&gt; 8           Afghanistan   1970
#&gt; 9           Afghanistan   1970
#&gt; 10          Afghanistan   1970
#&gt; 11          Afghanistan   1970
#&gt; 12          Afghanistan   1970
#&gt; 13          Afghanistan   1970
#&gt; 14          Afghanistan   1970
#&gt; 15          Afghanistan   1970
#&gt; 16          Afghanistan   1980
#&gt; 17          Afghanistan   1980
#&gt; 18          Afghanistan   1980
#&gt; 19          Afghanistan   1980
#&gt; 20          Afghanistan   1980
#&gt; 21          Afghanistan   1980
#&gt; 22          Afghanistan   1980
#&gt; 23          Afghanistan   1980
#&gt; 24          Afghanistan   1980
#&gt; 25          Afghanistan   1980
#&gt; 26          Afghanistan   1980
#&gt; 27          Afghanistan   1990
#&gt; 28          Afghanistan   1990
#&gt; 29          Afghanistan   1990
#&gt; 30          Afghanistan   1990
#&gt; 31          Afghanistan   1990
#&gt; 32          Afghanistan   1990
#&gt; 33          Afghanistan   1990
#&gt; 34          Afghanistan   1990
#&gt; 35          Afghanistan   1990
#&gt; 36          Afghanistan   2000
#&gt; 37          Afghanistan   2000
#&gt; 38          Afghanistan   2000
#&gt; 39          Afghanistan   2000
#&gt; 40          Afghanistan   2000
#&gt; 41          Afghanistan   2000
#&gt; 42          Afghanistan   2000
#&gt; 43          Afghanistan   2000
#&gt; 44          Afghanistan   2000
#&gt; 45          Afghanistan   2000
#&gt; 46          Afghanistan   2000
#&gt; 47          Afghanistan   2010
#&gt; 48          Afghanistan   2010
#&gt; 49          Afghanistan   2010
#&gt; 50          Afghanistan   2010
#&gt; 51          Afghanistan   2010
#&gt; 52          Afghanistan   2010
#&gt; 53          Afghanistan   2010
#&gt; 54          Afghanistan   2010
#&gt; 55          Afghanistan   2010
#&gt; 56          Afghanistan   2020
#&gt; 57          Afghanistan   2020
#&gt; 58          Afghanistan   2020
#&gt; 59          Afghanistan   2020
#&gt; 60              Albania   1960
#&gt; 61              Albania   1960
#&gt; 62              Albania   1960
#&gt; 63              Albania   1960
#&gt; 64              Albania   1960
#&gt; 65              Albania   1960
#&gt; 66              Albania   1970
#&gt; 67              Albania   1970
#&gt; 68              Albania   1970
#&gt; 69              Albania   1970
#&gt; 70              Albania   1970
#&gt; 71              Albania   1970
#&gt; 72              Albania   1970
#&gt; 73              Albania   1970
#&gt; 74              Albania   1970
#&gt; 75              Albania   1980
#&gt; 76              Albania   1980
#&gt; 77              Albania   1980
#&gt; 78              Albania   1980
#&gt; 79              Albania   1980
#&gt; 80              Albania   1980
#&gt; 81              Albania   1980
#&gt; 82              Albania   1980
#&gt; 83              Albania   1980
#&gt; 84              Albania   1980
#&gt; 85              Albania   1980
#&gt; 86              Albania   1990
#&gt; 87              Albania   1990
#&gt; 88              Albania   1990
#&gt; 89              Albania   1990
#&gt; 90              Albania   1990
#&gt; 91              Albania   1990
#&gt; 92              Albania   1990
#&gt; 93              Albania   1990
#&gt; 94              Albania   1990
#&gt; 95              Albania   2000
#&gt; 96              Albania   2000
#&gt; 97              Albania   2000
#&gt; 98              Albania   2000
#&gt; 99              Albania   2000
#&gt; 100             Albania   2000
#&gt; 101             Albania   2000
#&gt; 102             Albania   2000
#&gt; 103             Albania   2000
#&gt; 104             Albania   2000
#&gt; 105             Albania   2000
#&gt; 106             Albania   2010
#&gt; 107             Albania   2010
#&gt; 108             Albania   2010
#&gt; 109             Albania   2010
#&gt; 110             Albania   2010
#&gt; 111             Albania   2010
#&gt; 112             Albania   2010
#&gt; 113             Albania   2010
#&gt; 114             Albania   2010
#&gt; 115             Albania   2020
#&gt; 116             Albania   2020
#&gt; 117             Albania   2020
#&gt; 118             Albania   2020
#&gt; 119             Algeria   1960
#&gt; 120             Algeria   1960
#&gt; 121             Algeria   1960
#&gt; 122             Algeria   1960
#&gt; 123             Algeria   1960
#&gt; 124             Algeria   1960
#&gt; 125             Algeria   1970
#&gt; 126             Algeria   1970
#&gt; 127             Algeria   1970
#&gt; 128             Algeria   1970
#&gt; 129             Algeria   1970
#&gt; 130             Algeria   1970
#&gt; 131             Algeria   1970
#&gt; 132             Algeria   1970
#&gt; 133             Algeria   1970
#&gt; 134             Algeria   1980
#&gt; 135             Algeria   1980
#&gt; 136             Algeria   1980
#&gt; 137             Algeria   1980
#&gt; 138             Algeria   1980
#&gt; 139             Algeria   1980
#&gt; 140             Algeria   1980
#&gt; 141             Algeria   1980
#&gt; 142             Algeria   1980
#&gt; 143             Algeria   1980
#&gt; 144             Algeria   1980
#&gt; 145             Algeria   1990
#&gt; 146             Algeria   1990
#&gt; 147             Algeria   1990
#&gt; 148             Algeria   1990
#&gt; 149             Algeria   1990
#&gt; 150             Algeria   1990
#&gt; 151             Algeria   1990
#&gt; 152             Algeria   1990
#&gt; 153             Algeria   1990
#&gt; 154             Algeria   2000
#&gt; 155             Algeria   2000
#&gt; 156             Algeria   2000
#&gt; 157             Algeria   2000
#&gt; 158             Algeria   2000
#&gt; 159             Algeria   2000
#&gt; 160             Algeria   2000
#&gt; 161             Algeria   2000
#&gt; 162             Algeria   2000
#&gt; 163             Algeria   2000
#&gt; 164             Algeria   2000
#&gt; 165             Algeria   2010
#&gt; 166             Algeria   2010
#&gt; 167             Algeria   2010
#&gt; 168             Algeria   2010
#&gt; 169             Algeria   2010
#&gt; 170             Algeria   2010
#&gt; 171             Algeria   2010
#&gt; 172             Algeria   2010
#&gt; 173             Algeria   2010
#&gt; 174             Algeria   2020
#&gt; 175             Algeria   2020
#&gt; 176             Algeria   2020
#&gt; 177             Algeria   2020
#&gt; 178      American Samoa   1960
#&gt; 179      American Samoa   1960
#&gt; 180      American Samoa   1960
#&gt; 181      American Samoa   1960
#&gt; 182      American Samoa   1960
#&gt; 183      American Samoa   1960
#&gt; 184      American Samoa   1970
#&gt; 185      American Samoa   1970
#&gt; 186      American Samoa   1970
#&gt; 187      American Samoa   1970
#&gt; 188      American Samoa   1970
#&gt; 189      American Samoa   1970
#&gt; 190      American Samoa   1970
#&gt; 191      American Samoa   1970
#&gt; 192      American Samoa   1970
#&gt; 193      American Samoa   1980
#&gt; 194      American Samoa   1980
#&gt; 195      American Samoa   1980
#&gt; 196      American Samoa   1980
#&gt; 197      American Samoa   1980
#&gt; 198      American Samoa   1980
#&gt; 199      American Samoa   1980
#&gt; 200      American Samoa   1980
#&gt; 201      American Samoa   1980
#&gt; 202      American Samoa   1980
#&gt; 203      American Samoa   1980
#&gt; 204      American Samoa   1990
#&gt; 205      American Samoa   1990
#&gt; 206      American Samoa   1990
#&gt; 207      American Samoa   1990
#&gt; 208      American Samoa   1990
#&gt; 209      American Samoa   1990
#&gt; 210      American Samoa   1990
#&gt; 211      American Samoa   1990
#&gt; 212      American Samoa   1990
#&gt; 213      American Samoa   2000
#&gt; 214      American Samoa   2000
#&gt; 215      American Samoa   2000
#&gt; 216      American Samoa   2000
#&gt; 217      American Samoa   2000
#&gt; 218      American Samoa   2000
#&gt; 219      American Samoa   2000
#&gt; 220      American Samoa   2000
#&gt; 221      American Samoa   2000
#&gt; 222      American Samoa   2000
#&gt; 223      American Samoa   2000
#&gt; 224      American Samoa   2010
#&gt; 225      American Samoa   2010
#&gt; 226      American Samoa   2010
#&gt; 227      American Samoa   2010
#&gt; 228      American Samoa   2010
#&gt; 229      American Samoa   2010
#&gt; 230      American Samoa   2010
#&gt; 231      American Samoa   2010
#&gt; 232      American Samoa   2010
#&gt; 233      American Samoa   2020
#&gt; 234      American Samoa   2020
#&gt; 235      American Samoa   2020
#&gt; 236      American Samoa   2020
#&gt; 237             Andorra   1960
#&gt; 238             Andorra   1960
#&gt; 239             Andorra   1960
#&gt; 240             Andorra   1960
#&gt; 241             Andorra   1960
#&gt; 242             Andorra   1960
#&gt; 243             Andorra   1970
#&gt; 244             Andorra   1970
#&gt; 245             Andorra   1970
#&gt; 246             Andorra   1970
#&gt; 247             Andorra   1970
#&gt; 248             Andorra   1970
#&gt; 249             Andorra   1970
#&gt; 250             Andorra   1970
#&gt; 251             Andorra   1970
#&gt; 252             Andorra   1980
#&gt; 253             Andorra   1980
#&gt; 254             Andorra   1980
#&gt; 255             Andorra   1980
#&gt; 256             Andorra   1980
#&gt; 257             Andorra   1980
#&gt; 258             Andorra   1980
#&gt; 259             Andorra   1980
#&gt; 260             Andorra   1980
#&gt; 261             Andorra   1980
#&gt; 262             Andorra   1980
#&gt; 263             Andorra   1990
#&gt; 264             Andorra   1990
#&gt; 265             Andorra   1990
#&gt; 266             Andorra   1990
#&gt; 267             Andorra   1990
#&gt; 268             Andorra   1990
#&gt; 269             Andorra   1990
#&gt; 270             Andorra   1990
#&gt; 271             Andorra   1990
#&gt; 272             Andorra   2000
#&gt; 273             Andorra   2000
#&gt; 274             Andorra   2000
#&gt; 275             Andorra   2000
#&gt; 276             Andorra   2000
#&gt; 277             Andorra   2000
#&gt; 278             Andorra   2000
#&gt; 279             Andorra   2000
#&gt; 280             Andorra   2000
#&gt; 281             Andorra   2000
#&gt; 282             Andorra   2000
#&gt; 283             Andorra   2010
#&gt; 284             Andorra   2010
#&gt; 285             Andorra   2010
#&gt; 286             Andorra   2010
#&gt; 287             Andorra   2010
#&gt; 288             Andorra   2010
#&gt; 289             Andorra   2010
#&gt; 290             Andorra   2010
#&gt; 291             Andorra   2010
#&gt; 292             Andorra   2020
#&gt; 293             Andorra   2020
#&gt; 294             Andorra   2020
#&gt; 295             Andorra   2020
#&gt; 296              Angola   1960
#&gt; 297              Angola   1960
#&gt; 298              Angola   1960
#&gt; 299              Angola   1960
#&gt; 300              Angola   1960
#&gt; 301              Angola   1960
#&gt; 302              Angola   1970
#&gt; 303              Angola   1970
#&gt; 304              Angola   1970
#&gt; 305              Angola   1970
#&gt; 306              Angola   1970
#&gt; 307              Angola   1970
#&gt; 308              Angola   1970
#&gt; 309              Angola   1970
#&gt; 310              Angola   1970
#&gt; 311              Angola   1980
#&gt; 312              Angola   1980
#&gt; 313              Angola   1980
#&gt; 314              Angola   1980
#&gt; 315              Angola   1980
#&gt; 316              Angola   1980
#&gt; 317              Angola   1980
#&gt; 318              Angola   1980
#&gt; 319              Angola   1980
#&gt; 320              Angola   1980
#&gt; 321              Angola   1980
#&gt; 322              Angola   1990
#&gt; 323              Angola   1990
#&gt; 324              Angola   1990
#&gt; 325              Angola   1990
#&gt; 326              Angola   1990
#&gt; 327              Angola   1990
#&gt; 328              Angola   1990
#&gt; 329              Angola   1990
#&gt; 330              Angola   1990
#&gt; 331              Angola   2000
#&gt; 332              Angola   2000
#&gt; 333              Angola   2000
#&gt; 334              Angola   2000
#&gt; 335              Angola   2000
#&gt; 336              Angola   2000
#&gt; 337              Angola   2000
#&gt; 338              Angola   2000
#&gt; 339              Angola   2000
#&gt; 340              Angola   2000
#&gt; 341              Angola   2000
#&gt; 342              Angola   2010
#&gt; 343              Angola   2010
#&gt; 344              Angola   2010
#&gt; 345              Angola   2010
#&gt; 346              Angola   2010
#&gt; 347              Angola   2010
#&gt; 348              Angola   2010
#&gt; 349              Angola   2010
#&gt; 350              Angola   2010
#&gt; 351              Angola   2020
#&gt; 352              Angola   2020
#&gt; 353              Angola   2020
#&gt; 354              Angola   2020
#&gt; 355 Antigua and Barbuda   1960
#&gt; 356 Antigua and Barbuda   1960
#&gt; 357 Antigua and Barbuda   1960
#&gt; 358 Antigua and Barbuda   1960
#&gt; 359 Antigua and Barbuda   1960
#&gt; 360 Antigua and Barbuda   1960
#&gt; 361 Antigua and Barbuda   1970
#&gt; 362 Antigua and Barbuda   1970
#&gt; 363 Antigua and Barbuda   1970
#&gt; 364 Antigua and Barbuda   1970
#&gt; 365 Antigua and Barbuda   1970
#&gt; 366 Antigua and Barbuda   1970
#&gt; 367 Antigua and Barbuda   1970
#&gt; 368 Antigua and Barbuda   1970
#&gt; 369 Antigua and Barbuda   1970
#&gt; 370 Antigua and Barbuda   1980
#&gt; 371 Antigua and Barbuda   1980
#&gt; 372 Antigua and Barbuda   1980
#&gt; 373 Antigua and Barbuda   1980
#&gt; 374 Antigua and Barbuda   1980
#&gt; 375 Antigua and Barbuda   1980
#&gt; 376 Antigua and Barbuda   1980
#&gt; 377 Antigua and Barbuda   1980
#&gt; 378 Antigua and Barbuda   1980
#&gt; 379 Antigua and Barbuda   1980
#&gt; 380 Antigua and Barbuda   1980
#&gt; 381 Antigua and Barbuda   1990
#&gt; 382 Antigua and Barbuda   1990
#&gt; 383 Antigua and Barbuda   1990
#&gt; 384 Antigua and Barbuda   1990
#&gt; 385 Antigua and Barbuda   1990
#&gt; 386 Antigua and Barbuda   1990
#&gt; 387 Antigua and Barbuda   1990
#&gt; 388 Antigua and Barbuda   1990
#&gt; 389 Antigua and Barbuda   1990
#&gt; 390 Antigua and Barbuda   2000
#&gt; 391 Antigua and Barbuda   2000
#&gt; 392 Antigua and Barbuda   2000
#&gt; 393 Antigua and Barbuda   2000
#&gt; 394 Antigua and Barbuda   2000
#&gt; 395 Antigua and Barbuda   2000
#&gt; 396 Antigua and Barbuda   2000
#&gt; 397 Antigua and Barbuda   2000
#&gt; 398 Antigua and Barbuda   2000
#&gt; 399 Antigua and Barbuda   2000
#&gt; 400 Antigua and Barbuda   2000
#&gt; 401 Antigua and Barbuda   2010
#&gt; 402 Antigua and Barbuda   2010
#&gt; 403 Antigua and Barbuda   2010
#&gt; 404 Antigua and Barbuda   2010
#&gt; 405 Antigua and Barbuda   2010
#&gt; 406 Antigua and Barbuda   2010
#&gt; 407 Antigua and Barbuda   2010
#&gt; 408 Antigua and Barbuda   2010
#&gt; 409 Antigua and Barbuda   2010
#&gt; 410 Antigua and Barbuda   2020
#&gt; 411 Antigua and Barbuda   2020
#&gt; 412 Antigua and Barbuda   2020
#&gt; 413 Antigua and Barbuda   2020
#&gt; 414           Argentina   1960
#&gt; 415           Argentina   1960
#&gt; 416           Argentina   1960
#&gt; 417           Argentina   1960
#&gt; 418           Argentina   1960
#&gt; 419           Argentina   1960
#&gt; 420           Argentina   1970
#&gt; 421           Argentina   1970
#&gt; 422           Argentina   1970
#&gt; 423           Argentina   1970
#&gt; 424           Argentina   1970
#&gt; 425           Argentina   1970
#&gt; 426           Argentina   1970
#&gt; 427           Argentina   1970
#&gt; 428           Argentina   1970
#&gt; 429           Argentina   1980
#&gt; 430           Argentina   1980
#&gt; 431           Argentina   1980
#&gt; 432           Argentina   1980
#&gt; 433           Argentina   1980
#&gt; 434           Argentina   1980
#&gt; 435           Argentina   1980
#&gt; 436           Argentina   1980
#&gt; 437           Argentina   1980
#&gt; 438           Argentina   1980
#&gt; 439           Argentina   1980
#&gt; 440           Argentina   1990
#&gt; 441           Argentina   1990
#&gt; 442           Argentina   1990
#&gt; 443           Argentina   1990
#&gt; 444           Argentina   1990
#&gt; 445           Argentina   1990
#&gt; 446           Argentina   1990
#&gt; 447           Argentina   1990
#&gt; 448           Argentina   1990
#&gt; 449           Argentina   2000
#&gt; 450           Argentina   2000
#&gt; 451           Argentina   2000
#&gt; 452           Argentina   2000
#&gt; 453           Argentina   2000
#&gt; 454           Argentina   2000
#&gt; 455           Argentina   2000
#&gt; 456           Argentina   2000
#&gt; 457           Argentina   2000
#&gt; 458           Argentina   2000
#&gt; 459           Argentina   2000
#&gt; 460           Argentina   2010
#&gt; 461           Argentina   2010
#&gt; 462           Argentina   2010
#&gt; 463           Argentina   2010
#&gt; 464           Argentina   2010
#&gt; 465           Argentina   2010
#&gt; 466           Argentina   2010
#&gt; 467           Argentina   2010
#&gt; 468           Argentina   2010
#&gt; 469           Argentina   2020
#&gt; 470           Argentina   2020
#&gt; 471           Argentina   2020
#&gt; 472           Argentina   2020
#&gt; 473             Armenia   1960
#&gt; 474             Armenia   1960
#&gt; 475             Armenia   1960
#&gt; 476             Armenia   1960
#&gt; 477             Armenia   1960
#&gt; 478             Armenia   1960
#&gt; 479             Armenia   1970
#&gt; 480             Armenia   1970
#&gt; 481             Armenia   1970
#&gt; 482             Armenia   1970
#&gt; 483             Armenia   1970
#&gt; 484             Armenia   1970
#&gt; 485             Armenia   1970
#&gt; 486             Armenia   1970
#&gt; 487             Armenia   1970
#&gt; 488             Armenia   1980
#&gt; 489             Armenia   1980
#&gt; 490             Armenia   1980
#&gt; 491             Armenia   1980
#&gt; 492             Armenia   1980
#&gt; 493             Armenia   1980
#&gt; 494             Armenia   1980
#&gt; 495             Armenia   1980
#&gt; 496             Armenia   1980
#&gt; 497             Armenia   1980
#&gt; 498             Armenia   1980
#&gt; 499             Armenia   1990
#&gt; 500             Armenia   1990
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12244 rows ]</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>                                       <span class='co'># .. but only works with collapse functions</span>

<span class='co'>## Now lets start putting things together</span>
<span class='va'>wlddev</span><span class='op'>[[</span><span class='st'>"weights"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='AA2-small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Adding some weights</span>

<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>            <span class='co'># Fast aggregation using the mean</span>
</div><div class='output co'>#&gt;                        region              income      PCGDP   LIFEEX     GINI
#&gt; 1         East Asia &amp; Pacific         High income 31866.6810 78.07547 32.94000
#&gt; 2         East Asia &amp; Pacific Lower middle income  1782.6410 65.17163 36.21081
#&gt; 3         East Asia &amp; Pacific Upper middle income  4458.8571 71.33153 41.67500
#&gt; 4       Europe &amp; Central Asia         High income 40560.6371 77.30871 30.90235
#&gt; 5       Europe &amp; Central Asia          Low income   661.1513 66.86819 32.13333
#&gt; 6       Europe &amp; Central Asia Lower middle income  1850.9824 69.18382 32.69570
#&gt; 7       Europe &amp; Central Asia Upper middle income  5231.0715 71.08087 33.90625
#&gt; 8  Latin America &amp; Caribbean          High income 16426.6020 74.91948 49.12000
#&gt; 9  Latin America &amp; Caribbean           Low income   737.0503 59.02200 41.10000
#&gt; 10 Latin America &amp; Caribbean  Lower middle income  1965.5373 68.57454 51.51143
#&gt; 11 Latin America &amp; Caribbean  Upper middle income  5870.6660 71.89291 50.66230
#&gt; 12 Middle East &amp; North Africa         High income 31398.9987 75.54077 33.54706
#&gt; 13 Middle East &amp; North Africa          Low income  1088.7487 66.91619 35.55000
#&gt; 14 Middle East &amp; North Africa Lower middle income  2541.7426 68.57516 36.17692
#&gt; 15 Middle East &amp; North Africa Upper middle income  5228.5917 71.75665 36.86667
#&gt; 16              North America         High income 55086.1795 78.71931 36.64444
#&gt; 17                 South Asia          Low income   503.1645 60.70458 37.26667
#&gt; 18                 South Asia Lower middle income  1315.1017 65.87640 34.36667
#&gt; 19                 South Asia Upper middle income  6638.3501 71.58415 39.85000
#&gt; 20        Sub-Saharan Africa          High income 10246.8093 72.36520 46.80000
#&gt; 21        Sub-Saharan Africa           Low income   568.9048 53.35532 42.52935
#&gt; 22        Sub-Saharan Africa  Lower middle income  1685.7934 56.06081 45.84906
#&gt; 23        Sub-Saharan Africa  Upper middle income  7270.3062 59.93970 56.06471
#&gt;           ODA
#&gt; 1   104154478
#&gt; 2   506935071
#&gt; 3   229342181
#&gt; 4   338714013
#&gt; 5   236933846
#&gt; 6   375904326
#&gt; 7   459851651
#&gt; 8    37620886
#&gt; 9   747640000
#&gt; 10  582499907
#&gt; 11  172234094
#&gt; 12  214848130
#&gt; 13 1035321667
#&gt; 14 1078823534
#&gt; 15  853199136
#&gt; 16   -3408571
#&gt; 17 1669691296
#&gt; 18 1315631111
#&gt; 19   39431481
#&gt; 20   21782963
#&gt; 21  700062302
#&gt; 22  658863783
#&gt; 23  216080750</div><div class='input'>
<span class='co'># Same thing using dplyr manipulation verbs</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>region</span>,<span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fmean</span>       <span class='co'># This is already a lot faster than summarize_all(mean)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 23 x 6</span><span>
#&gt;    region                      income               PCGDP LIFEEX  GINI       ODA
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                       </span><span style='color: #949494;font-style: italic;'>&lt;fct&gt;</span><span>                </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       High income         </span><span style='text-decoration: underline;'>31</span><span>867.   78.1  32.9    1.04</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>783.   65.2  36.2    5.07</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> </span><span style='color: #949494;'>"</span><span>East Asia &amp; Pacific</span><span style='color: #949494;'>"</span><span>       Upper middle income  </span><span style='text-decoration: underline;'>4</span><span>459.   71.3  41.7    2.29</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     High income         </span><span style='text-decoration: underline;'>40</span><span>561.   77.3  30.9    3.39</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Low income            661.   66.9  32.1    2.37</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>851.   69.2  32.7    3.76</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> </span><span style='color: #949494;'>"</span><span>Europe &amp; Central Asia</span><span style='color: #949494;'>"</span><span>     Upper middle income  </span><span style='text-decoration: underline;'>5</span><span>231.   71.1  33.9    4.60</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ High income         </span><span style='text-decoration: underline;'>16</span><span>427.   74.9  49.1    3.76</span><span style='color: #949494;'>e</span><span>7
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ Low income            737.   59.0  41.1    7.48</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> </span><span style='color: #949494;'>"</span><span>Latin America &amp; Caribbean~ Lower middle income  </span><span style='text-decoration: underline;'>1</span><span>966.   68.6  51.5    5.82</span><span style='color: #949494;'>e</span><span>8
#&gt; </span><span style='color: #949494;'># ... with 13 more rows</span><span></div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span>   <span class='co'># Weighted group means</span>
</div><div class='output co'>#&gt;                        region              income sum.weights      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   287.76403 32743.2651
#&gt; 2         East Asia &amp; Pacific Lower middle income   295.43311  1796.6320
#&gt; 3         East Asia &amp; Pacific Upper middle income   217.03669  4531.9885
#&gt; 4       Europe &amp; Central Asia         High income   839.92824 40258.8493
#&gt; 5       Europe &amp; Central Asia          Low income    22.52740   626.2323
#&gt; 6       Europe &amp; Central Asia Lower middle income   142.26111  1841.4328
#&gt; 7       Europe &amp; Central Asia Upper middle income   320.80238  5259.7397
#&gt; 8  Latin America &amp; Caribbean          High income   380.26153 16178.0080
#&gt; 9  Latin America &amp; Caribbean           Low income    24.23769   728.2127
#&gt; 10 Latin America &amp; Caribbean  Lower middle income    93.70193  1977.2107
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   413.60707  5874.5604
#&gt; 12 Middle East &amp; North Africa         High income   185.57306 31987.4891
#&gt; 13 Middle East &amp; North Africa          Low income    46.78847  1092.9992
#&gt; 14 Middle East &amp; North Africa Lower middle income    99.13238  2548.1057
#&gt; 15 Middle East &amp; North Africa Upper middle income   140.71972  5040.1577
#&gt; 16              North America         High income    63.09128 55891.1630
#&gt; 17                 South Asia          Low income    42.72684   507.1126
#&gt; 18                 South Asia Lower middle income   104.86810  1365.7325
#&gt; 19                 South Asia Upper middle income    20.39399  6443.1097
#&gt; 20        Sub-Saharan Africa          High income    28.53557 10286.4982
#&gt; 21        Sub-Saharan Africa           Low income   631.87812   569.0501
#&gt; 22        Sub-Saharan Africa  Lower middle income   299.56806  1681.6659
#&gt; 23        Sub-Saharan Africa  Upper middle income   134.71368  7127.8458
#&gt;      LIFEEX     GINI        ODA
#&gt; 1  78.31701 33.03949  107074860
#&gt; 2  65.48023 35.85009  511636291
#&gt; 3  71.47455 41.47544  247100196
#&gt; 4  77.15533 30.89098  329864819
#&gt; 5  66.77549 32.42474  238206800
#&gt; 6  69.22716 32.65537  363312750
#&gt; 7  70.95173 33.71256  448924291
#&gt; 8  74.78237 49.04808   41687978
#&gt; 9  59.73177 41.10000  819957677
#&gt; 10 68.16696 51.42877  597461160
#&gt; 11 71.93194 50.35660  196350491
#&gt; 12 75.63028 34.82039  182711617
#&gt; 13 67.15980 35.70284  976928722
#&gt; 14 68.73224 36.83941 1124135238
#&gt; 15 71.74578 37.84427  721934773
#&gt; 16 78.69571 36.00413   -5078988
#&gt; 17 60.82376 36.40156 1647962910
#&gt; 18 66.16395 35.09634 1360599683
#&gt; 19 71.39912 39.50038   39589210
#&gt; 20 72.39720 46.80000   22897992
#&gt; 21 53.31436 42.40381  737762377
#&gt; 22 56.01145 45.08609  618172700
#&gt; 23 59.89656 53.68276  205440239</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span>     <span class='co'># Weighted group standard deviations</span>
</div><div class='output co'>#&gt;                        region              income sum.weights       PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   287.76403 12525.21108
#&gt; 2         East Asia &amp; Pacific Lower middle income   295.43311   887.90437
#&gt; 3         East Asia &amp; Pacific Upper middle income   217.03669  2517.93272
#&gt; 4       Europe &amp; Central Asia         High income   839.92824 29486.92137
#&gt; 5       Europe &amp; Central Asia          Low income    22.52740   201.78475
#&gt; 6       Europe &amp; Central Asia Lower middle income   142.26111  1014.21011
#&gt; 7       Europe &amp; Central Asia Upper middle income   320.80238  2745.55983
#&gt; 8  Latin America &amp; Caribbean          High income   380.26153  8233.96336
#&gt; 9  Latin America &amp; Caribbean           Low income    24.23769    46.10025
#&gt; 10 Latin America &amp; Caribbean  Lower middle income    93.70193   574.61201
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   413.60707  2508.94614
#&gt; 12 Middle East &amp; North Africa         High income   185.57306 17008.51586
#&gt; 13 Middle East &amp; North Africa          Low income    46.78847   140.07478
#&gt; 14 Middle East &amp; North Africa Lower middle income    99.13238   701.12417
#&gt; 15 Middle East &amp; North Africa Upper middle income   140.71972  2223.57381
#&gt; 16              North America         High income    63.09128 17985.92706
#&gt; 17                 South Asia          Low income    42.72684   107.01772
#&gt; 18                 South Asia Lower middle income   104.86810   779.13968
#&gt; 19                 South Asia Upper middle income    20.39399  1223.39782
#&gt; 20        Sub-Saharan Africa          High income    28.53557  1791.18790
#&gt; 21        Sub-Saharan Africa           Low income   631.87812   286.54987
#&gt; 22        Sub-Saharan Africa  Lower middle income   299.56806   898.57604
#&gt; 23        Sub-Saharan Africa  Upper middle income   134.71368  3372.73485
#&gt;      LIFEEX      GINI        ODA
#&gt; 1  3.545457  1.184109  201109580
#&gt; 2  4.968457  4.001429  742230507
#&gt; 3  2.773214  3.350291  665470621
#&gt; 4  3.708472  3.540719  653565256
#&gt; 5  2.765987  1.393634  112184995
#&gt; 6  1.926577  5.126744  238897594
#&gt; 7  3.643572  5.245196  648481643
#&gt; 8  2.640494  5.581624   73265913
#&gt; 9  2.509609  0.000000  553878604
#&gt; 10 4.872972  5.409739  258981983
#&gt; 11 3.438102  4.457039  309247376
#&gt; 12 3.068881  6.168701  481746916
#&gt; 13 5.634555        NA 2033422097
#&gt; 14 5.589966  4.433593 1237416290
#&gt; 15 2.884442  5.172433 1633825122
#&gt; 16 1.675303  4.171737    6189019
#&gt; 17 5.666720  5.904530 1954629098
#&gt; 18 4.941238  4.218146 1082391888
#&gt; 19 4.898805        NA   18478969
#&gt; 20 1.187320  0.000000   15840180
#&gt; 21 6.276075  6.633283  763236348
#&gt; 22 7.162929  7.411175  762546105
#&gt; 23 6.967325 12.345667  286070395</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
   <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.75</span>, <span class='va'>weights</span><span class='op'>)</span>                           <span class='co'># Weighted group third quartile</span>
</div><div class='output co'>#&gt;                        region              income sum.weights      PCGDP
#&gt; 1         East Asia &amp; Pacific         High income   595.32444 36832.2662
#&gt; 2         East Asia &amp; Pacific Lower middle income   609.56769  2294.3703
#&gt; 3         East Asia &amp; Pacific Upper middle income   474.61644  3708.1950
#&gt; 4       Europe &amp; Central Asia         High income  1755.22112 42859.3294
#&gt; 5       Europe &amp; Central Asia          Low income    48.93099  1166.5070
#&gt; 6       Europe &amp; Central Asia Lower middle income   292.93341  2975.1685
#&gt; 7       Europe &amp; Central Asia Upper middle income   678.39724  6404.0238
#&gt; 8  Latin America &amp; Caribbean          High income   813.53027 16533.6539
#&gt; 9  Latin America &amp; Caribbean           Low income    44.22814   969.0085
#&gt; 10 Latin America &amp; Caribbean  Lower middle income   196.00408  2210.5873
#&gt; 11 Latin America &amp; Caribbean  Upper middle income   886.34951  6331.4787
#&gt; 12 Middle East &amp; North Africa         High income   390.10940 35792.7098
#&gt; 13 Middle East &amp; North Africa          Low income    93.38460  1219.0075
#&gt; 14 Middle East &amp; North Africa Lower middle income   223.32809  2524.3813
#&gt; 15 Middle East &amp; North Africa Upper middle income   285.51248  5572.9057
#&gt; 16              North America         High income   130.74013 50221.8420
#&gt; 17                 South Asia          Low income    94.75896   536.0125
#&gt; 18                 South Asia Lower middle income   237.99837  1106.8374
#&gt; 19                 South Asia Upper middle income    47.01473  7537.6368
#&gt; 20        Sub-Saharan Africa          High income    51.76645  9790.2708
#&gt; 21        Sub-Saharan Africa           Low income  1306.02718   638.7490
#&gt; 22        Sub-Saharan Africa  Lower middle income   636.10627  1833.9899
#&gt; 23        Sub-Saharan Africa  Upper middle income   270.54127  7523.2795
#&gt;      LIFEEX GINI        ODA
#&gt; 1  78.16829 33.5  221820000
#&gt; 2  65.78000 37.0  599060000
#&gt; 3  70.84100 43.5  168760000
#&gt; 4  77.63902 33.6  203580000
#&gt; 5  66.72700 33.6  306490000
#&gt; 6  69.90563 36.9  453920000
#&gt; 7  71.76829 37.4  558080000
#&gt; 8  74.87200 54.7   69650000
#&gt; 9  60.44800 41.1  901110000
#&gt; 10 68.54100 56.1  647930000
#&gt; 11 72.05200 54.2  231690000
#&gt; 12 75.28300 41.0  123860000
#&gt; 13 70.20700 36.7 1254970000
#&gt; 14 70.54000 40.7 1362250000
#&gt; 15 71.38600 43.4  576580000
#&gt; 16 78.69024 40.4     360000
#&gt; 17 59.69400 43.8  585540000
#&gt; 18 66.48100 38.8 2585260000
#&gt; 19 69.93600 41.3   33700000
#&gt; 20 72.77805 46.8   36160000
#&gt; 21 53.67500 45.6  647980000
#&gt; 22 58.05000 52.0  549990000
#&gt; 23 61.93495 63.0  180650000</div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='va'>fwithin</span>                                          <span class='co'># Within transformation</span>
</div><div class='output co'>#&gt;            PCGDP      LIFEEX       GINI         ODA
#&gt; 1             NA -15.5901579         NA -1236633448
#&gt; 2             NA -15.1401579         NA -1117723448
#&gt; 3             NA -14.6971579         NA -1236193448
#&gt; 4             NA -14.2581579         NA -1114623448
#&gt; 5             NA -13.8221579         NA -1048593448
#&gt; 6             NA -13.3871579         NA  -980823448
#&gt; 7             NA -12.9541579         NA -1012803448
#&gt; 8             NA -12.5211579         NA -1091843448
#&gt; 9             NA -12.0861579         NA -1169073448
#&gt; 10            NA -11.6481579         NA -1188393448
#&gt; 11            NA -11.2041579         NA -1195323448
#&gt; 12            NA -10.7541579         NA -1121923448
#&gt; 13            NA -10.2951579         NA -1086323448
#&gt; 14            NA  -9.8261579         NA -1111513448
#&gt; 15            NA  -9.3421579         NA -1158533448
#&gt; 16            NA  -8.8431579         NA -1111363448
#&gt; 17            NA  -8.3261579         NA -1110723448
#&gt; 18            NA  -7.7901579         NA -1084603448
#&gt; 19            NA  -7.2321579         NA -1128203448
#&gt; 20            NA  -6.6481579         NA -1098703448
#&gt; 21            NA  -6.0291579         NA -1278463448
#&gt; 22            NA  -5.3691579         NA -1297453448
#&gt; 23            NA  -4.6651579         NA -1328413448
#&gt; 24            NA  -3.9191579         NA -1317423448
#&gt; 25            NA  -3.1351579         NA -1334323448
#&gt; 26            NA  -2.3161579         NA -1311183448
#&gt; 27            NA  -1.4651579         NA -1346873448
#&gt; 28            NA  -0.5941579         NA -1270333448
#&gt; 29            NA   0.2818421         NA -1231533448
#&gt; 30            NA   1.1458421         NA -1112573448
#&gt; 31            NA   1.9738421         NA -1167823448
#&gt; 32            NA   2.7448421         NA  -642433448
#&gt; 33            NA   3.4488421         NA -1067373448
#&gt; 34            NA   4.0858421         NA -1037753448
#&gt; 35            NA   4.6568421         NA -1041313448
#&gt; 36            NA   5.1728421         NA -1097863448
#&gt; 37            NA   5.6508421         NA -1147083448
#&gt; 38            NA   6.1148421         NA -1044873448
#&gt; 39            NA   6.5858421         NA -1129893448
#&gt; 40            NA   7.0768421         NA -1155083448
#&gt; 41            NA   7.5998421         NA -1149813448
#&gt; 42            NA   8.1618421         NA  -720533448
#&gt; 43   -142.529770   8.7548421         NA   445986552
#&gt; 44   -129.919156   9.3678421         NA   577126552
#&gt; 45   -140.550653   9.9928421         NA  1241686552
#&gt; 46   -116.614375  10.6178421         NA  1815406552
#&gt; 47   -109.266374  11.2278421         NA  1850486552
#&gt; 48    -69.243524  11.8118421         NA  3682876552
#&gt; 49    -63.684293  12.3608421         NA  3403636552
#&gt; 50     12.945819  12.8718421         NA  4914006552
#&gt; 51     68.351865  13.3438421         NA  5006206552
#&gt; 52     53.849377  13.7838421         NA  5083026552
#&gt; 53    102.744267  14.2038421         NA  4882896552
#&gt; 54    115.362115  14.6118421         NA  3447196552
#&gt; 55    112.411001  15.0128421         NA  3252606552
#&gt; 56    103.545179  15.4058421         NA  2920286552
#&gt; 57    100.891998  15.7908421         NA  2718136552
#&gt; 58    101.706525          NA         NA  2392766552
#&gt; 59            NA          NA         NA          NA
#&gt; 60            NA  -9.0615614         NA          NA
#&gt; 61            NA  -8.0425614         NA          NA
#&gt; 62            NA  -7.1535614         NA          NA
#&gt; 63            NA  -6.4295614         NA          NA
#&gt; 64            NA  -5.8795614         NA          NA
#&gt; 65            NA  -5.4925614         NA          NA
#&gt; 66            NA  -5.2325614         NA          NA
#&gt; 67            NA  -5.0385614         NA          NA
#&gt; 68            NA  -4.8555614         NA          NA
#&gt; 69            NA  -4.6535614         NA          NA
#&gt; 70            NA  -4.4075614         NA          NA
#&gt; 71            NA  -4.1055614         NA          NA
#&gt; 72            NA  -3.7605614         NA          NA
#&gt; 73            NA  -3.3895614         NA          NA
#&gt; 74            NA  -2.9995614         NA          NA
#&gt; 75            NA  -2.6065614         NA          NA
#&gt; 76            NA  -2.2325614         NA          NA
#&gt; 77            NA  -1.8935614         NA          NA
#&gt; 78            NA  -1.5995614         NA          NA
#&gt; 79            NA  -1.3505614         NA          NA
#&gt; 80   -673.036434  -1.1335614         NA          NA
#&gt; 81   -598.708988  -0.9245614         NA          NA
#&gt; 82   -581.905222  -0.7055614         NA          NA
#&gt; 83   -603.545353  -0.4645614         NA          NA
#&gt; 84   -673.221544  -0.2065614         NA          NA
#&gt; 85   -679.140790   0.0474386         NA          NA
#&gt; 86   -605.726474   0.2644386         NA          NA
#&gt; 87   -663.587773   0.4194386         NA          NA
#&gt; 88   -730.357619   0.5024386         NA  -291757000
#&gt; 89   -593.283742   0.5194386         NA  -283707000
#&gt; 90   -830.117751   0.4954386         NA  -285317000
#&gt; 91  -1378.399311   0.4624386         NA   127423000
#&gt; 92  -1466.768480   0.4614386         NA   226573000
#&gt; 93  -1339.062490   0.5194386         NA    76283000
#&gt; 94  -1216.117939   0.6514386         NA   -90907000
#&gt; 95  -1006.921935   0.8644386         NA   -88397000
#&gt; 96   -840.342268   1.1544386 -2.6600000   -27257000
#&gt; 97  -1034.076251   1.4974386         NA   -84707000
#&gt; 98   -874.562369   1.8674386         NA    52073000
#&gt; 99   -624.787944   2.2474386         NA   354753000
#&gt; 100  -465.594255   2.6144386         NA   158303000
#&gt; 101  -256.601627   2.9454386         NA    95533000
#&gt; 102  -137.506890   3.2344386  2.0400000   125523000
#&gt; 103    14.937654   3.4794386         NA   113813000
#&gt; 104   177.132200   3.6874386         NA    30123000
#&gt; 105   352.433413   3.8764386  0.9400000    33213000
#&gt; 106   553.653309   4.0774386         NA    34953000
#&gt; 107   775.068537   4.3154386         NA   -13187000
#&gt; 108  1065.320618   4.6024386  0.3400000    14683000
#&gt; 109  1218.183052   4.9404386         NA    16153000
#&gt; 110  1384.201113   5.3114386         NA    30343000
#&gt; 111  1499.917914   5.6904386         NA    21583000
#&gt; 112  1566.758552   6.0484386 -0.6600000    12783000
#&gt; 113  1617.449141   6.3614386         NA   -61847000
#&gt; 114  1703.176031   6.6224386         NA   -53097000
#&gt; 115  1814.308417   6.8334386         NA    33183000
#&gt; 116  1973.360125   7.0044386         NA  -131707000
#&gt; 117  2157.473374          NA         NA  -145407000
#&gt; 118           NA          NA         NA          NA
#&gt; 119 -1008.281840 -16.5828421         NA  2381181724
#&gt; 120 -1396.098145 -16.1248421         NA  2961501724
#&gt; 121 -1845.931353 -15.6668421         NA  2420971724
#&gt; 122 -1341.001471 -15.2138421         NA  1440061724
#&gt; 123 -1273.506202 -14.7648421         NA   979801724
#&gt; 124 -1198.173080 -14.3288421         NA   410251724
#&gt; 125 -1366.519687 -13.9118421         NA   240261724
#&gt; 126 -1231.869661 -13.5128421         NA   111351724
#&gt; 127 -1060.303383 -13.1258421         NA   164071724
#&gt; 128  -930.756813 -12.7408421         NA   218811724
#&gt; 129  -782.517761 -12.3518421         NA   159221724
#&gt; 130 -1152.969676 -11.9508421         NA   125991724
#&gt; 131  -596.574813 -11.5228421         NA   -34568276
#&gt; 132  -567.619576 -11.0478421         NA   -57848276
#&gt; 133  -434.899507 -10.5058421         NA   -87058276
#&gt; 134  -369.826505  -9.8578421         NA   193571724
#&gt; 135  -203.639722  -9.0628421         NA  -126488276
#&gt; 136  -128.942061  -8.1148421         NA  -205538276
#&gt; 137    74.579987  -7.0248421         NA  -107278276
#&gt; 138   228.457372  -5.8148421         NA  -347118276
#&gt; 139   146.383460  -4.5248421         NA  -167158276
#&gt; 140   141.696235  -3.1998421         NA  -178428276
#&gt; 141   254.937100  -1.8978421         NA  -235728276
#&gt; 142   335.483686  -0.6738421         NA  -355358276
#&gt; 143   426.530402   0.4351579         NA  -245788276
#&gt; 144   450.389193   1.3921579         NA  -104428276
#&gt; 145   351.583940   2.1751579         NA  -248398276
#&gt; 146   217.327478   2.8041579         NA  -226918276
#&gt; 147    80.302663   3.3041579  5.8333333  -313598276
#&gt; 148   138.826516   3.6951579         NA  -327128276
#&gt; 149    75.712594   4.0041579         NA  -140248276
#&gt; 150   -51.681460   4.2621579         NA  -309998276
#&gt; 151   -70.416626   4.5051579         NA  -128028276
#&gt; 152  -214.476398   4.7611579         NA  -152478276
#&gt; 153  -309.421501   5.0531579         NA  -197758276
#&gt; 154  -250.762517   5.3941579  0.9333333  -246468276
#&gt; 155  -176.456703   5.7831579         NA  -229938276
#&gt; 156  -193.217939   6.2051579         NA  -264338276
#&gt; 157   -76.909880   6.6461579         NA   -37448276
#&gt; 158   -17.183031   7.1011579         NA  -398898276
#&gt; 159    66.751959   7.5711579         NA  -291538276
#&gt; 160   126.117176   8.0571579         NA  -281128276
#&gt; 161   280.196197   8.5551579         NA  -317858276
#&gt; 162   499.854954   9.0591579         NA  -302578276
#&gt; 163   616.824157   9.5601579         NA  -251168276
#&gt; 164   798.992674  10.0461579         NA  -227178276
#&gt; 165   808.008153  10.5041579         NA  -346658276
#&gt; 166   885.055670  10.9271579         NA  -232748276
#&gt; 167   916.179555  11.3111579         NA  -314518276
#&gt; 168   911.718818  11.6531579         NA  -322758276
#&gt; 169   989.074597  11.9551579         NA  -403868276
#&gt; 170  1030.600020  12.2231579 -6.7666667  -418968276
#&gt; 171  1090.114939  12.4661579         NA  -450558276
#&gt; 172  1121.899550  12.6971579         NA  -404018276
#&gt; 173  1201.564947  12.9201579         NA  -445908276
#&gt; 174  1285.275164  13.1391579         NA  -496598276
#&gt; 175  1353.404174  13.3571579         NA  -425958276
#&gt; 176  1346.113986          NA         NA  -398608276
#&gt; 177           NA          NA         NA          NA
#&gt; 178           NA          NA         NA          NA
#&gt; 179           NA          NA         NA          NA
#&gt; 180           NA          NA         NA          NA
#&gt; 181           NA          NA         NA          NA
#&gt; 182           NA          NA         NA          NA
#&gt; 183           NA          NA         NA          NA
#&gt; 184           NA          NA         NA          NA
#&gt; 185           NA          NA         NA          NA
#&gt; 186           NA          NA         NA          NA
#&gt; 187           NA          NA         NA          NA
#&gt; 188           NA          NA         NA          NA
#&gt; 189           NA          NA         NA          NA
#&gt; 190           NA          NA         NA          NA
#&gt; 191           NA          NA         NA          NA
#&gt; 192           NA          NA         NA          NA
#&gt; 193           NA          NA         NA          NA
#&gt; 194           NA          NA         NA          NA
#&gt; 195           NA          NA         NA          NA
#&gt; 196           NA          NA         NA          NA
#&gt; 197           NA          NA         NA          NA
#&gt; 198           NA          NA         NA          NA
#&gt; 199           NA          NA         NA          NA
#&gt; 200           NA          NA         NA          NA
#&gt; 201           NA          NA         NA          NA
#&gt; 202           NA          NA         NA          NA
#&gt; 203           NA          NA         NA          NA
#&gt; 204           NA          NA         NA          NA
#&gt; 205           NA          NA         NA          NA
#&gt; 206           NA          NA         NA          NA
#&gt; 207           NA          NA         NA          NA
#&gt; 208           NA          NA         NA          NA
#&gt; 209           NA          NA         NA          NA
#&gt; 210           NA          NA         NA          NA
#&gt; 211           NA          NA         NA          NA
#&gt; 212           NA          NA         NA          NA
#&gt; 213           NA          NA         NA          NA
#&gt; 214           NA          NA         NA          NA
#&gt; 215           NA          NA         NA          NA
#&gt; 216           NA          NA         NA          NA
#&gt; 217           NA          NA         NA          NA
#&gt; 218           NA          NA         NA          NA
#&gt; 219           NA          NA         NA          NA
#&gt; 220   424.696008          NA         NA          NA
#&gt; 221   441.238120          NA         NA          NA
#&gt; 222   471.958004          NA         NA          NA
#&gt; 223   455.365535          NA         NA          NA
#&gt; 224    93.241061          NA         NA          NA
#&gt; 225   430.398113          NA         NA          NA
#&gt; 226   311.170305          NA         NA          NA
#&gt; 227     9.844616          NA         NA          NA
#&gt; 228   163.607228          NA         NA          NA
#&gt; 229   253.510966          NA         NA          NA
#&gt; 230  -188.904460          NA         NA          NA
#&gt; 231  -478.102817          NA         NA          NA
#&gt; 232  -409.332047          NA         NA          NA
#&gt; 233  -305.103668          NA         NA          NA
#&gt; 234  -574.742862          NA         NA          NA
#&gt; 235 -1098.844102          NA         NA          NA
#&gt; 236           NA          NA         NA          NA
#&gt; 237           NA          NA         NA          NA
#&gt; 238           NA          NA         NA          NA
#&gt; 239           NA          NA         NA          NA
#&gt; 240           NA          NA         NA          NA
#&gt; 241           NA          NA         NA          NA
#&gt; 242           NA          NA         NA          NA
#&gt; 243           NA          NA         NA          NA
#&gt; 244           NA          NA         NA          NA
#&gt; 245           NA          NA         NA          NA
#&gt; 246           NA          NA         NA          NA
#&gt; 247  2066.055455          NA         NA          NA
#&gt; 248  1811.677672          NA         NA          NA
#&gt; 249  2979.759635          NA         NA          NA
#&gt; 250  4130.264537          NA         NA          NA
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12494 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span>TRA <span class='op'>=</span> <span class='st'>"-"</span><span class='op'>)</span>                               <span class='co'># Grouped centering using the median</span>
</div><div class='output co'>#&gt;             PCGDP  LIFEEX GINI        ODA
#&gt; 1              NA -15.872   NA -138350000
#&gt; 2              NA -15.422   NA  -19440000
#&gt; 3              NA -14.979   NA -137910000
#&gt; 4              NA -14.540   NA  -16340000
#&gt; 5              NA -14.104   NA   49690000
#&gt; 6              NA -13.669   NA  117460000
#&gt; 7              NA -13.236   NA   85480000
#&gt; 8              NA -12.803   NA    6440000
#&gt; 9              NA -12.368   NA  -70790000
#&gt; 10             NA -11.930   NA  -90110000
#&gt; 11             NA -11.486   NA  -97040000
#&gt; 12             NA -11.036   NA  -23640000
#&gt; 13             NA -10.577   NA   11960000
#&gt; 14             NA -10.108   NA  -13230000
#&gt; 15             NA  -9.624   NA  -60250000
#&gt; 16             NA  -9.125   NA  -13080000
#&gt; 17             NA  -8.608   NA  -12440000
#&gt; 18             NA  -8.072   NA   13680000
#&gt; 19             NA  -7.514   NA  -29920000
#&gt; 20             NA  -6.930   NA    -420000
#&gt; 21             NA  -6.311   NA -180180000
#&gt; 22             NA  -5.651   NA -199170000
#&gt; 23             NA  -4.947   NA -230130000
#&gt; 24             NA  -4.201   NA -219140000
#&gt; 25             NA  -3.417   NA -236040000
#&gt; 26             NA  -2.598   NA -212900000
#&gt; 27             NA  -1.747   NA -248590000
#&gt; 28             NA  -0.876   NA -172050000
#&gt; 29             NA   0.000   NA -133250000
#&gt; 30             NA   0.864   NA  -14290000
#&gt; 31             NA   1.692   NA  -69540000
#&gt; 32             NA   2.463   NA  455850000
#&gt; 33             NA   3.167   NA   30910000
#&gt; 34             NA   3.804   NA   60530000
#&gt; 35             NA   4.375   NA   56970000
#&gt; 36             NA   4.891   NA     420000
#&gt; 37             NA   5.369   NA  -48800000
#&gt; 38             NA   5.833   NA   53410000
#&gt; 39             NA   6.304   NA  -31610000
#&gt; 40             NA   6.795   NA  -56800000
#&gt; 41             NA   7.318   NA  -51530000
#&gt; 42             NA   7.880   NA  377750000
#&gt; 43   -175.9273686   8.473   NA 1544270000
#&gt; 44   -163.3167541   9.086   NA 1675410000
#&gt; 45   -173.9482508   9.711   NA 2339970000
#&gt; 46   -150.0119735  10.336   NA 2913690000
#&gt; 47   -142.6639725  10.946   NA 2948770000
#&gt; 48   -102.6411221  11.530   NA 4781160000
#&gt; 49    -97.0818913  12.079   NA 4501920000
#&gt; 50    -20.4517786  12.590   NA 6012290000
#&gt; 51     34.9542669  13.062   NA 6104490000
#&gt; 52     20.4517786  13.502   NA 6181310000
#&gt; 53     69.3466686  13.922   NA 5981180000
#&gt; 54     81.9645166  14.330   NA 4545480000
#&gt; 55     79.0134026  14.731   NA 4350890000
#&gt; 56     70.1475813  15.124   NA 4018570000
#&gt; 57     67.4944003  15.509   NA 3816420000
#&gt; 58     68.3089273      NA   NA 3491050000
#&gt; 59             NA      NA   NA         NA
#&gt; 60             NA  -9.523   NA         NA
#&gt; 61             NA  -8.504   NA         NA
#&gt; 62             NA  -7.615   NA         NA
#&gt; 63             NA  -6.891   NA         NA
#&gt; 64             NA  -6.341   NA         NA
#&gt; 65             NA  -5.954   NA         NA
#&gt; 66             NA  -5.694   NA         NA
#&gt; 67             NA  -5.500   NA         NA
#&gt; 68             NA  -5.317   NA         NA
#&gt; 69             NA  -5.115   NA         NA
#&gt; 70             NA  -4.869   NA         NA
#&gt; 71             NA  -4.567   NA         NA
#&gt; 72             NA  -4.222   NA         NA
#&gt; 73             NA  -3.851   NA         NA
#&gt; 74             NA  -3.461   NA         NA
#&gt; 75             NA  -3.068   NA         NA
#&gt; 76             NA  -2.694   NA         NA
#&gt; 77             NA  -2.355   NA         NA
#&gt; 78             NA  -2.061   NA         NA
#&gt; 79             NA  -1.812   NA         NA
#&gt; 80    -85.4419521  -1.595   NA         NA
#&gt; 81    -11.1145059  -1.386   NA         NA
#&gt; 82      5.6892601  -1.167   NA         NA
#&gt; 83    -15.9508715  -0.926   NA         NA
#&gt; 84    -85.6270619  -0.668   NA         NA
#&gt; 85    -91.5463077  -0.414   NA         NA
#&gt; 86    -18.1319920  -0.197   NA         NA
#&gt; 87    -75.9932907  -0.042   NA         NA
#&gt; 88   -142.7631370   0.041   NA -310625000
#&gt; 89     -5.6892601   0.058   NA -302575000
#&gt; 90   -242.5232694   0.034   NA -304185000
#&gt; 91   -790.8048295   0.001   NA  108555000
#&gt; 92   -879.1739985   0.000   NA  207705000
#&gt; 93   -751.4680082   0.058   NA   57415000
#&gt; 94   -628.5234571   0.190   NA -109775000
#&gt; 95   -419.3274531   0.403   NA -107265000
#&gt; 96   -252.7477857   0.693 -3.0  -46125000
#&gt; 97   -446.4817691   1.036   NA -103575000
#&gt; 98   -286.9678872   1.406   NA   33205000
#&gt; 99    -37.1934618   1.786   NA  335885000
#&gt; 100   122.0002272   2.153   NA  139435000
#&gt; 101   330.9928549   2.484   NA   76665000
#&gt; 102   450.0875923   2.773  1.7  106655000
#&gt; 103   602.5321357   3.018   NA   94945000
#&gt; 104   764.7266820   3.226   NA   11255000
#&gt; 105   940.0278954   3.415  0.6   14345000
#&gt; 106  1141.2477911   3.616   NA   16085000
#&gt; 107  1362.6630192   3.854   NA  -32055000
#&gt; 108  1652.9150998   4.141  0.0   -4185000
#&gt; 109  1805.7775343   4.479   NA   -2715000
#&gt; 110  1971.7955946   4.850   NA   11475000
#&gt; 111  2087.5123960   5.229   NA    2715000
#&gt; 112  2154.3530340   5.587 -1.0   -6085000
#&gt; 113  2205.0436227   5.900   NA  -80715000
#&gt; 114  2290.7705133   6.161   NA  -71965000
#&gt; 115  2401.9028989   6.372   NA   14315000
#&gt; 116  2560.9546075   6.543   NA -150575000
#&gt; 117  2745.0678556      NA   NA -164275000
#&gt; 118            NA      NA   NA         NA
#&gt; 119 -1083.4281306 -19.887   NA 2609740000
#&gt; 120 -1471.2444357 -19.429   NA 3190060000
#&gt; 121 -1921.0776437 -18.971   NA 2649530000
#&gt; 122 -1416.1477614 -18.518   NA 1668620000
#&gt; 123 -1348.6524928 -18.069   NA 1208360000
#&gt; 124 -1273.3193703 -17.633   NA  638810000
#&gt; 125 -1441.6659777 -17.216   NA  468820000
#&gt; 126 -1307.0159518 -16.817   NA  339910000
#&gt; 127 -1135.4496731 -16.430   NA  392630000
#&gt; 128 -1005.9031033 -16.045   NA  447370000
#&gt; 129  -857.6640512 -15.656   NA  387780000
#&gt; 130 -1228.1159662 -15.255   NA  354550000
#&gt; 131  -671.7211038 -14.827   NA  193990000
#&gt; 132  -642.7658662 -14.352   NA  170710000
#&gt; 133  -510.0457974 -13.810   NA  141500000
#&gt; 134  -444.9727955 -13.162   NA  422130000
#&gt; 135  -278.7860128 -12.367   NA  102070000
#&gt; 136  -204.0883518 -11.419   NA   23020000
#&gt; 137    -0.5663032 -10.329   NA  121280000
#&gt; 138   153.3110814  -9.119   NA -118560000
#&gt; 139    71.2371691  -7.829   NA   61400000
#&gt; 140    66.5499444  -6.504   NA   50130000
#&gt; 141   179.7908097  -5.202   NA   -7170000
#&gt; 142   260.3373950  -3.978   NA -126800000
#&gt; 143   351.3841112  -2.869   NA  -17230000
#&gt; 144   375.2429029  -1.912   NA  124130000
#&gt; 145   276.4376494  -1.129   NA  -19840000
#&gt; 146   142.1811871  -0.500   NA    1640000
#&gt; 147     5.1563720   0.000  4.9  -85040000
#&gt; 148    63.6802251   0.391   NA  -98570000
#&gt; 149     0.5663032   0.700   NA   88310000
#&gt; 150  -126.8277501   0.958   NA  -81440000
#&gt; 151  -145.5629161   1.201   NA  100530000
#&gt; 152  -289.6226886   1.457   NA   76080000
#&gt; 153  -384.5677912   1.749   NA   30800000
#&gt; 154  -325.9088079   2.090  0.0  -17910000
#&gt; 155  -251.6029938   2.479   NA   -1380000
#&gt; 156  -268.3642293   2.901   NA  -35780000
#&gt; 157  -152.0561706   3.342   NA  191110000
#&gt; 158   -92.3293219   3.797   NA -170340000
#&gt; 159    -8.3943316   4.267   NA  -62980000
#&gt; 160    50.9708858   4.753   NA  -52570000
#&gt; 161   205.0499068   5.251   NA  -89300000
#&gt; 162   424.7086637   5.755   NA  -74020000
#&gt; 163   541.6778667   6.256   NA  -22610000
#&gt; 164   723.8463831   6.742   NA    1380000
#&gt; 165   732.8618626   7.200   NA -118100000
#&gt; 166   809.9093792   7.623   NA   -4190000
#&gt; 167   841.0332644   8.007   NA  -85960000
#&gt; 168   836.5725272   8.349   NA  -94200000
#&gt; 169   913.9283065   8.651   NA -175310000
#&gt; 170   955.4537298   8.919 -7.7 -190410000
#&gt; 171  1014.9686484   9.162   NA -222000000
#&gt; 172  1046.7532590   9.393   NA -175460000
#&gt; 173  1126.4186561   9.616   NA -217350000
#&gt; 174  1210.1288732   9.835   NA -268040000
#&gt; 175  1278.2578830  10.053   NA -197400000
#&gt; 176  1270.9676954      NA   NA -170050000
#&gt; 177            NA      NA   NA         NA
#&gt; 178            NA      NA   NA         NA
#&gt; 179            NA      NA   NA         NA
#&gt; 180            NA      NA   NA         NA
#&gt; 181            NA      NA   NA         NA
#&gt; 182            NA      NA   NA         NA
#&gt; 183            NA      NA   NA         NA
#&gt; 184            NA      NA   NA         NA
#&gt; 185            NA      NA   NA         NA
#&gt; 186            NA      NA   NA         NA
#&gt; 187            NA      NA   NA         NA
#&gt; 188            NA      NA   NA         NA
#&gt; 189            NA      NA   NA         NA
#&gt; 190            NA      NA   NA         NA
#&gt; 191            NA      NA   NA         NA
#&gt; 192            NA      NA   NA         NA
#&gt; 193            NA      NA   NA         NA
#&gt; 194            NA      NA   NA         NA
#&gt; 195            NA      NA   NA         NA
#&gt; 196            NA      NA   NA         NA
#&gt; 197            NA      NA   NA         NA
#&gt; 198            NA      NA   NA         NA
#&gt; 199            NA      NA   NA         NA
#&gt; 200            NA      NA   NA         NA
#&gt; 201            NA      NA   NA         NA
#&gt; 202            NA      NA   NA         NA
#&gt; 203            NA      NA   NA         NA
#&gt; 204            NA      NA   NA         NA
#&gt; 205            NA      NA   NA         NA
#&gt; 206            NA      NA   NA         NA
#&gt; 207            NA      NA   NA         NA
#&gt; 208            NA      NA   NA         NA
#&gt; 209            NA      NA   NA         NA
#&gt; 210            NA      NA   NA         NA
#&gt; 211            NA      NA   NA         NA
#&gt; 212            NA      NA   NA         NA
#&gt; 213            NA      NA   NA         NA
#&gt; 214            NA      NA   NA         NA
#&gt; 215            NA      NA   NA         NA
#&gt; 216            NA      NA   NA         NA
#&gt; 217            NA      NA   NA         NA
#&gt; 218            NA      NA   NA         NA
#&gt; 219            NA      NA   NA         NA
#&gt; 220   296.2718635      NA   NA         NA
#&gt; 221   312.8139751      NA   NA         NA
#&gt; 222   343.5338594      NA   NA         NA
#&gt; 223   326.9413902      NA   NA         NA
#&gt; 224   -35.1830834      NA   NA         NA
#&gt; 225   301.9739683      NA   NA         NA
#&gt; 226   182.7461607      NA   NA         NA
#&gt; 227  -118.5795282      NA   NA         NA
#&gt; 228    35.1830834      NA   NA         NA
#&gt; 229   125.0868212      NA   NA         NA
#&gt; 230  -317.3286044      NA   NA         NA
#&gt; 231  -606.5269619      NA   NA         NA
#&gt; 232  -537.7561912      NA   NA         NA
#&gt; 233  -433.5278124      NA   NA         NA
#&gt; 234  -703.1670066      NA   NA         NA
#&gt; 235 -1227.2682468      NA   NA         NA
#&gt; 236            NA      NA   NA         NA
#&gt; 237            NA      NA   NA         NA
#&gt; 238            NA      NA   NA         NA
#&gt; 239            NA      NA   NA         NA
#&gt; 240            NA      NA   NA         NA
#&gt; 241            NA      NA   NA         NA
#&gt; 242            NA      NA   NA         NA
#&gt; 243            NA      NA   NA         NA
#&gt; 244            NA      NA   NA         NA
#&gt; 245            NA      NA   NA         NA
#&gt; 246            NA      NA   NA         NA
#&gt; 247  1497.1453726      NA   NA         NA
#&gt; 248  1242.7675902      NA   NA         NA
#&gt; 249  2410.8495529      NA   NA         NA
#&gt; 250  3561.3544550      NA   NA         NA
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12494 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'><span class='co'># Replacing data points by the weighted first quartile:</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='op'>-</span><span class='va'>country</span>, <span class='op'>-</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fnth.html'>fnth</a></span><span class='op'>(</span><span class='fl'>0.25</span>, <span class='va'>weights</span>, <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;         country year     PCGDP LIFEEX GINI       ODA    weights
#&gt; 1   Afghanistan 1960  372.8967 39.039   NA 155750000 0.64960207
#&gt; 2   Afghanistan 1961  372.8967 39.039   NA 155750000 0.75722274
#&gt; 3   Afghanistan 1962  372.8967 39.039   NA 155750000 0.75705783
#&gt; 4   Afghanistan 1963  372.8967 39.039   NA 155750000 0.76306573
#&gt; 5   Afghanistan 1964  372.8967 39.039   NA 155750000 1.11947183
#&gt; 6   Afghanistan 1965  372.8967 39.039   NA 155750000 0.63640340
#&gt; 7   Afghanistan 1966  372.8967 39.039   NA 155750000 0.39707839
#&gt; 8   Afghanistan 1967  372.8967 39.039   NA 155750000 1.10043709
#&gt; 9   Afghanistan 1968  372.8967 39.039   NA 155750000 1.01085447
#&gt; 10  Afghanistan 1969  372.8967 39.039   NA 155750000 0.19871825
#&gt; 11  Afghanistan 1970  372.8967 39.039   NA 155750000 0.76808144
#&gt; 12  Afghanistan 1971  372.8967 39.039   NA 155750000 1.82611254
#&gt; 13  Afghanistan 1972  372.8967 39.039   NA 155750000 1.20645067
#&gt; 14  Afghanistan 1973  372.8967 39.039   NA 155750000 0.02802289
#&gt; 15  Afghanistan 1974  372.8967 39.039   NA 155750000 0.19448888
#&gt; 16  Afghanistan 1975  372.8967 39.039   NA 155750000 0.57695016
#&gt; 17  Afghanistan 1976  372.8967 39.039   NA 155750000 1.17102058
#&gt; 18  Afghanistan 1977  372.8967 39.039   NA 155750000 0.17308698
#&gt; 19  Afghanistan 1978  372.8967 39.039   NA 155750000 1.69354873
#&gt; 20  Afghanistan 1979  372.8967 39.039   NA 155750000 0.66595635
#&gt; 21  Afghanistan 1980  372.8967 39.039   NA 155750000 0.80067777
#&gt; 22  Afghanistan 1981  372.8967 39.039   NA 155750000 0.42485516
#&gt; 23  Afghanistan 1982  372.8967 39.039   NA 155750000 0.65636967
#&gt; 24  Afghanistan 1983  372.8967 39.039   NA 155750000 2.47437621
#&gt; 25  Afghanistan 1984  372.8967 39.039   NA 155750000 2.11155431
#&gt; 26  Afghanistan 1985  372.8967 39.039   NA 155750000 2.31651573
#&gt; 27  Afghanistan 1986  372.8967 39.039   NA 155750000 1.28736142
#&gt; 28  Afghanistan 1987  372.8967 39.039   NA 155750000 0.40072985
#&gt; 29  Afghanistan 1988  372.8967 39.039   NA 155750000 0.10283244
#&gt; 30  Afghanistan 1989  372.8967 39.039   NA 155750000 0.64678462
#&gt; 31  Afghanistan 1990  372.8967 39.039   NA 155750000 0.76484682
#&gt; 32  Afghanistan 1991  372.8967 39.039   NA 155750000 0.32701161
#&gt; 33  Afghanistan 1992  372.8967 39.039   NA 155750000 0.60905551
#&gt; 34  Afghanistan 1993  372.8967 39.039   NA 155750000 0.72484784
#&gt; 35  Afghanistan 1994  372.8967 39.039   NA 155750000 1.47771053
#&gt; 36  Afghanistan 1995  372.8967 39.039   NA 155750000 0.62070404
#&gt; 37  Afghanistan 1996  372.8967 39.039   NA 155750000 0.72159078
#&gt; 38  Afghanistan 1997  372.8967 39.039   NA 155750000 1.61120728
#&gt; 39  Afghanistan 1998  372.8967 39.039   NA 155750000 1.14986314
#&gt; 40  Afghanistan 1999  372.8967 39.039   NA 155750000 0.46757558
#&gt; 41  Afghanistan 2000  372.8967 39.039   NA 155750000 0.08475564
#&gt; 42  Afghanistan 2001  372.8967 39.039   NA 155750000 1.02348947
#&gt; 43  Afghanistan 2002  372.8967 39.039   NA 155750000 0.97722632
#&gt; 44  Afghanistan 2003  372.8967 39.039   NA 155750000 0.16988104
#&gt; 45  Afghanistan 2004  372.8967 39.039   NA 155750000 1.11027409
#&gt; 46  Afghanistan 2005  372.8967 39.039   NA 155750000 0.29181735
#&gt; 47  Afghanistan 2006  372.8967 39.039   NA 155750000 0.45796483
#&gt; 48  Afghanistan 2007  372.8967 39.039   NA 155750000 1.57338699
#&gt; 49  Afghanistan 2008  372.8967 39.039   NA 155750000 0.64191737
#&gt; 50  Afghanistan 2009  372.8967 39.039   NA 155750000 0.62616936
#&gt; 51  Afghanistan 2010  372.8967 39.039   NA 155750000 0.69751696
#&gt; 52  Afghanistan 2011  372.8967 39.039   NA 155750000 0.90297309
#&gt; 53  Afghanistan 2012  372.8967 39.039   NA 155750000 1.23712218
#&gt; 54  Afghanistan 2013  372.8967 39.039   NA 155750000 0.21414900
#&gt; 55  Afghanistan 2014  372.8967 39.039   NA 155750000 0.08875854
#&gt; 56  Afghanistan 2015  372.8967 39.039   NA 155750000 0.07377434
#&gt; 57  Afghanistan 2016  372.8967 39.039   NA 155750000 0.75106534
#&gt; 58  Afghanistan 2017  372.8967 39.039   NA 155750000 1.91859810
#&gt; 59  Afghanistan 2018  372.8967 39.039   NA 155750000 0.71670247
#&gt; 60      Albania 1960 1869.8168 67.580 27.0 238460000 1.59085891
#&gt; 61      Albania 1961 1869.8168 67.580 27.0 238460000 0.17249926
#&gt; 62      Albania 1962 1869.8168 67.580 27.0 238460000 1.21983848
#&gt; 63      Albania 1963 1869.8168 67.580 27.0 238460000 0.64707261
#&gt; 64      Albania 1964 1869.8168 67.580 27.0 238460000 0.68437455
#&gt; 65      Albania 1965 1869.8168 67.580 27.0 238460000 0.05590685
#&gt; 66      Albania 1966 1869.8168 67.580 27.0 238460000 1.22998522
#&gt; 67      Albania 1967 1869.8168 67.580 27.0 238460000 1.48472950
#&gt; 68      Albania 1968 1869.8168 67.580 27.0 238460000 0.38200210
#&gt; 69      Albania 1969 1869.8168 67.580 27.0 238460000 0.07638031
#&gt; 70      Albania 1970 1869.8168 67.580 27.0 238460000 2.25667872
#&gt; 71      Albania 1971 1869.8168 67.580 27.0 238460000 0.45311576
#&gt; 72      Albania 1972 1869.8168 67.580 27.0 238460000 1.92509223
#&gt; 73      Albania 1973 1869.8168 67.580 27.0 238460000 1.40729338
#&gt; 74      Albania 1974 1869.8168 67.580 27.0 238460000 1.02310846
#&gt; 75      Albania 1975 1869.8168 67.580 27.0 238460000 1.06872195
#&gt; 76      Albania 1976 1869.8168 67.580 27.0 238460000 0.72154323
#&gt; 77      Albania 1977 1869.8168 67.580 27.0 238460000 0.71356757
#&gt; 78      Albania 1978 1869.8168 67.580 27.0 238460000 1.92015032
#&gt; 79      Albania 1979 1869.8168 67.580 27.0 238460000 1.96475333
#&gt; 80      Albania 1980 1869.8168 67.580 27.0 238460000 0.71970673
#&gt; 81      Albania 1981 1869.8168 67.580 27.0 238460000 0.63882522
#&gt; 82      Albania 1982 1869.8168 67.580 27.0 238460000 1.33714699
#&gt; 83      Albania 1983 1869.8168 67.580 27.0 238460000 0.22680166
#&gt; 84      Albania 1984 1869.8168 67.580 27.0 238460000 0.61201598
#&gt; 85      Albania 1985 1869.8168 67.580 27.0 238460000 0.34774540
#&gt; 86      Albania 1986 1869.8168 67.580 27.0 238460000 0.37255705
#&gt; 87      Albania 1987 1869.8168 67.580 27.0 238460000 0.98699098
#&gt; 88      Albania 1988 1869.8168 67.580 27.0 238460000 0.94220124
#&gt; 89      Albania 1989 1869.8168 67.580 27.0 238460000 0.61434886
#&gt; 90      Albania 1990 1869.8168 67.580 27.0 238460000 0.29756668
#&gt; 91      Albania 1991 1869.8168 67.580 27.0 238460000 0.65762825
#&gt; 92      Albania 1992 1869.8168 67.580 27.0 238460000 0.99224502
#&gt; 93      Albania 1993 1869.8168 67.580 27.0 238460000 0.50738726
#&gt; 94      Albania 1994 1869.8168 67.580 27.0 238460000 0.08579685
#&gt; 95      Albania 1995 1869.8168 67.580 27.0 238460000 1.62260314
#&gt; 96      Albania 1996 1869.8168 67.580 27.0 238460000 1.37499385
#&gt; 97      Albania 1997 1869.8168 67.580 27.0 238460000 0.42289572
#&gt; 98      Albania 1998 1869.8168 67.580 27.0 238460000 0.97631608
#&gt; 99      Albania 1999 1869.8168 67.580 27.0 238460000 0.04037462
#&gt; 100     Albania 2000 1869.8168 67.580 27.0 238460000 1.14970304
#&gt; 101     Albania 2001 1869.8168 67.580 27.0 238460000 1.78452007
#&gt; 102     Albania 2002 1869.8168 67.580 27.0 238460000 0.03818276
#&gt; 103     Albania 2003 1869.8168 67.580 27.0 238460000 0.08695350
#&gt; 104     Albania 2004 1869.8168 67.580 27.0 238460000 0.91343427
#&gt; 105     Albania 2005 1869.8168 67.580 27.0 238460000 0.26337015
#&gt; 106     Albania 2006 1869.8168 67.580 27.0 238460000 0.01349238
#&gt; 107     Albania 2007 1869.8168 67.580 27.0 238460000 0.74655933
#&gt; 108     Albania 2008 1869.8168 67.580 27.0 238460000 0.37161521
#&gt; 109     Albania 2009 1869.8168 67.580 27.0 238460000 0.14668916
#&gt; 110     Albania 2010 1869.8168 67.580 27.0 238460000 0.29281808
#&gt; 111     Albania 2011 1869.8168 67.580 27.0 238460000 0.69748433
#&gt; 112     Albania 2012 1869.8168 67.580 27.0 238460000 1.32914698
#&gt; 113     Albania 2013 1869.8168 67.580 27.0 238460000 0.49866954
#&gt; 114     Albania 2014 1869.8168 67.580 27.0 238460000 1.12108894
#&gt; 115     Albania 2015 1869.8168 67.580 27.0 238460000 0.01724390
#&gt; 116     Albania 2016 1869.8168 67.580 27.0 238460000 0.20673961
#&gt; 117     Albania 2017 1869.8168 67.580 27.0 238460000 0.25956186
#&gt; 118     Albania 2018 1869.8168 67.580 27.0 238460000 0.59887449
#&gt; 119     Algeria 1960 3104.4936 51.673 27.6 237230000 0.44844653
#&gt; 120     Algeria 1961 3104.4936 51.673 27.6 237230000 0.54888795
#&gt; 121     Algeria 1962 3104.4936 51.673 27.6 237230000 0.90382114
#&gt; 122     Algeria 1963 3104.4936 51.673 27.6 237230000 1.12602991
#&gt; 123     Algeria 1964 3104.4936 51.673 27.6 237230000 0.11760535
#&gt; 124     Algeria 1965 3104.4936 51.673 27.6 237230000 1.82695317
#&gt; 125     Algeria 1966 3104.4936 51.673 27.6 237230000 0.43433240
#&gt; 126     Algeria 1967 3104.4936 51.673 27.6 237230000 1.19772833
#&gt; 127     Algeria 1968 3104.4936 51.673 27.6 237230000 0.23114746
#&gt; 128     Algeria 1969 3104.4936 51.673 27.6 237230000 0.80949007
#&gt; 129     Algeria 1970 3104.4936 51.673 27.6 237230000 1.09657428
#&gt; 130     Algeria 1971 3104.4936 51.673 27.6 237230000 0.28591187
#&gt; 131     Algeria 1972 3104.4936 51.673 27.6 237230000 1.20101677
#&gt; 132     Algeria 1973 3104.4936 51.673 27.6 237230000 1.19423587
#&gt; 133     Algeria 1974 3104.4936 51.673 27.6 237230000 0.13156826
#&gt; 134     Algeria 1975 3104.4936 51.673 27.6 237230000 1.25564278
#&gt; 135     Algeria 1976 3104.4936 51.673 27.6 237230000 0.13070152
#&gt; 136     Algeria 1977 3104.4936 51.673 27.6 237230000 0.30987335
#&gt; 137     Algeria 1978 3104.4936 51.673 27.6 237230000 0.03586709
#&gt; 138     Algeria 1979 3104.4936 51.673 27.6 237230000 0.69467434
#&gt; 139     Algeria 1980 3104.4936 51.673 27.6 237230000 0.22646793
#&gt; 140     Algeria 1981 3104.4936 51.673 27.6 237230000 0.69415504
#&gt; 141     Algeria 1982 3104.4936 51.673 27.6 237230000 1.02453042
#&gt; 142     Algeria 1983 3104.4936 51.673 27.6 237230000 0.82574887
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12602 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fscale</span>               <span class='co'># Standardizing</span>
</div><div class='output co'>#&gt;           PCGDP      LIFEEX       GINI         ODA
#&gt; 1            NA -1.55109284         NA -0.61328586
#&gt; 2            NA -1.50632153         NA -0.55431461
#&gt; 3            NA -1.46224667         NA -0.61306765
#&gt; 4            NA -1.41856977         NA -0.55277722
#&gt; 5            NA -1.37519134         NA -0.52003084
#&gt; 6            NA -1.33191241         NA -0.48642154
#&gt; 7            NA -1.28883246         NA -0.50228144
#&gt; 8            NA -1.24575251         NA -0.54147989
#&gt; 9            NA -1.20247358         NA -0.57978071
#&gt; 10           NA -1.15889617         NA -0.58936211
#&gt; 11           NA -1.11472181         NA -0.59279892
#&gt; 12           NA -1.06995051         NA -0.55639752
#&gt; 13           NA -1.02428377         NA -0.53874235
#&gt; 14           NA -0.97762212         NA -0.55123487
#&gt; 15           NA -0.92946809         NA -0.57455359
#&gt; 16           NA -0.87982168         NA -0.55116048
#&gt; 17           NA -0.82838442         NA -0.55084309
#&gt; 18           NA -0.77505682         NA -0.53788935
#&gt; 19           NA -0.71954039         NA -0.55951197
#&gt; 20           NA -0.66143718         NA -0.54488199
#&gt; 21           NA -0.59985176         NA -0.63403069
#&gt; 22           NA -0.53418717         NA -0.64344843
#&gt; 23           NA -0.46414495         NA -0.65880248
#&gt; 24           NA -0.38992407         NA -0.65335219
#&gt; 25           NA -0.31192250         NA -0.66173344
#&gt; 26           NA -0.23043871         NA -0.65025758
#&gt; 27           NA -0.14577119         NA -0.66795738
#&gt; 28           NA -0.05911384         NA -0.62999876
#&gt; 29           NA  0.02804098         NA -0.61075661
#&gt; 30           NA  0.11400189         NA -0.55176056
#&gt; 31           NA  0.19638110         NA -0.57916079
#&gt; 32           NA  0.27308928         NA -0.31860318
#&gt; 33           NA  0.34313150         NA -0.52934444
#&gt; 34           NA  0.40650778         NA -0.51465494
#&gt; 35           NA  0.46331759         NA -0.51642046
#&gt; 36           NA  0.51465536         NA -0.54446540
#&gt; 37           NA  0.56221244         NA -0.56887517
#&gt; 38           NA  0.60837664         NA -0.51818598
#&gt; 39           NA  0.65523727         NA -0.56035010
#&gt; 40           NA  0.70408775         NA -0.57284262
#&gt; 41           NA  0.75612196         NA -0.57022906
#&gt; 42           NA  0.81203635         NA -0.35733545
#&gt; 43  -1.35152648  0.87103498         NA  0.22117892
#&gt; 44  -1.23194740  0.93202346         NA  0.28621541
#&gt; 45  -1.33275966  0.99420583         NA  0.61579185
#&gt; 46  -1.10578594  1.05638820         NA  0.90031785
#&gt; 47  -1.03610914  1.11707820         NA  0.91771514
#&gt; 48  -0.65659585  1.17518141         NA  1.82645562
#&gt; 49  -0.60388092  1.22980241         NA  1.68797162
#&gt; 50   0.12275764  1.28064272         NA  2.43701214
#&gt; 51   0.64814077  1.32760284         NA  2.48273706
#&gt; 52   0.51062216  1.37137924         NA  2.52083454
#&gt; 53   0.97426381  1.41316579         NA  2.42158371
#&gt; 54   1.09391149  1.45375844         NA  1.70957441
#&gt; 55   1.06592780  1.49365466         NA  1.61307104
#&gt; 56   0.98185840  1.53275493         NA  1.44826298
#&gt; 57   0.95669983  1.57105927         NA  1.34801037
#&gt; 58   0.96442352          NA         NA  1.18664904
#&gt; 59           NA          NA         NA          NA
#&gt; 60           NA -2.21717267         NA          NA
#&gt; 61           NA -1.96784489         NA          NA
#&gt; 62           NA -1.75032537         NA          NA
#&gt; 63           NA -1.57317787         NA          NA
#&gt; 64           NA -1.43860448         NA          NA
#&gt; 65           NA -1.34391376         NA          NA
#&gt; 66           NA -1.28029725         NA          NA
#&gt; 67           NA -1.23282955         NA          NA
#&gt; 68           NA -1.18805331         NA          NA
#&gt; 69           NA -1.13862818         NA          NA
#&gt; 70           NA -1.07843718         NA          NA
#&gt; 71           NA -1.00454415         NA          NA
#&gt; 72           NA -0.92012994         NA          NA
#&gt; 73           NA -0.82935408         NA          NA
#&gt; 74           NA -0.73392932         NA          NA
#&gt; 75           NA -0.63777052         NA          NA
#&gt; 76           NA -0.54626062         NA          NA
#&gt; 77           NA -0.46331448         NA          NA
#&gt; 78           NA -0.39137889         NA          NA
#&gt; 79           NA -0.33045385         NA          NA
#&gt; 80  -0.61690117 -0.27735853         NA          NA
#&gt; 81  -0.54877307 -0.22622065         NA          NA
#&gt; 82  -0.53337084 -0.17263597         NA          NA
#&gt; 83  -0.55320606 -0.11366836         NA          NA
#&gt; 84  -0.61707084 -0.05054121         NA          NA
#&gt; 85  -0.62249638  0.01160722         NA          NA
#&gt; 86  -0.55520526  0.06470254         NA          NA
#&gt; 87  -0.60824058  0.10262776         NA          NA
#&gt; 88  -0.66944142  0.12293611         NA -2.04977059
#&gt; 89  -0.54380033  0.12709565         NA -1.99321444
#&gt; 90  -0.76088096  0.12122336         NA -2.00452567
#&gt; 91  -1.26343256  0.11314896         NA  0.89522417
#&gt; 92  -1.34443121  0.11290428         NA  1.59181330
#&gt; 93  -1.22737666  0.12709565         NA  0.53593453
#&gt; 94  -1.11468642  0.15939326         NA -0.63867703
#&gt; 95  -0.92293862  0.21150987         NA -0.62104275
#&gt; 96  -0.77025269  0.28246674 -1.4944764 -0.19149702
#&gt; 97  -0.94782810  0.36639159         NA -0.59511826
#&gt; 98  -0.80161863  0.45692278         NA  0.36584453
#&gt; 99  -0.57267689  0.54990075         NA  2.49235585
#&gt; 100 -0.42676091  0.63969790         NA  1.11217497
#&gt; 101 -0.23519952  0.72068661         NA  0.67117750
#&gt; 102 -0.12603799  0.79139880  1.1461398  0.88187551
#&gt; 103  0.01369176  0.85134513         NA  0.79960563
#&gt; 104  0.16235831  0.90223834         NA  0.21163242
#&gt; 105  0.32303836  0.94848264  0.5281232  0.23334155
#&gt; 106  0.50747531  0.99766310         NA  0.24556611
#&gt; 107  0.71042318  1.05589667         NA -0.09264671
#&gt; 108  0.97646650  1.12611951  0.1910233  0.10315702
#&gt; 109  1.11657929  1.20882097         NA  0.11348466
#&gt; 110  1.26875045  1.29959683         NA  0.21317805
#&gt; 111  1.37481578  1.39233013         NA  0.15163372
#&gt; 112  1.43608151  1.47992516 -0.3708099  0.08980836
#&gt; 113  1.48254420  1.55650965         NA -0.43451284
#&gt; 114  1.56112096  1.62037084         NA -0.37303876
#&gt; 115  1.66298424  1.67199808         NA  0.23313078
#&gt; 116  1.80877008  1.71383817         NA -0.92532188
#&gt; 117  1.97752718          NA         NA -1.02157272
#&gt; 118          NA          NA         NA          NA
#&gt; 119 -1.26069526 -1.65864857         NA  3.43198050
#&gt; 120 -1.74559756 -1.61283851         NA  4.26839164
#&gt; 121 -2.30804208 -1.56702844         NA  3.48932955
#&gt; 122 -1.67670797 -1.52171849         NA  2.07555085
#&gt; 123 -1.59231593 -1.47680862         NA  1.41218135
#&gt; 124 -1.49812390 -1.43319904         NA  0.59129293
#&gt; 125 -1.70861442 -1.39148988         NA  0.34628754
#&gt; 126 -1.54025609 -1.35158111         NA  0.16049046
#&gt; 127 -1.32573989 -1.31287261         NA  0.23647542
#&gt; 128 -1.16376261 -1.27436415         NA  0.31537180
#&gt; 129 -0.97841337 -1.23545560         NA  0.22948515
#&gt; 130 -1.44160427 -1.19534679         NA  0.18159099
#&gt; 131 -0.74592144 -1.15253739         NA -0.04982301
#&gt; 132 -0.70971754 -1.10502695         NA -0.08337631
#&gt; 133 -0.54377231 -1.05081504         NA -0.12547648
#&gt; 134 -0.46240893 -0.98600081         NA  0.27899357
#&gt; 135 -0.25461892 -0.90648334         NA -0.18230666
#&gt; 136 -0.16122144 -0.81166251         NA -0.29624087
#&gt; 137  0.09325035 -0.70263856         NA -0.15461943
#&gt; 138  0.28564942 -0.58161197         NA -0.50029913
#&gt; 139  0.18302912 -0.45258363         NA -0.24092405
#&gt; 140  0.17716849 -0.32005452         NA -0.25716742
#&gt; 141  0.31875809 -0.18982591         NA -0.33975351
#&gt; 142  0.41946872 -0.06739902         NA -0.51217539
#&gt; 143  0.53330808  0.04352535         NA -0.35425292
#&gt; 144  0.56313969  0.13924638         NA -0.15051174
#&gt; 145  0.43959951  0.21756358         NA -0.35801469
#&gt; 146  0.27173327  0.28047740         NA -0.32705572
#&gt; 147  0.10040564  0.33048839  0.9183979 -0.45198699
#&gt; 148  0.17358037  0.36959698         NA -0.47148769
#&gt; 149  0.09466650  0.40050377         NA -0.20213886
#&gt; 150 -0.06461940  0.42630944         NA -0.44679834
#&gt; 151 -0.08804473  0.45061478         NA -0.18452626
#&gt; 152 -0.26816845  0.47622040         NA -0.21976587
#&gt; 153 -0.38688212  0.50542682         NA -0.28502761
#&gt; 154 -0.31353844  0.53953431  0.1469437 -0.35523300
#&gt; 155 -0.22063090  0.57844286         NA -0.33140842
#&gt; 156 -0.24158815  0.62065213         NA -0.38098890
#&gt; 157 -0.09616351  0.66476182         NA -0.05397394
#&gt; 158 -0.02148463  0.71027182         NA -0.57492928
#&gt; 159  0.08346265  0.75728214         NA -0.42019207
#&gt; 160  0.15768937  0.80589282         NA -0.40518821
#&gt; 161  0.35034055  0.85570376         NA -0.45812690
#&gt; 162  0.62498872  0.90611484         NA -0.43610394
#&gt; 163  0.77124001  0.95622585         NA -0.36200707
#&gt; 164  0.99901262  1.00483652         NA -0.32743045
#&gt; 165  1.01028503  1.05064659         NA -0.49963614
#&gt; 166  1.10662063  1.09295588         NA -0.33545846
#&gt; 167  1.14553608  1.13136432         NA -0.45331298
#&gt; 168  1.13995864  1.16557183         NA -0.46518924
#&gt; 169  1.23667968  1.19577847         NA -0.58209251
#&gt; 170  1.28860058  1.22258436 -1.0653416 -0.60385603
#&gt; 171  1.36301447  1.24688970         NA -0.64938648
#&gt; 172  1.40275605  1.26999477         NA -0.58230870
#&gt; 173  1.50236489  1.29229967         NA -0.64268447
#&gt; 174  1.60703113  1.31420448         NA -0.71574361
#&gt; 175  1.69221557  1.33600927         NA -0.61393067
#&gt; 176  1.68310036          NA         NA -0.57451131
#&gt; 177          NA          NA         NA          NA
#&gt; 178          NA          NA         NA          NA
#&gt; 179          NA          NA         NA          NA
#&gt; 180          NA          NA         NA          NA
#&gt; 181          NA          NA         NA          NA
#&gt; 182          NA          NA         NA          NA
#&gt; 183          NA          NA         NA          NA
#&gt; 184          NA          NA         NA          NA
#&gt; 185          NA          NA         NA          NA
#&gt; 186          NA          NA         NA          NA
#&gt; 187          NA          NA         NA          NA
#&gt; 188          NA          NA         NA          NA
#&gt; 189          NA          NA         NA          NA
#&gt; 190          NA          NA         NA          NA
#&gt; 191          NA          NA         NA          NA
#&gt; 192          NA          NA         NA          NA
#&gt; 193          NA          NA         NA          NA
#&gt; 194          NA          NA         NA          NA
#&gt; 195          NA          NA         NA          NA
#&gt; 196          NA          NA         NA          NA
#&gt; 197          NA          NA         NA          NA
#&gt; 198          NA          NA         NA          NA
#&gt; 199          NA          NA         NA          NA
#&gt; 200          NA          NA         NA          NA
#&gt; 201          NA          NA         NA          NA
#&gt; 202          NA          NA         NA          NA
#&gt; 203          NA          NA         NA          NA
#&gt; 204          NA          NA         NA          NA
#&gt; 205          NA          NA         NA          NA
#&gt; 206          NA          NA         NA          NA
#&gt; 207          NA          NA         NA          NA
#&gt; 208          NA          NA         NA          NA
#&gt; 209          NA          NA         NA          NA
#&gt; 210          NA          NA         NA          NA
#&gt; 211          NA          NA         NA          NA
#&gt; 212          NA          NA         NA          NA
#&gt; 213          NA          NA         NA          NA
#&gt; 214          NA          NA         NA          NA
#&gt; 215          NA          NA         NA          NA
#&gt; 216          NA          NA         NA          NA
#&gt; 217          NA          NA         NA          NA
#&gt; 218          NA          NA         NA          NA
#&gt; 219          NA          NA         NA          NA
#&gt; 220  0.91242831          NA         NA          NA
#&gt; 221  0.94796782          NA         NA          NA
#&gt; 222  1.01396725          NA         NA          NA
#&gt; 223  0.97831954          NA         NA          NA
#&gt; 224  0.20032160          NA         NA          NA
#&gt; 225  0.92467886          NA         NA          NA
#&gt; 226  0.66852664          NA         NA          NA
#&gt; 227  0.02115044          NA         NA          NA
#&gt; 228  0.35149816          NA         NA          NA
#&gt; 229  0.54464976          NA         NA          NA
#&gt; 230 -0.40584741          NA         NA          NA
#&gt; 231 -1.02716893          NA         NA          NA
#&gt; 232 -0.87941996          NA         NA          NA
#&gt; 233 -0.65549291          NA         NA          NA
#&gt; 234 -1.23479299          NA         NA          NA
#&gt; 235 -2.36078617          NA         NA          NA
#&gt; 236          NA          NA         NA          NA
#&gt; 237          NA          NA         NA          NA
#&gt; 238          NA          NA         NA          NA
#&gt; 239          NA          NA         NA          NA
#&gt; 240          NA          NA         NA          NA
#&gt; 241          NA          NA         NA          NA
#&gt; 242          NA          NA         NA          NA
#&gt; 243          NA          NA         NA          NA
#&gt; 244          NA          NA         NA          NA
#&gt; 245          NA          NA         NA          NA
#&gt; 246          NA          NA         NA          NA
#&gt; 247  0.47184592          NA         NA          NA
#&gt; 248  0.41375110          NA         NA          NA
#&gt; 249  0.68051776          NA         NA          NA
#&gt; 250  0.94327017          NA         NA          NA
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12494 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>weights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fscale.html'>fscale</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span>  <span class='co'># Weigted..</span>
</div><div class='output co'>#&gt;        weights       PCGDP      LIFEEX       GINI          ODA
#&gt; 1   0.64960207          NA -1.56622172         NA -0.559821823
#&gt; 2   0.75722274          NA -1.51852522         NA -0.500214720
#&gt; 3   0.75705783          NA -1.47157066         NA -0.559601260
#&gt; 4   0.76306573          NA -1.42504007         NA -0.498660755
#&gt; 5   1.11947183          NA -1.37882746         NA -0.465561293
#&gt; 6   0.63640340          NA -1.33272084         NA -0.431589605
#&gt; 7   0.39707839          NA -1.28682621         NA -0.447620512
#&gt; 8   1.10043709          NA -1.24093157         NA -0.487241616
#&gt; 9   1.01085447          NA -1.19482495         NA -0.525955404
#&gt; 10  0.19871825          NA -1.14840036         NA -0.535640117
#&gt; 11  0.76808144          NA -1.10133981         NA -0.539113981
#&gt; 12  1.82611254          NA -1.05364331         NA -0.502320092
#&gt; 13  1.20645067          NA -1.00499287         NA -0.484474555
#&gt; 14  0.02802289          NA -0.95528252         NA -0.497101776
#&gt; 15  0.19448888          NA -0.90398228         NA -0.520671922
#&gt; 16  0.57695016          NA -0.85109216         NA -0.497026584
#&gt; 17  1.17102058          NA -0.79629418         NA -0.496705766
#&gt; 18  0.17308698          NA -0.73948234         NA -0.483612355
#&gt; 19  1.69354873          NA -0.68033868         NA -0.505468125
#&gt; 20  0.66595635          NA -0.61843922         NA -0.490680391
#&gt; 21  0.80067777          NA -0.55283003         NA -0.580790330
#&gt; 22  0.42485516          NA -0.48287516         NA -0.590309621
#&gt; 23  0.65636967          NA -0.40825663         NA -0.605829223
#&gt; 24  2.47437621          NA -0.32918643         NA -0.600320165
#&gt; 25  2.11155431          NA -0.24608852         NA -0.608791783
#&gt; 26  2.31651573          NA -0.15928089         NA -0.597192183
#&gt; 27  1.28736142          NA -0.06908150         NA -0.615082836
#&gt; 28  0.40072985          NA  0.02323773         NA -0.576714930
#&gt; 29  0.10283244          NA  0.11608692         NA -0.557265299
#&gt; 30  0.64678462          NA  0.20766421         NA -0.497633132
#&gt; 31  0.76484682          NA  0.29542577         NA -0.525328805
#&gt; 32  0.32701161          NA  0.37714578         NA -0.261961755
#&gt; 33  0.60905551          NA  0.45176431         NA -0.474975315
#&gt; 34  0.72484784          NA  0.51928136         NA -0.460127427
#&gt; 35  1.47771053          NA  0.57980292         NA -0.461911980
#&gt; 36  0.62070404          NA  0.63449491         NA -0.490259316
#&gt; 37  0.72159078          NA  0.68515919         NA -0.514932276
#&gt; 38  1.61120728          NA  0.73433959         NA -0.463696534
#&gt; 39  1.14986314          NA  0.78426193         NA -0.506315287
#&gt; 40  0.46757558          NA  0.83630411         NA -0.518942509
#&gt; 41  0.08475564          NA  0.89173804         NA -0.516300768
#&gt; 42  1.02348947          NA  0.95130568         NA -0.301111656
#&gt; 43  0.97722632 -1.36838575  1.01415907         NA  0.283640491
#&gt; 44  0.16988104 -1.24683853  1.07913230         NA  0.349378238
#&gt; 45  1.11027409 -1.34931005  1.14537745         NA  0.682508307
#&gt; 46  0.29181735 -1.11860059  1.21162259         NA  0.970102178
#&gt; 47  0.45796483 -1.04777699  1.27627785         NA  0.987687050
#&gt; 48  1.57338699 -0.66201733  1.33817731         NA  1.906225942
#&gt; 49  0.64191737 -0.60843477  1.39636704         NA  1.766248753
#&gt; 50  0.62616936  0.13016346  1.45052907         NA  2.523365735
#&gt; 51  0.69751696  0.66419383  1.50055740         NA  2.569583672
#&gt; 52  0.90297309  0.52441181  1.54719398         NA  2.608091936
#&gt; 53  1.23712218  0.99568449  1.59171072         NA  2.507770941
#&gt; 54  0.21414900  1.11730144  1.63495555         NA  1.788084473
#&gt; 55  0.08875854  1.08885717  1.67745843         NA  1.690540564
#&gt; 56  0.07377434  1.00340408  1.71911337         NA  1.523955479
#&gt; 57  0.75106534  0.97783143  1.75992038         NA  1.422621900
#&gt; 58  1.91859810  0.98568224          NA         NA  1.259520704
#&gt; 59  0.71670247          NA          NA         NA           NA
#&gt; 60  1.59085891          NA -2.09250979         NA           NA
#&gt; 61  0.17249926          NA -1.83305603         NA           NA
#&gt; 62  1.21983848          NA -1.60670236         NA           NA
#&gt; 63  0.64707261          NA -1.42236034         NA           NA
#&gt; 64  0.68437455          NA -1.28232151         NA           NA
#&gt; 65  0.05590685          NA -1.18378509         NA           NA
#&gt; 66  1.22998522          NA -1.11758492         NA           NA
#&gt; 67  1.48472950          NA -1.06818940         NA           NA
#&gt; 68  0.38200210          NA -1.02159467         NA           NA
#&gt; 69  0.07638031          NA -0.97016222         NA           NA
#&gt; 70  2.25667872          NA -0.90752667         NA           NA
#&gt; 71  0.45311576          NA -0.83063262         NA           NA
#&gt; 72  1.92509223          NA -0.74279009         NA           NA
#&gt; 73  1.40729338          NA -0.64832753         NA           NA
#&gt; 74  1.02310846          NA -0.54902727         NA           NA
#&gt; 75  1.06872195          NA -0.44896316         NA           NA
#&gt; 76  0.72154323          NA -0.35373675         NA           NA
#&gt; 77  0.71356757          NA -0.26742191         NA           NA
#&gt; 78  1.92015032          NA -0.19256479         NA           NA
#&gt; 79  1.96475333          NA -0.12916539         NA           NA
#&gt; 80  0.71970673 -0.48194121 -0.07391371         NA           NA
#&gt; 81  0.63882522 -0.40974425 -0.02069895         NA           NA
#&gt; 82  1.33714699 -0.39342214  0.03506196         NA           NA
#&gt; 83  0.22680166 -0.41444199  0.09642443         NA           NA
#&gt; 84  0.61201598 -0.48212102  0.16211537         NA           NA
#&gt; 85  0.34774540 -0.48787060  0.22678785         NA           NA
#&gt; 86  0.37255705 -0.41656059  0.28203954         NA           NA
#&gt; 87  0.98699098 -0.47276338  0.32150503         NA           NA
#&gt; 88  0.94220124 -0.53761937  0.34263816         NA -2.178635548
#&gt; 89  0.61434886 -0.40447451  0.34696663         NA -2.117868790
#&gt; 90  0.29756668 -0.63452002  0.34085585         NA -2.130022141
#&gt; 91  0.65762825 -1.16708590  0.33245352         NA  0.985614092
#&gt; 92  0.99224502 -1.25292209  0.33219890         NA  1.734064284
#&gt; 93  0.50738726 -1.12887661  0.34696663         NA  0.599575334
#&gt; 94  0.08579685 -1.00945608  0.38057595         NA -0.662486065
#&gt; 95  1.62260314 -0.80625637  0.43480917         NA -0.643538915
#&gt; 96  1.37499385 -0.64445147  0.50864783 -0.9284845 -0.182013501
#&gt; 97  0.42289572 -0.83263235  0.59598113         NA -0.615684339
#&gt; 98  0.97631608 -0.67769070  0.69018907         NA  0.416822140
#&gt; 99  0.04037462 -0.43507569  0.78694317         NA  2.701652239
#&gt; 100 1.14970304 -0.28044506  0.88038727         NA  1.218716885
#&gt; 101 1.78452007 -0.07744290  0.96466518         NA  0.744887146
#&gt; 102 0.03818276  0.03823816  1.03824922  2.0788549  0.971271627
#&gt; 103 0.08695350  0.18631311  1.10063015         NA  0.882876753
#&gt; 104 0.91343427  0.34385858  1.15359029         NA  0.251128930
#&gt; 105 0.26337015  0.51413505  1.20171273  1.3750095  0.274454307
#&gt; 106 0.01349238  0.70958727  1.25289056         NA  0.287588985
#&gt; 107 0.74655933  0.92465595  1.31348918         NA -0.075803776
#&gt; 108 0.37161521  1.20658838  1.38656398  0.9910938  0.134577534
#&gt; 109 0.14668916  1.35506924  1.47262421         NA  0.145674072
#&gt; 110 0.29281808  1.51632864  1.56708677         NA  0.252789637
#&gt; 111 0.69748433  1.62872858  1.66358625         NA  0.186663326
#&gt; 112 1.32914698  1.69365333  1.75473880  0.3512344  0.120235069
#&gt; 113 0.49866954  1.74289095  1.83443363         NA -0.443121843
#&gt; 114 1.12108894  1.82616061  1.90088842         NA -0.377071019
#&gt; 115 0.01724390  1.93410754  1.95461240         NA  0.274227847
#&gt; 116 0.20673961  2.08860027  1.99815175         NA -0.970471621
#&gt; 117 0.25956186  2.26743618          NA         NA -1.073888339
#&gt; 118 0.59887449          NA          NA         NA           NA
#&gt; 119 0.44844653 -1.29992812 -1.72298776         NA  3.762345245
#&gt; 120 0.54888795 -1.75396737 -1.67831402         NA  4.664377301
#&gt; 121 0.90382114 -2.28061344 -1.63364028         NA  3.824193631
#&gt; 122 1.12602991 -1.68946247 -1.58945425         NA  2.299496458
#&gt; 123 0.11760535 -1.61044180 -1.54565838         NA  1.584082076
#&gt; 124 1.82695317 -1.52224491 -1.50313054         NA  0.698790586
#&gt; 125 0.43433240 -1.71933814 -1.46245598         NA  0.434563213
#&gt; 126 1.19772833 -1.56169547 -1.42353715         NA  0.234189364
#&gt; 127 0.23114746 -1.36083278 -1.38578882         NA  0.316135756
#&gt; 128 0.80949007 -1.20916503 -1.34823557         NA  0.401221975
#&gt; 129 1.09657428 -1.03561289 -1.31029215         NA  0.308597061
#&gt; 130 0.28591187 -1.46932264 -1.27117824         NA  0.256945342
#&gt; 131 1.20101677 -0.81791860 -1.22943073         NA  0.007375679
#&gt; 132 1.19423587 -0.78401901 -1.18309880         NA -0.028810057
#&gt; 133 0.13156826 -0.62863585 -1.13023162         NA -0.074213207
#&gt; 134 1.25564278 -0.55245108 -1.06702511         NA  0.361989674
#&gt; 135 0.13070152 -0.35788649 -0.98948008         NA -0.135502020
#&gt; 136 0.30987335 -0.27043356 -0.89701129         NA -0.258374977
#&gt; 137 0.03586709 -0.03215839 -0.79069170         NA -0.105642571
#&gt; 138 0.69467434  0.14799488 -0.67266719         NA -0.478442695
#&gt; 139 0.22646793  0.05190614 -0.54683941         NA -0.198718252
#&gt; 140 0.69415504  0.04641853 -0.41759770         NA -0.216236003
#&gt; 141 1.02453042  0.17899624 -0.29059943         NA -0.305301410
#&gt; 142 0.82574887  0.27329685 -0.17120935         NA -0.491250705
#&gt; 143 2.52875078  0.37989057 -0.06303647         NA -0.320938373
#&gt; 144 0.17138094  0.40782345  0.03031018         NA -0.101212616
#&gt; 145 0.82199787  0.29214636  0.10668472         NA -0.324995279
#&gt; 146 0.20069159  0.13496446  0.16803795         NA -0.291607409
#&gt; 147 0.24467521 -0.02545852  0.21680841  1.0633197 -0.426340209
#&gt; 148 0.23409845  0.04305879  0.25494691         NA -0.447370837
#&gt; 149 0.13358865 -0.03083238  0.28508705         NA -0.156890153
#&gt; 150 0.38324655 -0.17998005  0.31025261         NA -0.420744477
#&gt; 151 1.73535782 -0.20191441  0.33395505         NA -0.137895750
#&gt; 152 0.48305800 -0.37057362  0.35892552         NA -0.175900099
#&gt; 153 0.56223952 -0.48173141  0.38740747         NA -0.246281977
#&gt; 154 1.08805016 -0.41305590  0.42066892  0.2687564 -0.321995345
#&gt; 155 0.63329068 -0.32606174  0.45861234         NA -0.296301607
#&gt; 156 0.66978860 -0.34568509  0.49977461         NA -0.349771938
#&gt; 157 1.06213867 -0.20951644  0.54279015         NA  0.002899093
#&gt; 158 0.52217932 -0.13959072  0.58717126         NA -0.558927979
#&gt; 159 1.51402002 -0.04132312  0.63301549         NA -0.392050805
#&gt; 160 0.50656473  0.02817922  0.68042038         NA -0.375869812
#&gt; 161 0.37698533  0.20856855  0.72899575         NA -0.432961826
#&gt; 162 1.09868756  0.46573591  0.77815638         NA -0.409211051
#&gt; 163 1.66782994  0.60267861  0.82702437         NA -0.329300884
#&gt; 164 0.64205310  0.81595395  0.87442926         NA -0.292011545
#&gt; 165 2.06238884  0.82650890  0.91910300         NA -0.477727685
#&gt; 166 1.37871968  0.91671294  0.96036280         NA -0.300669387
#&gt; 167 0.27578468  0.95315149  0.99781852         NA -0.427770230
#&gt; 168 0.27307581  0.94792905  1.03117751         NA -0.440578239
#&gt; 169 0.34424073  1.03849399  1.06063487         NA -0.566653198
#&gt; 170 0.56395614  1.08711023  1.08677583 -0.9798430 -0.590124187
#&gt; 171 0.52028864  1.15678783  1.11047827         NA -0.639226738
#&gt; 172 0.81374941  1.19399993  1.13301022         NA -0.566886354
#&gt; 173 1.08686118  1.28726888  1.15476185         NA -0.631998917
#&gt; 174 1.74136622  1.38527333  1.17612331         NA -0.710789937
#&gt; 175 2.06235485  1.46503595  1.19738723         NA -0.600989234
#&gt; 176 1.39617956  1.45650090          NA         NA -0.558477211
#&gt; 177 0.26353278          NA          NA         NA           NA
#&gt; 178 0.39788379          NA          NA         NA           NA
#&gt; 179 0.25389849          NA          NA         NA           NA
#&gt; 180 0.21720890          NA          NA         NA           NA
#&gt; 181 1.31925308          NA          NA         NA           NA
#&gt; 182 0.40605807          NA          NA         NA           NA
#&gt; 183 1.65075137          NA          NA         NA           NA
#&gt; 184 0.44909733          NA          NA         NA           NA
#&gt; 185 0.57666305          NA          NA         NA           NA
#&gt; 186 1.80923237          NA          NA         NA           NA
#&gt; 187 0.69011132          NA          NA         NA           NA
#&gt; 188 0.74411561          NA          NA         NA           NA
#&gt; 189 0.55088513          NA          NA         NA           NA
#&gt; 190 0.14143460          NA          NA         NA           NA
#&gt; 191 0.69617292          NA          NA         NA           NA
#&gt; 192 0.48650955          NA          NA         NA           NA
#&gt; 193 0.82864464          NA          NA         NA           NA
#&gt; 194 0.98349788          NA          NA         NA           NA
#&gt; 195 0.94205778          NA          NA         NA           NA
#&gt; 196 0.52221011          NA          NA         NA           NA
#&gt; 197 0.30026967          NA          NA         NA           NA
#&gt; 198 0.33056651          NA          NA         NA           NA
#&gt; 199 0.04464643          NA          NA         NA           NA
#&gt; 200 0.29238554          NA          NA         NA           NA
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12544 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 2 lags of each variable</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        country year F1.PCGDP    PCGDP L1.PCGDP L2.PCGDP F1.LIFEEX LIFEEX
#&gt; 1  Afghanistan 1960       NA       NA       NA       NA    32.742 32.292
#&gt; 2  Afghanistan 1961       NA       NA       NA       NA    33.185 32.742
#&gt; 3  Afghanistan 1962       NA       NA       NA       NA    33.624 33.185
#&gt; 4  Afghanistan 1963       NA       NA       NA       NA    34.060 33.624
#&gt; 5  Afghanistan 1964       NA       NA       NA       NA    34.495 34.060
#&gt; 6  Afghanistan 1965       NA       NA       NA       NA    34.928 34.495
#&gt; 7  Afghanistan 1966       NA       NA       NA       NA    35.361 34.928
#&gt; 8  Afghanistan 1967       NA       NA       NA       NA    35.796 35.361
#&gt; 9  Afghanistan 1968       NA       NA       NA       NA    36.234 35.796
#&gt; 10 Afghanistan 1969       NA       NA       NA       NA    36.678 36.234
#&gt; 11 Afghanistan 1970       NA       NA       NA       NA    37.128 36.678
#&gt; 12 Afghanistan 1971       NA       NA       NA       NA    37.587 37.128
#&gt; 13 Afghanistan 1972       NA       NA       NA       NA    38.056 37.587
#&gt; 14 Afghanistan 1973       NA       NA       NA       NA    38.540 38.056
#&gt; 15 Afghanistan 1974       NA       NA       NA       NA    39.039 38.540
#&gt; 16 Afghanistan 1975       NA       NA       NA       NA    39.556 39.039
#&gt; 17 Afghanistan 1976       NA       NA       NA       NA    40.092 39.556
#&gt; 18 Afghanistan 1977       NA       NA       NA       NA    40.650 40.092
#&gt; 19 Afghanistan 1978       NA       NA       NA       NA    41.234 40.650
#&gt; 20 Afghanistan 1979       NA       NA       NA       NA    41.853 41.234
#&gt; 21 Afghanistan 1980       NA       NA       NA       NA    42.513 41.853
#&gt; 22 Afghanistan 1981       NA       NA       NA       NA    43.217 42.513
#&gt; 23 Afghanistan 1982       NA       NA       NA       NA    43.963 43.217
#&gt; 24 Afghanistan 1983       NA       NA       NA       NA    44.747 43.963
#&gt; 25 Afghanistan 1984       NA       NA       NA       NA    45.566 44.747
#&gt; 26 Afghanistan 1985       NA       NA       NA       NA    46.417 45.566
#&gt; 27 Afghanistan 1986       NA       NA       NA       NA    47.288 46.417
#&gt; 28 Afghanistan 1987       NA       NA       NA       NA    48.164 47.288
#&gt; 29 Afghanistan 1988       NA       NA       NA       NA    49.028 48.164
#&gt; 30 Afghanistan 1989       NA       NA       NA       NA    49.856 49.028
#&gt; 31 Afghanistan 1990       NA       NA       NA       NA    50.627 49.856
#&gt; 32 Afghanistan 1991       NA       NA       NA       NA    51.331 50.627
#&gt; 33 Afghanistan 1992       NA       NA       NA       NA    51.968 51.331
#&gt; 34 Afghanistan 1993       NA       NA       NA       NA    52.539 51.968
#&gt; 35 Afghanistan 1994       NA       NA       NA       NA    53.055 52.539
#&gt; 36 Afghanistan 1995       NA       NA       NA       NA    53.533 53.055
#&gt; 37 Afghanistan 1996       NA       NA       NA       NA    53.997 53.533
#&gt; 38 Afghanistan 1997       NA       NA       NA       NA    54.468 53.997
#&gt; 39 Afghanistan 1998       NA       NA       NA       NA    54.959 54.468
#&gt; 40 Afghanistan 1999       NA       NA       NA       NA    55.482 54.959
#&gt; 41 Afghanistan 2000       NA       NA       NA       NA    56.044 55.482
#&gt; 42 Afghanistan 2001 339.6333       NA       NA       NA    56.637 56.044
#&gt; 43 Afghanistan 2002 352.2440 339.6333       NA       NA    57.250 56.637
#&gt; 44 Afghanistan 2003 341.6125 352.2440 339.6333       NA    57.875 57.250
#&gt; 45 Afghanistan 2004 365.5487 341.6125 352.2440 339.6333    58.500 57.875
#&gt; 46 Afghanistan 2005 372.8967 365.5487 341.6125 352.2440    59.110 58.500
#&gt; 47 Afghanistan 2006 412.9196 372.8967 365.5487 341.6125    59.694 59.110
#&gt; 48 Afghanistan 2007 418.4788 412.9196 372.8967 365.5487    60.243 59.694
#&gt; 49 Afghanistan 2008 495.1089 418.4788 412.9196 372.8967    60.754 60.243
#&gt; 50 Afghanistan 2009 550.5150 495.1089 418.4788 412.9196    61.226 60.754
#&gt; 51 Afghanistan 2010 536.0125 550.5150 495.1089 418.4788    61.666 61.226
#&gt; 52 Afghanistan 2011 584.9074 536.0125 550.5150 495.1089    62.086 61.666
#&gt; 53 Afghanistan 2012 597.5252 584.9074 536.0125 550.5150    62.494 62.086
#&gt; 54 Afghanistan 2013 594.5741 597.5252 584.9074 536.0125    62.895 62.494
#&gt; 55 Afghanistan 2014 585.7083 594.5741 597.5252 584.9074    63.288 62.895
#&gt;    L1.LIFEEX L2.LIFEEX F1.GINI GINI L1.GINI L2.GINI     F1.ODA        ODA
#&gt; 1         NA        NA      NA   NA      NA      NA  233350000  114440000
#&gt; 2     32.292        NA      NA   NA      NA      NA  114880000  233350000
#&gt; 3     32.742    32.292      NA   NA      NA      NA  236450000  114880000
#&gt; 4     33.185    32.742      NA   NA      NA      NA  302480000  236450000
#&gt; 5     33.624    33.185      NA   NA      NA      NA  370250000  302480000
#&gt; 6     34.060    33.624      NA   NA      NA      NA  338270000  370250000
#&gt; 7     34.495    34.060      NA   NA      NA      NA  259230000  338270000
#&gt; 8     34.928    34.495      NA   NA      NA      NA  182000000  259230000
#&gt; 9     35.361    34.928      NA   NA      NA      NA  162680000  182000000
#&gt; 10    35.796    35.361      NA   NA      NA      NA  155750000  162680000
#&gt; 11    36.234    35.796      NA   NA      NA      NA  229150000  155750000
#&gt; 12    36.678    36.234      NA   NA      NA      NA  264750000  229150000
#&gt; 13    37.128    36.678      NA   NA      NA      NA  239560000  264750000
#&gt; 14    37.587    37.128      NA   NA      NA      NA  192540000  239560000
#&gt; 15    38.056    37.587      NA   NA      NA      NA  239710000  192540000
#&gt; 16    38.540    38.056      NA   NA      NA      NA  240350000  239710000
#&gt; 17    39.039    38.540      NA   NA      NA      NA  266470000  240350000
#&gt; 18    39.556    39.039      NA   NA      NA      NA  222870000  266470000
#&gt; 19    40.092    39.556      NA   NA      NA      NA  252370000  222870000
#&gt; 20    40.650    40.092      NA   NA      NA      NA   72610000  252370000
#&gt; 21    41.234    40.650      NA   NA      NA      NA   53620000   72610000
#&gt; 22    41.853    41.234      NA   NA      NA      NA   22660000   53620000
#&gt; 23    42.513    41.853      NA   NA      NA      NA   33650000   22660000
#&gt; 24    43.217    42.513      NA   NA      NA      NA   16750000   33650000
#&gt; 25    43.963    43.217      NA   NA      NA      NA   39890000   16750000
#&gt; 26    44.747    43.963      NA   NA      NA      NA    4200000   39890000
#&gt; 27    45.566    44.747      NA   NA      NA      NA   80740000    4200000
#&gt; 28    46.417    45.566      NA   NA      NA      NA  119540000   80740000
#&gt; 29    47.288    46.417      NA   NA      NA      NA  238500000  119540000
#&gt; 30    48.164    47.288      NA   NA      NA      NA  183250000  238500000
#&gt; 31    49.028    48.164      NA   NA      NA      NA  708640000  183250000
#&gt; 32    49.856    49.028      NA   NA      NA      NA  283700000  708640000
#&gt; 33    50.627    49.856      NA   NA      NA      NA  313320000  283700000
#&gt; 34    51.331    50.627      NA   NA      NA      NA  309760000  313320000
#&gt; 35    51.968    51.331      NA   NA      NA      NA  253210000  309760000
#&gt; 36    52.539    51.968      NA   NA      NA      NA  203990000  253210000
#&gt; 37    53.055    52.539      NA   NA      NA      NA  306200000  203990000
#&gt; 38    53.533    53.055      NA   NA      NA      NA  221180000  306200000
#&gt; 39    53.997    53.533      NA   NA      NA      NA  195990000  221180000
#&gt; 40    54.468    53.997      NA   NA      NA      NA  201260000  195990000
#&gt; 41    54.959    54.468      NA   NA      NA      NA  630540000  201260000
#&gt; 42    55.482    54.959      NA   NA      NA      NA 1797060000  630540000
#&gt; 43    56.044    55.482      NA   NA      NA      NA 1928200000 1797060000
#&gt; 44    56.637    56.044      NA   NA      NA      NA 2592760000 1928200000
#&gt; 45    57.250    56.637      NA   NA      NA      NA 3166480000 2592760000
#&gt; 46    57.875    57.250      NA   NA      NA      NA 3201560000 3166480000
#&gt; 47    58.500    57.875      NA   NA      NA      NA 5033950000 3201560000
#&gt; 48    59.110    58.500      NA   NA      NA      NA 4754710000 5033950000
#&gt; 49    59.694    59.110      NA   NA      NA      NA 6265080000 4754710000
#&gt; 50    60.243    59.694      NA   NA      NA      NA 6357280000 6265080000
#&gt; 51    60.754    60.243      NA   NA      NA      NA 6434100000 6357280000
#&gt; 52    61.226    60.754      NA   NA      NA      NA 6233970000 6434100000
#&gt; 53    61.666    61.226      NA   NA      NA      NA 4798270000 6233970000
#&gt; 54    62.086    61.666      NA   NA      NA      NA 4603680000 4798270000
#&gt; 55    62.494    62.086      NA   NA      NA      NA 4271360000 4603680000
#&gt;        L1.ODA     L2.ODA
#&gt; 1          NA         NA
#&gt; 2   114440000         NA
#&gt; 3   233350000  114440000
#&gt; 4   114880000  233350000
#&gt; 5   236450000  114880000
#&gt; 6   302480000  236450000
#&gt; 7   370250000  302480000
#&gt; 8   338270000  370250000
#&gt; 9   259230000  338270000
#&gt; 10  182000000  259230000
#&gt; 11  162680000  182000000
#&gt; 12  155750000  162680000
#&gt; 13  229150000  155750000
#&gt; 14  264750000  229150000
#&gt; 15  239560000  264750000
#&gt; 16  192540000  239560000
#&gt; 17  239710000  192540000
#&gt; 18  240350000  239710000
#&gt; 19  266470000  240350000
#&gt; 20  222870000  266470000
#&gt; 21  252370000  222870000
#&gt; 22   72610000  252370000
#&gt; 23   53620000   72610000
#&gt; 24   22660000   53620000
#&gt; 25   33650000   22660000
#&gt; 26   16750000   33650000
#&gt; 27   39890000   16750000
#&gt; 28    4200000   39890000
#&gt; 29   80740000    4200000
#&gt; 30  119540000   80740000
#&gt; 31  238500000  119540000
#&gt; 32  183250000  238500000
#&gt; 33  708640000  183250000
#&gt; 34  283700000  708640000
#&gt; 35  313320000  283700000
#&gt; 36  309760000  313320000
#&gt; 37  253210000  309760000
#&gt; 38  203990000  253210000
#&gt; 39  306200000  203990000
#&gt; 40  221180000  306200000
#&gt; 41  195990000  221180000
#&gt; 42  201260000  195990000
#&gt; 43  630540000  201260000
#&gt; 44 1797060000  630540000
#&gt; 45 1928200000 1797060000
#&gt; 46 2592760000 1928200000
#&gt; 47 3166480000 2592760000
#&gt; 48 3201560000 3166480000
#&gt; 49 5033950000 3201560000
#&gt; 50 4754710000 5033950000
#&gt; 51 6265080000 4754710000
#&gt; 52 6357280000 6265080000
#&gt; 53 6434100000 6357280000
#&gt; 54 6233970000 6434100000
#&gt; 55 4798270000 6233970000
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12689 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'><span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Adding 1 lead and 10-year growth rates</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fgrowth.html'>fgrowth</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        country year    PCGDP   G1.PCGDP L10G1.PCGDP LIFEEX G1.LIFEEX
#&gt; 1  Afghanistan 1960       NA         NA          NA 32.292        NA
#&gt; 2  Afghanistan 1961       NA         NA          NA 32.742 1.3935340
#&gt; 3  Afghanistan 1962       NA         NA          NA 33.185 1.3530023
#&gt; 4  Afghanistan 1963       NA         NA          NA 33.624 1.3228868
#&gt; 5  Afghanistan 1964       NA         NA          NA 34.060 1.2966928
#&gt; 6  Afghanistan 1965       NA         NA          NA 34.495 1.2771580
#&gt; 7  Afghanistan 1966       NA         NA          NA 34.928 1.2552544
#&gt; 8  Afghanistan 1967       NA         NA          NA 35.361 1.2396931
#&gt; 9  Afghanistan 1968       NA         NA          NA 35.796 1.2301688
#&gt; 10 Afghanistan 1969       NA         NA          NA 36.234 1.2236004
#&gt; 11 Afghanistan 1970       NA         NA          NA 36.678 1.2253684
#&gt; 12 Afghanistan 1971       NA         NA          NA 37.128 1.2268935
#&gt; 13 Afghanistan 1972       NA         NA          NA 37.587 1.2362637
#&gt; 14 Afghanistan 1973       NA         NA          NA 38.056 1.2477718
#&gt; 15 Afghanistan 1974       NA         NA          NA 38.540 1.2718100
#&gt; 16 Afghanistan 1975       NA         NA          NA 39.039 1.2947587
#&gt; 17 Afghanistan 1976       NA         NA          NA 39.556 1.3243167
#&gt; 18 Afghanistan 1977       NA         NA          NA 40.092 1.3550410
#&gt; 19 Afghanistan 1978       NA         NA          NA 40.650 1.3917989
#&gt; 20 Afghanistan 1979       NA         NA          NA 41.234 1.4366544
#&gt; 21 Afghanistan 1980       NA         NA          NA 41.853 1.5011883
#&gt; 22 Afghanistan 1981       NA         NA          NA 42.513 1.5769479
#&gt; 23 Afghanistan 1982       NA         NA          NA 43.217 1.6559641
#&gt; 24 Afghanistan 1983       NA         NA          NA 43.963 1.7261726
#&gt; 25 Afghanistan 1984       NA         NA          NA 44.747 1.7833178
#&gt; 26 Afghanistan 1985       NA         NA          NA 45.566 1.8302903
#&gt; 27 Afghanistan 1986       NA         NA          NA 46.417 1.8676206
#&gt; 28 Afghanistan 1987       NA         NA          NA 47.288 1.8764677
#&gt; 29 Afghanistan 1988       NA         NA          NA 48.164 1.8524784
#&gt; 30 Afghanistan 1989       NA         NA          NA 49.028 1.7938709
#&gt; 31 Afghanistan 1990       NA         NA          NA 49.856 1.6888309
#&gt; 32 Afghanistan 1991       NA         NA          NA 50.627 1.5464538
#&gt; 33 Afghanistan 1992       NA         NA          NA 51.331 1.3905623
#&gt; 34 Afghanistan 1993       NA         NA          NA 51.968 1.2409655
#&gt; 35 Afghanistan 1994       NA         NA          NA 52.539 1.0987531
#&gt; 36 Afghanistan 1995       NA         NA          NA 53.055 0.9821276
#&gt; 37 Afghanistan 1996       NA         NA          NA 53.533 0.9009518
#&gt; 38 Afghanistan 1997       NA         NA          NA 53.997 0.8667551
#&gt; 39 Afghanistan 1998       NA         NA          NA 54.468 0.8722707
#&gt; 40 Afghanistan 1999       NA         NA          NA 54.959 0.9014467
#&gt; 41 Afghanistan 2000       NA         NA          NA 55.482 0.9516185
#&gt; 42 Afghanistan 2001       NA         NA          NA 56.044 1.0129411
#&gt; 43 Afghanistan 2002 339.6333         NA          NA 56.637 1.0580972
#&gt; 44 Afghanistan 2003 352.2440  3.7130084          NA 57.250 1.0823313
#&gt; 45 Afghanistan 2004 341.6125 -3.0182198          NA 57.875 1.0917031
#&gt; 46 Afghanistan 2005 365.5487  7.0068514          NA 58.500 1.0799136
#&gt; 47 Afghanistan 2006 372.8967  2.0101290          NA 59.110 1.0427350
#&gt; 48 Afghanistan 2007 412.9196 10.7329581          NA 59.694 0.9879885
#&gt; 49 Afghanistan 2008 418.4788  1.3463229          NA 60.243 0.9196904
#&gt; 50 Afghanistan 2009 495.1089 18.3115871          NA 60.754 0.8482313
#&gt; 51 Afghanistan 2010 550.5150 11.1906779          NA 61.226 0.7769036
#&gt; 52 Afghanistan 2011 536.0125 -2.6343495          NA 61.666 0.7186489
#&gt; 53 Afghanistan 2012 584.9074  9.1219685    72.21730 62.086 0.6810884
#&gt; 54 Afghanistan 2013 597.5252  2.1572386    69.63392 62.494 0.6571530
#&gt; 55 Afghanistan 2014 594.5741 -0.4938894    74.04931 62.895 0.6416616
#&gt; 56 Afghanistan 2015 585.7083 -1.4911213    60.22714 63.288 0.6248509
#&gt; 57 Afghanistan 2016 583.0551 -0.4529868    56.35833 63.673 0.6083302
#&gt; 58 Afghanistan 2017 583.8696  0.1396998    41.40032     NA        NA
#&gt; 59 Afghanistan 2018       NA         NA          NA     NA        NA
#&gt; 60     Albania 1960       NA         NA          NA 62.279        NA
#&gt; 61     Albania 1961       NA         NA          NA 63.298 1.6361856
#&gt; 62     Albania 1962       NA         NA          NA 64.187 1.4044678
#&gt; 63     Albania 1963       NA         NA          NA 64.911 1.1279543
#&gt; 64     Albania 1964       NA         NA          NA 65.461 0.8473140
#&gt; 65     Albania 1965       NA         NA          NA 65.848 0.5911917
#&gt; 66     Albania 1966       NA         NA          NA 66.108 0.3948487
#&gt; 67     Albania 1967       NA         NA          NA 66.302 0.2934592
#&gt; 68     Albania 1968       NA         NA          NA 66.485 0.2760098
#&gt; 69     Albania 1969       NA         NA          NA 66.687 0.3038279
#&gt; 70     Albania 1970       NA         NA          NA 66.933 0.3688875
#&gt; 71     Albania 1971       NA         NA          NA 67.235 0.4511975
#&gt;    L10G1.LIFEEX GINI G1.GINI L10G1.GINI        ODA       G1.ODA   L10G1.ODA
#&gt; 1            NA   NA      NA         NA  114440000           NA          NA
#&gt; 2            NA   NA      NA         NA  233350000  103.9059769          NA
#&gt; 3            NA   NA      NA         NA  114880000  -50.7692308          NA
#&gt; 4            NA   NA      NA         NA  236450000  105.8234680          NA
#&gt; 5            NA   NA      NA         NA  302480000   27.9255657          NA
#&gt; 6            NA   NA      NA         NA  370250000   22.4047871          NA
#&gt; 7            NA   NA      NA         NA  338270000   -8.6374072          NA
#&gt; 8            NA   NA      NA         NA  259230000  -23.3659503          NA
#&gt; 9            NA   NA      NA         NA  182000000  -29.7920765          NA
#&gt; 10           NA   NA      NA         NA  162680000  -10.6153846          NA
#&gt; 11    13.582311   NA      NA         NA  155750000   -4.2598967   36.097518
#&gt; 12    13.395639   NA      NA         NA  229150000   47.1268058   -1.799871
#&gt; 13    13.265029   NA      NA         NA  264750000   15.5356753  130.457869
#&gt; 14    13.181061   NA      NA         NA  239560000   -9.5146364    1.315289
#&gt; 15    13.153259   NA      NA         NA  192540000  -19.6276507  -36.346205
#&gt; 16    13.172924   NA      NA         NA  239710000   24.4988054  -35.257259
#&gt; 17    13.250115   NA      NA         NA  240350000    0.2669893  -28.947291
#&gt; 18    13.379147   NA      NA         NA  266470000   10.8674849    2.792887
#&gt; 19    13.560174   NA      NA         NA  222870000  -16.3620670   22.456044
#&gt; 20    13.799194   NA      NA         NA  252370000   13.2364158   55.132776
#&gt; 21    14.109275   NA      NA         NA   72610000  -71.2287514  -53.380417
#&gt; 22    14.503878   NA      NA         NA   53620000  -26.1534224  -76.600480
#&gt; 23    14.978583   NA      NA         NA   22660000  -57.7396494  -91.440982
#&gt; 24    15.521863   NA      NA         NA   33650000   48.4995587  -85.953415
#&gt; 25    16.105345   NA      NA         NA   16750000  -50.2228826  -91.300509
#&gt; 26    16.719178   NA      NA         NA   39890000  138.1492537  -83.359059
#&gt; 27    17.345030   NA      NA         NA    4200000  -89.4710454  -98.252548
#&gt; 28    17.948718   NA      NA         NA   80740000 1822.3809524  -69.700154
#&gt; 29    18.484625   NA      NA         NA  119540000   48.0554867  -46.363351
#&gt; 30    18.901877   NA      NA         NA  238500000   99.5148068   -5.495899
#&gt; 31    19.121688   NA      NA         NA  183250000  -23.1656184  152.375706
#&gt; 32    19.085927   NA      NA         NA  708640000  286.7066849 1221.596419
#&gt; 33    18.775019   NA      NA         NA  283700000  -59.9655678 1151.985878
#&gt; 34    18.208494   NA      NA         NA  313320000   10.4406063  831.114413
#&gt; 35    17.413458   NA      NA         NA  309760000   -1.1362186 1749.313433
#&gt; 36    16.435500   NA      NA         NA  253210000  -18.2560692  534.770619
#&gt; 37    15.330590   NA      NA         NA  203990000  -19.4384108 4756.904762
#&gt; 38    14.187532   NA      NA         NA  306200000   50.1053973  279.242011
#&gt; 39    13.088614   NA      NA         NA  221180000  -27.7661659   85.025933
#&gt; 40    12.097169   NA      NA         NA  195990000  -11.3889140  -17.823899
#&gt; 41    11.284499   NA      NA         NA  201260000    2.6889127    9.828104
#&gt; 42    10.699824   NA      NA         NA  630540000  213.2962337  -11.021111
#&gt; 43    10.336833   NA      NA         NA 1797060000  185.0033305  533.436729
#&gt; 44    10.163947   NA      NA         NA 1928200000    7.2974748  515.409166
#&gt; 45    10.156265   NA      NA         NA 2592760000   34.4653044  737.022211
#&gt; 46    10.262935   NA      NA         NA 3166480000   22.1277712 1150.535129
#&gt; 47    10.417873   NA      NA         NA 3201560000    1.1078548 1469.469092
#&gt; 48    10.550586   NA      NA         NA 5033950000   57.2342858 1544.007185
#&gt; 49    10.602556   NA      NA         NA 4754710000   -5.5471350 2049.701601
#&gt; 50    10.544224   NA      NA         NA 6265080000   31.7657649 3096.632481
#&gt; 51    10.352907   NA      NA         NA 6357280000    1.4716492 3058.739938
#&gt; 52    10.031404   NA      NA         NA 6434100000    1.2083784  920.411076
#&gt; 53     9.620919   NA      NA         NA 6233970000   -3.1104583  246.898267
#&gt; 54     9.159825   NA      NA         NA 4798270000  -23.0302680  148.847111
#&gt; 55     8.673866   NA      NA         NA 4603680000   -4.0554200   77.559049
#&gt; 56     8.184615   NA      NA         NA 4271360000   -7.2185730   34.893004
#&gt; 57     7.719506   NA      NA         NA 4069210000   -4.7326847   27.100851
#&gt; 58           NA   NA      NA         NA 3743840000   -7.9959009  -25.628185
#&gt; 59           NA   NA      NA         NA         NA           NA          NA
#&gt; 60           NA   NA      NA         NA         NA           NA          NA
#&gt; 61           NA   NA      NA         NA         NA           NA          NA
#&gt; 62           NA   NA      NA         NA         NA           NA          NA
#&gt; 63           NA   NA      NA         NA         NA           NA          NA
#&gt; 64           NA   NA      NA         NA         NA           NA          NA
#&gt; 65           NA   NA      NA         NA         NA           NA          NA
#&gt; 66           NA   NA      NA         NA         NA           NA          NA
#&gt; 67           NA   NA      NA         NA         NA           NA          NA
#&gt; 68           NA   NA      NA         NA         NA           NA          NA
#&gt; 69           NA   NA      NA         NA         NA           NA          NA
#&gt; 70     7.472824   NA      NA         NA         NA           NA          NA
#&gt; 71     6.219786   NA      NA         NA         NA           NA          NA
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12673 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'>
<span class='co'># etc...</span>

<span class='co'># Aggregation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='GRP, fgroup_by.html'>fgroup_vars</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='st'>"unique"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='AA2-small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"median_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='AA2-small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"mean_"</span><span class='op'>)</span>,
             <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>.</span>, keep.group_vars <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='AA2-small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"sd_"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span> <span class='op'>%&gt;%</span> <span class='va'>head</span>
</div><div class='output co'>#&gt;                  region              income median_PCGDP median_LIFEEX
#&gt; 1   East Asia &amp; Pacific         High income   32191.9487      78.13400
#&gt; 2   East Asia &amp; Pacific Lower middle income    1643.6158      65.64000
#&gt; 3   East Asia &amp; Pacific Upper middle income    3487.8458      71.38050
#&gt; 4 Europe &amp; Central Asia         High income   36186.2146      77.96585
#&gt; 5 Europe &amp; Central Asia          Low income     660.5606      66.94500
#&gt; 6 Europe &amp; Central Asia Lower middle income    1616.9528      68.68306
#&gt;   median_GINI median_ODA mean_PCGDP mean_LIFEEX mean_GINI  mean_ODA   sd_PCGDP
#&gt; 1       32.45    9900000 31866.6810    78.07547  32.94000 104154478 12879.3223
#&gt; 2       35.60  260080000  1782.6410    65.17163  36.21081 506935071   913.8306
#&gt; 3       41.65   51120000  4458.8571    71.33153  41.67500 229342181  2476.9113
#&gt; 4       31.05  136890000 40560.6371    77.30871  30.90235 338714013 28958.5384
#&gt; 5       32.45  246775000   661.1513    66.86819  32.13333 236933846   220.7131
#&gt; 6       32.10  322680000  1850.9824    69.18382  32.69570 375904326  1014.3409
#&gt;   sd_LIFEEX  sd_GINI    sd_ODA
#&gt; 1  3.541889 1.300598 209769666
#&gt; 2  4.746286 4.830619 699284817
#&gt; 3  2.621192 3.516116 681338565
#&gt; 4  3.730004 3.595416 663664130
#&gt; 5  2.927809 1.713087 112397977
#&gt; 6  1.907053 5.322775 255897099</div><div class='input'>
<span class='co'># Transformation with multiple functions</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='op'>{</span>
    <span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>fdiff</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span><span class='op'>)</span>,  <span class='co'># Sequence of lagged differences</span>
             <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>fwithin</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='AA2-small-helpers.html'>add_stub</a></span><span class='op'>(</span><span class='st'>"W."</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
               <span class='fu'><a href='flag.html'>flag</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>:</span><span class='fl'>2</span>, <span class='va'>year</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>             <span class='co'># Sequence of lagged demeaned vars</span>
  <span class='op'>}</span>
</div><div class='output co'>#&gt;        country year D1.PCGDP L1.D1.PCGDP L2.D1.PCGDP L10D1.PCGDP L1.L10D1.PCGDP
#&gt; 1  Afghanistan 1960       NA          NA          NA          NA             NA
#&gt; 2  Afghanistan 1961       NA          NA          NA          NA             NA
#&gt; 3  Afghanistan 1962       NA          NA          NA          NA             NA
#&gt; 4  Afghanistan 1963       NA          NA          NA          NA             NA
#&gt; 5  Afghanistan 1964       NA          NA          NA          NA             NA
#&gt; 6  Afghanistan 1965       NA          NA          NA          NA             NA
#&gt; 7  Afghanistan 1966       NA          NA          NA          NA             NA
#&gt; 8  Afghanistan 1967       NA          NA          NA          NA             NA
#&gt; 9  Afghanistan 1968       NA          NA          NA          NA             NA
#&gt; 10 Afghanistan 1969       NA          NA          NA          NA             NA
#&gt; 11 Afghanistan 1970       NA          NA          NA          NA             NA
#&gt; 12 Afghanistan 1971       NA          NA          NA          NA             NA
#&gt; 13 Afghanistan 1972       NA          NA          NA          NA             NA
#&gt; 14 Afghanistan 1973       NA          NA          NA          NA             NA
#&gt; 15 Afghanistan 1974       NA          NA          NA          NA             NA
#&gt; 16 Afghanistan 1975       NA          NA          NA          NA             NA
#&gt; 17 Afghanistan 1976       NA          NA          NA          NA             NA
#&gt; 18 Afghanistan 1977       NA          NA          NA          NA             NA
#&gt; 19 Afghanistan 1978       NA          NA          NA          NA             NA
#&gt; 20 Afghanistan 1979       NA          NA          NA          NA             NA
#&gt;    L2.L10D1.PCGDP D1.LIFEEX L1.D1.LIFEEX L2.D1.LIFEEX L10D1.LIFEEX
#&gt; 1              NA        NA           NA           NA           NA
#&gt; 2              NA     0.450           NA           NA           NA
#&gt; 3              NA     0.443        0.450           NA           NA
#&gt; 4              NA     0.439        0.443        0.450           NA
#&gt; 5              NA     0.436        0.439        0.443           NA
#&gt; 6              NA     0.435        0.436        0.439           NA
#&gt; 7              NA     0.433        0.435        0.436           NA
#&gt; 8              NA     0.433        0.433        0.435           NA
#&gt; 9              NA     0.435        0.433        0.433           NA
#&gt; 10             NA     0.438        0.435        0.433           NA
#&gt; 11             NA     0.444        0.438        0.435        4.386
#&gt; 12             NA     0.450        0.444        0.438        4.386
#&gt; 13             NA     0.459        0.450        0.444        4.402
#&gt; 14             NA     0.469        0.459        0.450        4.432
#&gt; 15             NA     0.484        0.469        0.459        4.480
#&gt; 16             NA     0.499        0.484        0.469        4.544
#&gt; 17             NA     0.517        0.499        0.484        4.628
#&gt; 18             NA     0.536        0.517        0.499        4.731
#&gt; 19             NA     0.558        0.536        0.517        4.854
#&gt; 20             NA     0.584        0.558        0.536        5.000
#&gt;    L1.L10D1.LIFEEX L2.L10D1.LIFEEX D1.GINI L1.D1.GINI L2.D1.GINI L10D1.GINI
#&gt; 1               NA              NA      NA         NA         NA         NA
#&gt; 2               NA              NA      NA         NA         NA         NA
#&gt; 3               NA              NA      NA         NA         NA         NA
#&gt; 4               NA              NA      NA         NA         NA         NA
#&gt; 5               NA              NA      NA         NA         NA         NA
#&gt; 6               NA              NA      NA         NA         NA         NA
#&gt; 7               NA              NA      NA         NA         NA         NA
#&gt; 8               NA              NA      NA         NA         NA         NA
#&gt; 9               NA              NA      NA         NA         NA         NA
#&gt; 10              NA              NA      NA         NA         NA         NA
#&gt; 11              NA              NA      NA         NA         NA         NA
#&gt; 12           4.386              NA      NA         NA         NA         NA
#&gt; 13           4.386           4.386      NA         NA         NA         NA
#&gt; 14           4.402           4.386      NA         NA         NA         NA
#&gt; 15           4.432           4.402      NA         NA         NA         NA
#&gt; 16           4.480           4.432      NA         NA         NA         NA
#&gt; 17           4.544           4.480      NA         NA         NA         NA
#&gt; 18           4.628           4.544      NA         NA         NA         NA
#&gt; 19           4.731           4.628      NA         NA         NA         NA
#&gt; 20           4.854           4.731      NA         NA         NA         NA
#&gt;    L1.L10D1.GINI L2.L10D1.GINI     D1.ODA  L1.D1.ODA  L2.D1.ODA  L10D1.ODA
#&gt; 1             NA            NA         NA         NA         NA         NA
#&gt; 2             NA            NA  118910000         NA         NA         NA
#&gt; 3             NA            NA -118470000  118910000         NA         NA
#&gt; 4             NA            NA  121570000 -118470000  118910000         NA
#&gt; 5             NA            NA   66030000  121570000 -118470000         NA
#&gt; 6             NA            NA   67770000   66030000  121570000         NA
#&gt; 7             NA            NA  -31980000   67770000   66030000         NA
#&gt; 8             NA            NA  -79040000  -31980000   67770000         NA
#&gt; 9             NA            NA  -77230000  -79040000  -31980000         NA
#&gt; 10            NA            NA  -19320000  -77230000  -79040000         NA
#&gt; 11            NA            NA   -6930000  -19320000  -77230000   41310000
#&gt; 12            NA            NA   73400000   -6930000  -19320000   -4200000
#&gt; 13            NA            NA   35600000   73400000   -6930000  149870000
#&gt; 14            NA            NA  -25190000   35600000   73400000    3110000
#&gt; 15            NA            NA  -47020000  -25190000   35600000 -109940000
#&gt; 16            NA            NA   47170000  -47020000  -25190000 -130540000
#&gt; 17            NA            NA     640000   47170000  -47020000  -97920000
#&gt; 18            NA            NA   26120000     640000   47170000    7240000
#&gt; 19            NA            NA  -43600000   26120000     640000   40870000
#&gt; 20            NA            NA   29500000  -43600000   26120000   89690000
#&gt;    L1.L10D1.ODA L2.L10D1.ODA PCGDP L1.PCGDP L2.PCGDP LIFEEX L1.LIFEEX L2.LIFEEX
#&gt; 1            NA           NA    NA       NA       NA 32.292        NA        NA
#&gt; 2            NA           NA    NA       NA       NA 32.742    32.292        NA
#&gt; 3            NA           NA    NA       NA       NA 33.185    32.742    32.292
#&gt; 4            NA           NA    NA       NA       NA 33.624    33.185    32.742
#&gt; 5            NA           NA    NA       NA       NA 34.060    33.624    33.185
#&gt; 6            NA           NA    NA       NA       NA 34.495    34.060    33.624
#&gt; 7            NA           NA    NA       NA       NA 34.928    34.495    34.060
#&gt; 8            NA           NA    NA       NA       NA 35.361    34.928    34.495
#&gt; 9            NA           NA    NA       NA       NA 35.796    35.361    34.928
#&gt; 10           NA           NA    NA       NA       NA 36.234    35.796    35.361
#&gt; 11           NA           NA    NA       NA       NA 36.678    36.234    35.796
#&gt; 12     41310000           NA    NA       NA       NA 37.128    36.678    36.234
#&gt; 13     -4200000     41310000    NA       NA       NA 37.587    37.128    36.678
#&gt; 14    149870000     -4200000    NA       NA       NA 38.056    37.587    37.128
#&gt; 15      3110000    149870000    NA       NA       NA 38.540    38.056    37.587
#&gt; 16   -109940000      3110000    NA       NA       NA 39.039    38.540    38.056
#&gt; 17   -130540000   -109940000    NA       NA       NA 39.556    39.039    38.540
#&gt; 18    -97920000   -130540000    NA       NA       NA 40.092    39.556    39.039
#&gt; 19      7240000    -97920000    NA       NA       NA 40.650    40.092    39.556
#&gt; 20     40870000      7240000    NA       NA       NA 41.234    40.650    40.092
#&gt;    GINI L1.GINI L2.GINI       ODA    L1.ODA    L2.ODA W.PCGDP L1.W.PCGDP
#&gt; 1    NA      NA      NA 114440000        NA        NA      NA         NA
#&gt; 2    NA      NA      NA 233350000 114440000        NA      NA         NA
#&gt; 3    NA      NA      NA 114880000 233350000 114440000      NA         NA
#&gt; 4    NA      NA      NA 236450000 114880000 233350000      NA         NA
#&gt; 5    NA      NA      NA 302480000 236450000 114880000      NA         NA
#&gt; 6    NA      NA      NA 370250000 302480000 236450000      NA         NA
#&gt; 7    NA      NA      NA 338270000 370250000 302480000      NA         NA
#&gt; 8    NA      NA      NA 259230000 338270000 370250000      NA         NA
#&gt; 9    NA      NA      NA 182000000 259230000 338270000      NA         NA
#&gt; 10   NA      NA      NA 162680000 182000000 259230000      NA         NA
#&gt; 11   NA      NA      NA 155750000 162680000 182000000      NA         NA
#&gt; 12   NA      NA      NA 229150000 155750000 162680000      NA         NA
#&gt; 13   NA      NA      NA 264750000 229150000 155750000      NA         NA
#&gt; 14   NA      NA      NA 239560000 264750000 229150000      NA         NA
#&gt; 15   NA      NA      NA 192540000 239560000 264750000      NA         NA
#&gt; 16   NA      NA      NA 239710000 192540000 239560000      NA         NA
#&gt; 17   NA      NA      NA 240350000 239710000 192540000      NA         NA
#&gt; 18   NA      NA      NA 266470000 240350000 239710000      NA         NA
#&gt; 19   NA      NA      NA 222870000 266470000 240350000      NA         NA
#&gt; 20   NA      NA      NA 252370000 222870000 266470000      NA         NA
#&gt;    L2.W.PCGDP   W.LIFEEX L1.W.LIFEEX L2.W.LIFEEX W.GINI L1.W.GINI L2.W.GINI
#&gt; 1          NA -15.590158          NA          NA     NA        NA        NA
#&gt; 2          NA -15.140158  -15.590158          NA     NA        NA        NA
#&gt; 3          NA -14.697158  -15.140158  -15.590158     NA        NA        NA
#&gt; 4          NA -14.258158  -14.697158  -15.140158     NA        NA        NA
#&gt; 5          NA -13.822158  -14.258158  -14.697158     NA        NA        NA
#&gt; 6          NA -13.387158  -13.822158  -14.258158     NA        NA        NA
#&gt; 7          NA -12.954158  -13.387158  -13.822158     NA        NA        NA
#&gt; 8          NA -12.521158  -12.954158  -13.387158     NA        NA        NA
#&gt; 9          NA -12.086158  -12.521158  -12.954158     NA        NA        NA
#&gt; 10         NA -11.648158  -12.086158  -12.521158     NA        NA        NA
#&gt; 11         NA -11.204158  -11.648158  -12.086158     NA        NA        NA
#&gt; 12         NA -10.754158  -11.204158  -11.648158     NA        NA        NA
#&gt; 13         NA -10.295158  -10.754158  -11.204158     NA        NA        NA
#&gt; 14         NA  -9.826158  -10.295158  -10.754158     NA        NA        NA
#&gt; 15         NA  -9.342158   -9.826158  -10.295158     NA        NA        NA
#&gt; 16         NA  -8.843158   -9.342158   -9.826158     NA        NA        NA
#&gt; 17         NA  -8.326158   -8.843158   -9.342158     NA        NA        NA
#&gt; 18         NA  -7.790158   -8.326158   -8.843158     NA        NA        NA
#&gt; 19         NA  -7.232158   -7.790158   -8.326158     NA        NA        NA
#&gt; 20         NA  -6.648158   -7.232158   -7.790158     NA        NA        NA
#&gt;          W.ODA    L1.W.ODA    L2.W.ODA
#&gt; 1  -1236633448          NA          NA
#&gt; 2  -1117723448 -1236633448          NA
#&gt; 3  -1236193448 -1117723448 -1236633448
#&gt; 4  -1114623448 -1236193448 -1117723448
#&gt; 5  -1048593448 -1114623448 -1236193448
#&gt; 6   -980823448 -1048593448 -1114623448
#&gt; 7  -1012803448  -980823448 -1048593448
#&gt; 8  -1091843448 -1012803448  -980823448
#&gt; 9  -1169073448 -1091843448 -1012803448
#&gt; 10 -1188393448 -1169073448 -1091843448
#&gt; 11 -1195323448 -1188393448 -1169073448
#&gt; 12 -1121923448 -1195323448 -1188393448
#&gt; 13 -1086323448 -1121923448 -1195323448
#&gt; 14 -1111513448 -1086323448 -1121923448
#&gt; 15 -1158533448 -1111513448 -1086323448
#&gt; 16 -1111363448 -1158533448 -1111513448
#&gt; 17 -1110723448 -1111363448 -1158533448
#&gt; 18 -1084603448 -1110723448 -1111363448
#&gt; 19 -1128203448 -1084603448 -1110723448
#&gt; 20 -1098703448 -1128203448 -1084603448
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 12724 rows ]
#&gt; 
#&gt; Grouped by:  country  [216 | 59 (0)] </div><div class='input'>
<span class='co'># With ftransform, can also easily do one or more grouped mutations on the fly..</span>
<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, median_ODA <span class='op'>=</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='ftransform.html'>settransform</a></span><span class='op'>(</span><span class='va'>wlddev</span>, sd_ODA <span class='op'>=</span> <span class='fu'><a href='fvar, fsd.html'>fsd</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
                     mean_GDP <span class='op'>=</span> <span class='fu'><a href='fmean.html'>fmean</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='va'>country</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>wlddev</span> <span class='op'>%&lt;&gt;%</span> <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span><span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>median_ODA <span class='op'>=</span> <span class='va'>ODA</span>, median_GDP <span class='op'>=</span> <span class='va'>PCGDP</span><span class='op'>)</span>,
                               <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span>

<span class='co'>## For multi-type data aggregation, the function collap offers ease and flexibility</span>
<span class='co'># Aggregate this data by country and decade: Numeric columns with mean, categorical with mode</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date   year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1961-01-01 1962.5   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1967-01-01 1970.0   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1976-01-01 1980.0   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 1987-01-01 1990.0   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 1996-01-01 2000.0   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2007-01-01 2010.0   2010 South Asia Low income FALSE
#&gt;      PCGDP   LIFEEX GINI        ODA
#&gt; 1       NA 33.39967   NA  228641667
#&gt; 2       NA 36.70089   NA  224881111
#&gt; 3       NA 42.03909   NA  132813636
#&gt; 4       NA 49.69089   NA  249072222
#&gt; 5 349.7596 55.61818   NA 1045170000
#&gt; 6 506.9931 61.12978   NA 5298066667</div><div class='input'>
<span class='va'>wlddev</span><span class='op'>[[</span><span class='st'>"weights"</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='AA2-small-helpers.html'>fnrow</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Adding some weights</span>
<span class='co'># taking weighted mean and weighted mode:</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>, <span class='va'>fmean</span>, <span class='va'>fmode</span>, w <span class='op'>=</span> <span class='op'>~</span> <span class='va'>weights</span>, wFUN <span class='op'>=</span> <span class='va'>fsum</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country iso3c       date     year decade     region     income  OECD
#&gt; 1 Afghanistan   AFG 1963-01-01 1962.455   1960 South Asia Low income FALSE
#&gt; 2 Afghanistan   AFG 1969-01-01 1969.976   1970 South Asia Low income FALSE
#&gt; 3 Afghanistan   AFG 1976-01-01 1979.595   1980 South Asia Low income FALSE
#&gt; 4 Afghanistan   AFG 1987-01-01 1990.179   1990 South Asia Low income FALSE
#&gt; 5 Afghanistan   AFG 1998-01-01 1998.958   2000 South Asia Low income FALSE
#&gt; 6 Afghanistan   AFG 2015-01-01 2011.331   2010 South Asia Low income FALSE
#&gt;      PCGDP   LIFEEX GINI        ODA   weights
#&gt; 1       NA 33.38129   NA  205388862  5.534996
#&gt; 2       NA 36.68732   NA  209241929  7.354317
#&gt; 3       NA 41.78646   NA  139785802 10.232137
#&gt; 4       NA 49.78825   NA  203706137  6.922489
#&gt; 5 345.1363 55.03691   NA  709400102 12.194869
#&gt; 6 543.4275 61.73440   NA 5172607345  7.910630</div><div class='input'>
<span class='co'># Multi-function aggregation of certain columns</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>fmedian</span>, <span class='va'>fsd</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>ffirst</span>, <span class='va'>flast</span><span class='op'>)</span>, cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country ffirst.date flast.date decade fmean.PCGDP fmedian.PCGDP fsd.PCGDP
#&gt; 1 Afghanistan  1961-01-01 1966-01-01   1960          NA            NA        NA
#&gt; 2 Afghanistan  1967-01-01 1975-01-01   1970          NA            NA        NA
#&gt; 3 Afghanistan  1976-01-01 1986-01-01   1980          NA            NA        NA
#&gt; 4 Afghanistan  1987-01-01 1995-01-01   1990          NA            NA        NA
#&gt; 5 Afghanistan  1996-01-01 2006-01-01   2000    349.7596      346.9282  11.89378
#&gt; 6 Afghanistan  2007-01-01 2015-01-01   2010    506.9931      536.0125  86.22723
#&gt;   fmean.LIFEEX fmedian.LIFEEX fsd.LIFEEX fmean.GINI fmedian.GINI fsd.GINI
#&gt; 1     33.39967        33.4045  0.8236083         NA           NA       NA
#&gt; 2     36.70089        36.6780  1.2329864         NA           NA       NA
#&gt; 3     42.03909        41.8530  2.1599808         NA           NA       NA
#&gt; 4     49.69089        49.8560  2.1258392         NA           NA       NA
#&gt; 5     55.61818        55.4820  1.8056120         NA           NA       NA
#&gt; 6     61.12978        61.2260  1.2872844         NA           NA       NA
#&gt;    fmean.ODA fmedian.ODA    fsd.ODA
#&gt; 1  228641667   234900000  101559732
#&gt; 2  224881111   229150000   58515953
#&gt; 3  132813636    72610000  108271755
#&gt; 4  249072222   238500000  203018929
#&gt; 5 1045170000   306200000 1113781886
#&gt; 6 5298066667  5033950000 1102034385</div><div class='input'>
<span class='co'># Customized Aggregation: Assign columns to functions</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='collap.html'>collap</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span> <span class='op'>+</span> <span class='va'>decade</span>,
            custom <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>fmean <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>10</span>, fsd <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, flast <span class='op'>=</span> <span class='fl'>3</span>, ffirst <span class='op'>=</span> <span class='fl'>6</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country flast.date decade ffirst.region ffirst.income ffirst.OECD
#&gt; 1 Afghanistan 1966-01-01   1960    South Asia    Low income       FALSE
#&gt; 2 Afghanistan 1975-01-01   1970    South Asia    Low income       FALSE
#&gt; 3 Afghanistan 1986-01-01   1980    South Asia    Low income       FALSE
#&gt; 4 Afghanistan 1995-01-01   1990    South Asia    Low income       FALSE
#&gt; 5 Afghanistan 2006-01-01   2000    South Asia    Low income       FALSE
#&gt; 6 Afghanistan 2015-01-01   2010    South Asia    Low income       FALSE
#&gt;   fmean.PCGDP fsd.PCGDP fmean.LIFEEX fsd.LIFEEX fsd.GINI    fsd.ODA
#&gt; 1          NA        NA     33.39967  0.8236083       NA  101559732
#&gt; 2          NA        NA     36.70089  1.2329864       NA   58515953
#&gt; 3          NA        NA     42.03909  2.1599808       NA  108271755
#&gt; 4          NA        NA     49.69089  2.1258392       NA  203018929
#&gt; 5    349.7596  11.89378     55.61818  1.8056120       NA 1113781886
#&gt; 6    506.9931  86.22723     61.12978  1.2872844       NA 1102034385</div><div class='input'>
<span class='co'># For grouped data frames use collapg</span>
<span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fsubset.html'>fsubset</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>1990</span>, <span class='va'>country</span>, <span class='va'>region</span>, <span class='va'>income</span>, <span class='va'>PCGDP</span><span class='op'>:</span><span class='va'>ODA</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='GRP, fgroup_by.html'>fgroup_by</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='collap.html'>collapg</a></span><span class='op'>(</span><span class='va'>fmean</span>, <span class='va'>ffirst</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ftransform.html'>ftransform</a></span><span class='op'>(</span>AMGDP <span class='op'>=</span> <span class='va'>PCGDP</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>PCGDP</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>income</span><span class='op'>)</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span>,
             AMODA <span class='op'>=</span> <span class='va'>ODA</span> <span class='op'>&gt;</span> <span class='fu'><a href='fmedian.html'>fmedian</a></span><span class='op'>(</span><span class='va'>ODA</span>, <span class='va'>income</span>, TRA <span class='op'>=</span> <span class='st'>"replace_fill"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country                     region              income
#&gt; 1                Afghanistan                 South Asia          Low income
#&gt; 2                    Albania      Europe &amp; Central Asia Upper middle income
#&gt; 3                    Algeria Middle East &amp; North Africa Upper middle income
#&gt; 4             American Samoa        East Asia &amp; Pacific Upper middle income
#&gt; 5                    Andorra      Europe &amp; Central Asia         High income
#&gt; 6                     Angola        Sub-Saharan Africa  Lower middle income
#&gt; 7        Antigua and Barbuda Latin America &amp; Caribbean          High income
#&gt; 8                  Argentina Latin America &amp; Caribbean          High income
#&gt; 9                    Armenia      Europe &amp; Central Asia Upper middle income
#&gt; 10                     Aruba Latin America &amp; Caribbean          High income
#&gt; 11                 Australia        East Asia &amp; Pacific         High income
#&gt; 12                   Austria      Europe &amp; Central Asia         High income
#&gt; 13                Azerbaijan      Europe &amp; Central Asia Upper middle income
#&gt; 14              Bahamas, The Latin America &amp; Caribbean          High income
#&gt; 15                   Bahrain Middle East &amp; North Africa         High income
#&gt; 16                Bangladesh                 South Asia Lower middle income
#&gt; 17                  Barbados Latin America &amp; Caribbean          High income
#&gt; 18                   Belarus      Europe &amp; Central Asia Upper middle income
#&gt; 19                   Belgium      Europe &amp; Central Asia         High income
#&gt; 20                    Belize Latin America &amp; Caribbean  Upper middle income
#&gt; 21                     Benin        Sub-Saharan Africa           Low income
#&gt; 22                   Bermuda              North America         High income
#&gt; 23                    Bhutan                 South Asia Lower middle income
#&gt; 24                   Bolivia Latin America &amp; Caribbean  Lower middle income
#&gt; 25    Bosnia and Herzegovina      Europe &amp; Central Asia Upper middle income
#&gt; 26                  Botswana        Sub-Saharan Africa  Upper middle income
#&gt; 27                    Brazil Latin America &amp; Caribbean  Upper middle income
#&gt; 28    British Virgin Islands Latin America &amp; Caribbean          High income
#&gt; 29         Brunei Darussalam        East Asia &amp; Pacific         High income
#&gt; 30                  Bulgaria      Europe &amp; Central Asia Upper middle income
#&gt; 31              Burkina Faso        Sub-Saharan Africa           Low income
#&gt; 32                   Burundi        Sub-Saharan Africa           Low income
#&gt; 33                Cabo Verde        Sub-Saharan Africa  Lower middle income
#&gt; 34                  Cambodia        East Asia &amp; Pacific Lower middle income
#&gt; 35                  Cameroon        Sub-Saharan Africa  Lower middle income
#&gt; 36                    Canada              North America         High income
#&gt; 37            Cayman Islands Latin America &amp; Caribbean          High income
#&gt; 38  Central African Republic        Sub-Saharan Africa           Low income
#&gt; 39                      Chad        Sub-Saharan Africa           Low income
#&gt; 40           Channel Islands      Europe &amp; Central Asia         High income
#&gt; 41                     Chile Latin America &amp; Caribbean          High income
#&gt; 42                     China        East Asia &amp; Pacific Upper middle income
#&gt; 43                  Colombia Latin America &amp; Caribbean  Upper middle income
#&gt; 44                   Comoros        Sub-Saharan Africa           Low income
#&gt; 45          Congo, Dem. Rep.        Sub-Saharan Africa           Low income
#&gt; 46               Congo, Rep.        Sub-Saharan Africa  Lower middle income
#&gt; 47                Costa Rica Latin America &amp; Caribbean  Upper middle income
#&gt; 48             Cote d'Ivoire        Sub-Saharan Africa  Lower middle income
#&gt; 49                   Croatia      Europe &amp; Central Asia         High income
#&gt; 50                      Cuba Latin America &amp; Caribbean  Upper middle income
#&gt; 51                   Curacao Latin America &amp; Caribbean          High income
#&gt; 52                    Cyprus      Europe &amp; Central Asia         High income
#&gt; 53            Czech Republic      Europe &amp; Central Asia         High income
#&gt; 54                   Denmark      Europe &amp; Central Asia         High income
#&gt; 55                  Djibouti Middle East &amp; North Africa Lower middle income
#&gt; 56                  Dominica Latin America &amp; Caribbean  Upper middle income
#&gt; 57        Dominican Republic Latin America &amp; Caribbean  Upper middle income
#&gt; 58                   Ecuador Latin America &amp; Caribbean  Upper middle income
#&gt; 59          Egypt, Arab Rep. Middle East &amp; North Africa Lower middle income
#&gt; 60               El Salvador Latin America &amp; Caribbean  Lower middle income
#&gt; 61         Equatorial Guinea        Sub-Saharan Africa  Upper middle income
#&gt; 62                   Eritrea        Sub-Saharan Africa           Low income
#&gt; 63                   Estonia      Europe &amp; Central Asia         High income
#&gt; 64                  Eswatini        Sub-Saharan Africa  Lower middle income
#&gt; 65                  Ethiopia        Sub-Saharan Africa           Low income
#&gt; 66             Faroe Islands      Europe &amp; Central Asia         High income
#&gt; 67                      Fiji        East Asia &amp; Pacific Upper middle income
#&gt; 68                   Finland      Europe &amp; Central Asia         High income
#&gt; 69                    France      Europe &amp; Central Asia         High income
#&gt; 70          French Polynesia        East Asia &amp; Pacific         High income
#&gt; 71                     Gabon        Sub-Saharan Africa  Upper middle income
#&gt; 72               Gambia, The        Sub-Saharan Africa           Low income
#&gt; 73                   Georgia      Europe &amp; Central Asia Lower middle income
#&gt; 74                   Germany      Europe &amp; Central Asia         High income
#&gt; 75                     Ghana        Sub-Saharan Africa  Lower middle income
#&gt; 76                 Gibraltar      Europe &amp; Central Asia         High income
#&gt; 77                    Greece      Europe &amp; Central Asia         High income
#&gt; 78                 Greenland      Europe &amp; Central Asia         High income
#&gt; 79                   Grenada Latin America &amp; Caribbean  Upper middle income
#&gt; 80                      Guam        East Asia &amp; Pacific         High income
#&gt; 81                 Guatemala Latin America &amp; Caribbean  Upper middle income
#&gt; 82                    Guinea        Sub-Saharan Africa           Low income
#&gt; 83             Guinea-Bissau        Sub-Saharan Africa           Low income
#&gt; 84                    Guyana Latin America &amp; Caribbean  Upper middle income
#&gt; 85                     Haiti Latin America &amp; Caribbean           Low income
#&gt; 86                  Honduras Latin America &amp; Caribbean  Lower middle income
#&gt; 87      Hong Kong SAR, China        East Asia &amp; Pacific         High income
#&gt; 88                   Hungary      Europe &amp; Central Asia         High income
#&gt; 89                   Iceland      Europe &amp; Central Asia         High income
#&gt; 90                     India                 South Asia Lower middle income
#&gt; 91                 Indonesia        East Asia &amp; Pacific Lower middle income
#&gt; 92        Iran, Islamic Rep. Middle East &amp; North Africa Upper middle income
#&gt; 93                      Iraq Middle East &amp; North Africa Upper middle income
#&gt; 94                   Ireland      Europe &amp; Central Asia         High income
#&gt; 95               Isle of Man      Europe &amp; Central Asia         High income
#&gt; 96                    Israel Middle East &amp; North Africa         High income
#&gt; 97                     Italy      Europe &amp; Central Asia         High income
#&gt; 98                   Jamaica Latin America &amp; Caribbean  Upper middle income
#&gt; 99                     Japan        East Asia &amp; Pacific         High income
#&gt; 100                   Jordan Middle East &amp; North Africa Upper middle income
#&gt; 101               Kazakhstan      Europe &amp; Central Asia Upper middle income
#&gt; 102                    Kenya        Sub-Saharan Africa  Lower middle income
#&gt; 103                 Kiribati        East Asia &amp; Pacific Lower middle income
#&gt; 104              Korea, Rep.        East Asia &amp; Pacific         High income
#&gt; 105                   Kosovo      Europe &amp; Central Asia Lower middle income
#&gt; 106                   Kuwait Middle East &amp; North Africa         High income
#&gt; 107          Kyrgyz Republic      Europe &amp; Central Asia Lower middle income
#&gt; 108                  Lao PDR        East Asia &amp; Pacific Lower middle income
#&gt; 109                   Latvia      Europe &amp; Central Asia         High income
#&gt; 110                  Lebanon Middle East &amp; North Africa Upper middle income
#&gt; 111                  Lesotho        Sub-Saharan Africa  Lower middle income
#&gt;          PCGDP   LIFEEX     GINI          ODA AMGDP AMODA
#&gt; 1     482.1631 57.51515       NA 2699233333.3 FALSE  TRUE
#&gt; 2    2978.0343 74.85485 29.66000  332187777.8 FALSE  TRUE
#&gt; 3    3991.6245 71.78677 31.45000  276555925.9 FALSE  TRUE
#&gt; 4   10189.2155       NA       NA           NA  TRUE    NA
#&gt; 5   40480.7401       NA       NA           NA  TRUE    NA
#&gt; 6    2830.2960 51.33104 47.35000  406505185.2  TRUE FALSE
#&gt; 7   12126.9353 74.13412       NA    6663333.3 FALSE FALSE
#&gt; 8    8862.6979 74.37235 46.74400  123537407.4 FALSE  TRUE
#&gt; 9    2398.3006 71.72023 32.17647  271522592.6 FALSE  TRUE
#&gt; 10  25981.5779 74.35954       NA   23934285.7  TRUE FALSE
#&gt; 11  46683.8623 80.11520 33.94000           NA  TRUE    NA
#&gt; 12  43073.6357 78.88011 30.26923           NA  TRUE    NA
#&gt; 13   3520.2434 68.29831 23.36667  174885925.9 FALSE  TRUE
#&gt; 14  28751.0633 73.27208       NA    7385714.3  TRUE FALSE
#&gt; 15  21781.3509 74.93392       NA  127255714.3 FALSE  TRUE
#&gt; 16    641.6122 66.65112 31.93333 1798428888.9 FALSE  TRUE
#&gt; 17  15206.3815 73.88719       NA    6654000.0  TRUE FALSE
#&gt; 18   4339.1479 69.92373 28.52105   94508518.5 FALSE FALSE
#&gt; 19  40879.1095 78.68166 28.43077           NA  TRUE    NA
#&gt; 20   3978.0112 69.43992 57.73333   27397407.4 FALSE FALSE
#&gt; 21    722.0225 57.21227 43.26667  429968148.1  TRUE FALSE
#&gt; 22  78738.1943 79.19822       NA   -3408571.4  TRUE FALSE
#&gt; 23   1645.2757 62.94546 38.80000   93604814.8  TRUE FALSE
#&gt; 24   1813.1096 62.63123 52.86471  771588148.1  TRUE  TRUE
#&gt; 25   3716.7992 74.37573 32.56000  644532592.6 FALSE  TRUE
#&gt; 26   5620.0231 56.45881 62.00000  126853703.7 FALSE FALSE
#&gt; 27   9702.5233 71.15177 56.06667  368259259.3  TRUE  TRUE
#&gt; 28          NA       NA       NA    3726428.6    NA FALSE
#&gt; 29  35812.4117 75.61500       NA    2171428.6  TRUE FALSE
#&gt; 30   5463.6203 72.50275 34.99000  391211428.6  TRUE  TRUE
#&gt; 31    500.1171 53.45285 43.28000  735572222.2 FALSE  TRUE
#&gt; 32    243.8401 52.43854 36.90000  361413333.3 FALSE FALSE
#&gt; 33   2464.6082 70.05592 49.85000  166531111.1  TRUE FALSE
#&gt; 34    648.3011 61.47542       NA  566825555.6 FALSE  TRUE
#&gt; 35   1254.9820 52.90485 43.97500  764166666.7 FALSE  TRUE
#&gt; 36  44375.2360 79.85021 32.83333           NA FALSE    NA
#&gt; 37          NA 82.19024       NA   -1060714.3    NA FALSE
#&gt; 38    406.2436 46.64212 53.70000  216812222.2 FALSE FALSE
#&gt; 39    689.9519 48.87004 41.55000  372081481.5  TRUE FALSE
#&gt; 40          NA 78.51519       NA           NA    NA    NA
#&gt; 41  10984.3468 77.20050 51.42727  120825185.2 FALSE  TRUE
#&gt; 42   3189.8464 73.06762 42.50000 1460997407.4 FALSE  TRUE
#&gt; 43   5650.6004 71.68623 54.41667  636257777.8  TRUE  TRUE
#&gt; 44   1296.6954 60.34104 50.60000   49167777.8  TRUE FALSE
#&gt; 45    364.3952 53.21742 42.15000 1664009629.6 FALSE  TRUE
#&gt; 46   2562.0487 56.38658 48.10000  265414074.1  TRUE FALSE
#&gt; 47   7141.6286 77.86354 48.10769   57051111.1  TRUE FALSE
#&gt; 48   1316.0203 49.51373 40.83333  901774814.8  TRUE  TRUE
#&gt; 49  12501.4421 74.60671 32.14286  117009473.7 FALSE  TRUE
#&gt; 50   4491.0833 77.39915       NA  220743333.3 FALSE  TRUE
#&gt; 51          NA 76.38711       NA           NA    NA    NA
#&gt; 52  27454.3189 78.52104 32.61667   52115714.3 FALSE  TRUE
#&gt; 53  17089.8041 75.63360 26.38571  358650714.3 FALSE  TRUE
#&gt; 54  55494.3415 77.59720 26.70000           NA  TRUE    NA
#&gt; 55   1325.9907 58.64862 43.06667  122000740.7 FALSE FALSE
#&gt; 56   5889.4930 75.50000       NA   21580000.0  TRUE FALSE
#&gt; 57   4574.5985 71.30727 48.58500  127862222.2 FALSE FALSE
#&gt; 58   4347.3762 73.45554 50.31667  224876666.7 FALSE  TRUE
#&gt; 59   2135.8571 68.88462 31.27143 2290235185.2 FALSE  TRUE
#&gt; 60   2834.0042 69.78554 47.26818  267806296.3  TRUE FALSE
#&gt; 61  10350.9378 53.63012       NA   31614074.1  TRUE FALSE
#&gt; 62    538.9161 57.70400       NA  179377692.3  TRUE FALSE
#&gt; 63  13760.6938 72.23072 33.69286  105399285.7 FALSE  TRUE
#&gt; 64   3322.9125 52.38981 55.03333   66189629.6  TRUE FALSE
#&gt; 65    280.1913 55.77381 35.34000 2214925555.6 FALSE  TRUE
#&gt; 66  47397.9029 79.22467       NA           NA  TRUE    NA
#&gt; 67   3531.8393 68.10704 38.40000   69377037.0  TRUE FALSE
#&gt; 68  41224.8958 78.49037 27.56154           NA  TRUE    NA
#&gt; 69  38566.2142 79.88161 32.09231           NA FALSE    NA
#&gt; 70          NA 73.34258       NA  502502857.1    NA  TRUE
#&gt; 71  10019.3008 61.47527 40.10000   79969259.3  TRUE FALSE
#&gt; 72    521.8275 57.11731 43.82500   93622963.0 FALSE FALSE
#&gt; 73   2335.9629 71.97623 38.35238  397045185.2  TRUE FALSE
#&gt; 74  39540.3111 78.50750 30.36364           NA FALSE    NA
#&gt; 75   1169.6604 59.01596 40.92500 1110053703.7 FALSE  TRUE
#&gt; 76          NA       NA       NA     707142.9    NA FALSE
#&gt; 77  23826.8384 79.08931 34.63846           NA FALSE    NA
#&gt; 78  35986.4573 68.08318       NA           NA FALSE    NA
#&gt; 79   6682.5934 71.17312       NA   19247407.4  TRUE FALSE
#&gt; 80  30475.4877 76.03885       NA           NA FALSE    NA
#&gt; 81   2656.3983 68.80342 52.36667  327611851.9 FALSE  TRUE
#&gt; 82    615.2667 53.94208 41.80000  379895555.6  TRUE FALSE
#&gt; 83    568.4080 53.25746 43.30000  124432592.6  TRUE FALSE
#&gt; 84   2675.9537 65.22892 44.60000  133082963.0 FALSE FALSE
#&gt; 85    737.0503 59.02200 41.10000  747640000.0 FALSE  TRUE
#&gt; 86   1785.8269 70.95181 54.54400  542553703.7 FALSE  TRUE
#&gt; 87  27530.2940 81.37270       NA   11047142.9 FALSE FALSE
#&gt; 88  11812.4567 72.42368 29.64615  359165714.3 FALSE  TRUE
#&gt; 89  41280.6103 80.64807 28.08333           NA  TRUE    NA
#&gt; 90   1047.7965 63.86908 35.10000 2131259629.6 FALSE  TRUE
#&gt; 91   2701.8300 66.78812 39.50000 1146887777.8  TRUE  TRUE
#&gt; 92   5491.9764 71.33515 41.97143  144174074.1  TRUE  TRUE
#&gt; 93   3885.5941 68.63035 29.05000 3065764444.4 FALSE  TRUE
#&gt; 94  45314.2965 78.25149 32.61538           NA  TRUE    NA
#&gt; 95  56315.2726 77.24756       NA           NA  TRUE    NA
#&gt; 96  28020.2959 79.73030 39.88571 1531092857.1  TRUE  TRUE
#&gt; 97  34906.3961 80.34043 34.40000           NA FALSE    NA
#&gt; 98   4785.7304 73.48146 42.80000   74910370.4 FALSE FALSE
#&gt; 99  43330.0504 81.60834 32.10000           NA  TRUE    NA
#&gt; 100  3121.4842 72.30546 36.16667 1045129259.3 FALSE  TRUE
#&gt; 101  6990.6770 67.22990 30.88750  168646666.7  TRUE  TRUE
#&gt; 102   926.2972 57.78500 46.58000 1316737407.4 FALSE  TRUE
#&gt; 103  1641.4217 64.22154 37.00000   34396296.3 FALSE FALSE
#&gt; 104 17792.9365 77.37552 31.90000 -106779285.7 FALSE FALSE
#&gt; 105  3120.4375 69.09831 28.99091  493226666.7  TRUE  TRUE
#&gt; 106 40104.5806 73.44246       NA    8409285.7  TRUE FALSE
#&gt; 107   796.3311 68.41782 31.30000  332025384.6 FALSE FALSE
#&gt; 108   919.3214 60.74285 34.72000  353641851.9 FALSE FALSE
#&gt; 109 10437.2289 70.96585 34.80000  122976428.6 FALSE  TRUE
#&gt; 110  6937.6193 75.66027 31.80000  511673333.3  TRUE  TRUE
#&gt; 111  1003.5086 51.81108 56.33333  134845555.6 FALSE FALSE
#&gt;  [ reached 'max' / getOption("max.print") -- omitted 105 rows ]</div><div class='input'>
<span class='co'>## Additional flexibility for data transformation tasks is offerend by tidy transformation operators</span>
<span class='co'># Within-transformation (centering on overall mean)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, mean <span class='op'>=</span> <span class='st'>"overall.mean"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country W.PCGDP W.LIFEEX W.GINI      W.ODA
#&gt; 1 Afghanistan      NA 48.25093     NA -807886980
#&gt; 2 Afghanistan      NA 48.70093     NA -688976980
#&gt; 3 Afghanistan      NA 49.14393     NA -807446980
#&gt; 4 Afghanistan      NA 49.58293     NA -685876980
#&gt; 5 Afghanistan      NA 50.01893     NA -619846980
#&gt; 6 Afghanistan      NA 50.45393     NA -552076980</div><div class='input'><span class='co'># Partialling out country and year fixed effects</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    HDW.PCGDP  HDW.LIFEEX
#&gt; 43 1330.1375 -1.42544500
#&gt; 44 1182.5750 -1.09828726
#&gt; 45  688.3730 -0.85895107
#&gt; 46  399.7352 -0.54114762
#&gt; 47  -59.5705 -0.31875491
#&gt; 48 -449.2181 -0.09380395</div><div class='input'><span class='co'># Same, adding ODA as continuous regressor</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='va'>PCGDP</span> <span class='op'>+</span> <span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='qF, qG, finteraction.html'>qF</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>ODA</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     HDW.PCGDP  HDW.LIFEEX
#&gt; 43 -313.14014 -1.41953598
#&gt; 44 -435.90972 -1.10211824
#&gt; 45 -618.49311 -0.76508543
#&gt; 46   32.47045 -0.50982100
#&gt; 47 -129.44076 -0.32181018
#&gt; 48  218.14942  0.08018899</div><div class='input'><span class='co'># Standardizing (scaling and centering) by country</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>~</span> <span class='va'>country</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; 1 Afghanistan        NA  -1.551093       NA -0.6132859
#&gt; 2 Afghanistan        NA  -1.506322       NA -0.5543146
#&gt; 3 Afghanistan        NA  -1.462247       NA -0.6130676
#&gt; 4 Afghanistan        NA  -1.418570       NA -0.5527772
#&gt; 5 Afghanistan        NA  -1.375191       NA -0.5200308
#&gt; 6 Afghanistan        NA  -1.331912       NA -0.4864215</div><div class='input'><span class='co'># Computing 1 lead and 3 lags of the 4 series</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP F1.LIFEEX LIFEEX
#&gt; 1 Afghanistan 1960       NA    NA       NA       NA       NA    32.742 32.292
#&gt; 2 Afghanistan 1961       NA    NA       NA       NA       NA    33.185 32.742
#&gt; 3 Afghanistan 1962       NA    NA       NA       NA       NA    33.624 33.185
#&gt; 4 Afghanistan 1963       NA    NA       NA       NA       NA    34.060 33.624
#&gt; 5 Afghanistan 1964       NA    NA       NA       NA       NA    34.495 34.060
#&gt; 6 Afghanistan 1965       NA    NA       NA       NA       NA    34.928 34.495
#&gt;   L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI L1.GINI L2.GINI L3.GINI    F1.ODA
#&gt; 1        NA        NA        NA      NA   NA      NA      NA      NA 233350000
#&gt; 2    32.292        NA        NA      NA   NA      NA      NA      NA 114880000
#&gt; 3    32.742    32.292        NA      NA   NA      NA      NA      NA 236450000
#&gt; 4    33.185    32.742    32.292      NA   NA      NA      NA      NA 302480000
#&gt; 5    33.624    33.185    32.742      NA   NA      NA      NA      NA 370250000
#&gt; 6    34.060    33.624    33.185      NA   NA      NA      NA      NA 338270000
#&gt;         ODA    L1.ODA    L2.ODA    L3.ODA
#&gt; 1 114440000        NA        NA        NA
#&gt; 2 233350000 114440000        NA        NA
#&gt; 3 114880000 233350000 114440000        NA
#&gt; 4 236450000 114880000 233350000 114440000
#&gt; 5 302480000 236450000 114880000 233350000
#&gt; 6 370250000 302480000 236450000 114880000</div><div class='input'><span class='co'># Computing the 1- and 10-year first differences</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP L10D1.PCGDP D1.LIFEEX L10D1.LIFEEX D1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA     0.450           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA     0.443           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA     0.439           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA     0.436           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA     0.435           NA      NA
#&gt;   L10D1.GINI     D1.ODA L10D1.ODA
#&gt; 1         NA         NA        NA
#&gt; 2         NA  118910000        NA
#&gt; 3         NA -118470000        NA
#&gt; 4         NA  121570000        NA
#&gt; 5         NA   66030000        NA
#&gt; 6         NA   67770000        NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fdiff.html'>D</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>     <span class='co'># ..first and second differences</span>
</div><div class='output co'>#&gt;       country year D1.PCGDP D2.PCGDP L10D1.PCGDP L10D2.PCGDP D1.LIFEEX
#&gt; 1 Afghanistan 1960       NA       NA          NA          NA        NA
#&gt; 2 Afghanistan 1961       NA       NA          NA          NA     0.450
#&gt; 3 Afghanistan 1962       NA       NA          NA          NA     0.443
#&gt; 4 Afghanistan 1963       NA       NA          NA          NA     0.439
#&gt; 5 Afghanistan 1964       NA       NA          NA          NA     0.436
#&gt; 6 Afghanistan 1965       NA       NA          NA          NA     0.435
#&gt;   D2.LIFEEX L10D1.LIFEEX L10D2.LIFEEX D1.GINI D2.GINI L10D1.GINI L10D2.GINI
#&gt; 1        NA           NA           NA      NA      NA         NA         NA
#&gt; 2        NA           NA           NA      NA      NA         NA         NA
#&gt; 3    -0.007           NA           NA      NA      NA         NA         NA
#&gt; 4    -0.004           NA           NA      NA      NA         NA         NA
#&gt; 5    -0.003           NA           NA      NA      NA         NA         NA
#&gt; 6    -0.001           NA           NA      NA      NA         NA         NA
#&gt;       D1.ODA     D2.ODA L10D1.ODA L10D2.ODA
#&gt; 1         NA         NA        NA        NA
#&gt; 2  118910000         NA        NA        NA
#&gt; 3 -118470000 -237380000        NA        NA
#&gt; 4  121570000  240040000        NA        NA
#&gt; 5   66030000  -55540000        NA        NA
#&gt; 6   67770000    1740000        NA        NA</div><div class='input'><span class='co'># Computing the 1- and 10-year growth rates</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       country year G1.PCGDP L10G1.PCGDP G1.LIFEEX L10G1.LIFEEX G1.GINI
#&gt; 1 Afghanistan 1960       NA          NA        NA           NA      NA
#&gt; 2 Afghanistan 1961       NA          NA  1.393534           NA      NA
#&gt; 3 Afghanistan 1962       NA          NA  1.353002           NA      NA
#&gt; 4 Afghanistan 1963       NA          NA  1.322887           NA      NA
#&gt; 5 Afghanistan 1964       NA          NA  1.296693           NA      NA
#&gt; 6 Afghanistan 1965       NA          NA  1.277158           NA      NA
#&gt;   L10G1.GINI    G1.ODA L10G1.ODA
#&gt; 1         NA        NA        NA
#&gt; 2         NA 103.90598        NA
#&gt; 3         NA -50.76923        NA
#&gt; 4         NA 105.82347        NA
#&gt; 5         NA  27.92557        NA
#&gt; 6         NA  22.40479        NA</div><div class='input'><span class='co'># Adding growth rate variables to dataset</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>add_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>10</span><span class='op'>)</span>, <span class='fl'>1</span>, <span class='op'>~</span> <span class='va'>country</span>, <span class='op'>~</span><span class='va'>year</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span>, keep.ids <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='fselect, get_vars, add_vars.html'>get_vars</a></span><span class='op'>(</span><span class='va'>wlddev</span>, <span class='st'>"G1."</span>, regex <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='cn'>NULL</span> <span class='co'># Deleting again</span>

<span class='co'># These operators can conveniently be used in regression formulas:</span>
<span class='co'># Using a Mundlak (1978) procedure to estimate the effect of OECD on LIFEEX, controlling for PCGDP</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween, fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ log(PCGDP) + OECD + B(log(PCGDP), country), 
#&gt;     data = wlddev %&gt;% fselect(country, OECD, PCGDP, LIFEEX) %&gt;% 
#&gt;         na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)              log(PCGDP)                OECDTRUE  
#&gt;              19.138156                7.984832               -0.003428  
#&gt; B(log(PCGDP), country)  
#&gt;              -2.432400  
#&gt; </div><div class='input'>
<span class='co'># Adding 10-year lagged life-expectancy to allow for some convergence effects (dynamic panel model)</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>LIFEEX</span> <span class='op'>~</span> <span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>LIFEEX</span>, <span class='fl'>10</span>, <span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>OECD</span> <span class='op'>+</span> <span class='fu'><a href='fbetween, fwithin.html'>B</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>PCGDP</span><span class='op'>)</span>, <span class='va'>country</span><span class='op'>)</span>,
   <span class='va'>wlddev</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='fselect, get_vars, add_vars.html'>fselect</a></span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>OECD</span>, <span class='va'>PCGDP</span>, <span class='va'>LIFEEX</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='va'>na_omit</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Panel-lag computed without timevar: Assuming ordered data</span></div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; lm(formula = LIFEEX ~ L(LIFEEX, 10, country) + log(PCGDP) + OECD + 
#&gt;     B(log(PCGDP), country), data = wlddev %&gt;% fselect(country, 
#&gt;     OECD, PCGDP, LIFEEX) %&gt;% na_omit)
#&gt; 
#&gt; Coefficients:
#&gt;            (Intercept)  L(LIFEEX, 10, country)              log(PCGDP)  
#&gt;                 8.9683                  0.8693                  0.6945  
#&gt;               OECDTRUE  B(log(PCGDP), country)  
#&gt;                 0.4224                 -0.4215  
#&gt; </div><div class='input'>
<span class='co'># Tranformation functions and operators also support plm panel data classes:</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://cran.r-project.org/package=plm'>plm</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: package ‘plm’ was built under R version 4.0.3</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘plm’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:dplyr’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    between, lag, lead</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:data.table’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    between</span></div><div class='input'><span class='va'>pwlddev</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/plm/man/pdata.frame.html'>pdata.frame</a></span><span class='op'>(</span><span class='va'>wlddev</span>, index <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"country"</span>,<span class='st'>"year"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Country-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI       W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -15.59016     NA -1236633448
#&gt; Afghanistan-1961 Afghanistan 1961      NA -15.14016     NA -1117723448
#&gt; Afghanistan-1962 Afghanistan 1962      NA -14.69716     NA -1236193448
#&gt; Afghanistan-1963 Afghanistan 1963      NA -14.25816     NA -1114623448
#&gt; Afghanistan-1964 Afghanistan 1964      NA -13.82216     NA -1048593448
#&gt; Afghanistan-1965 Afghanistan 1965      NA -13.38716     NA  -980823448</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, effect <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>          <span class='co'># Time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fbetween, fwithin.html'>W</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, effect <span class='op'>=</span> <span class='fl'>2</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year W.PCGDP  W.LIFEEX W.GINI      W.ODA
#&gt; Afghanistan-1960 Afghanistan 1960      NA -21.61149     NA -115000091
#&gt; Afghanistan-1961 Afghanistan 1961      NA -21.72388     NA  -24104615
#&gt; Afghanistan-1962 Afghanistan 1962      NA -21.66532     NA -171946606
#&gt; Afghanistan-1963 Afghanistan 1963      NA -21.57444     NA  -56127931
#&gt; Afghanistan-1964 Afghanistan 1964      NA -21.60677     NA   -3817080
#&gt; Afghanistan-1965 Afghanistan 1965      NA -21.63645     NA   39903717</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Country- and time-demeaning</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fHDbetween, fHDwithin.html'>HDW</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                  HDW.PCGDP HDW.LIFEEX HDW.GINI     HDW.ODA
#&gt; Afghanistan-1960        NA  -5.979000       NA  -982621508
#&gt; Afghanistan-1961        NA  -6.026522       NA  -913532600
#&gt; Afghanistan-1962        NA  -5.967962       NA -1041389798
#&gt; Afghanistan-1963        NA  -5.941946       NA  -942471963
#&gt; Afghanistan-1964        NA  -5.974282       NA  -885902071
#&gt; Afghanistan-1965        NA  -5.949030       NA  -843600211</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                    <span class='co'># Standardizing by country</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fscale.html'>STD</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, cols <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year STD.PCGDP STD.LIFEEX STD.GINI    STD.ODA
#&gt; Afghanistan-1960 Afghanistan 1960        NA  -1.551093       NA -0.6132859
#&gt; Afghanistan-1961 Afghanistan 1961        NA  -1.506322       NA -0.5543146
#&gt; Afghanistan-1962 Afghanistan 1962        NA  -1.462247       NA -0.6130676
#&gt; Afghanistan-1963 Afghanistan 1963        NA  -1.418570       NA -0.5527772
#&gt; Afghanistan-1964 Afghanistan 1964        NA  -1.375191       NA -0.5200308
#&gt; Afghanistan-1965 Afghanistan 1965        NA  -1.331912       NA -0.4864215</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>                <span class='co'># Panel-lags</span>
</div><div class='output co'>#&gt;                  F1 -- L1 L2 L3
#&gt; Afghanistan-1960 NA NA NA NA NA
#&gt; Afghanistan-1961 NA NA NA NA NA
#&gt; Afghanistan-1962 NA NA NA NA NA
#&gt; Afghanistan-1963 NA NA NA NA NA
#&gt; Afghanistan-1964 NA NA NA NA NA
#&gt; Afghanistan-1965 NA NA NA NA NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='flag.html'>L</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year F1.PCGDP PCGDP L1.PCGDP L2.PCGDP L3.PCGDP
#&gt; Afghanistan-1960 Afghanistan 1960       NA    NA       NA       NA       NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA    NA       NA       NA       NA
#&gt; Afghanistan-1962 Afghanistan 1962       NA    NA       NA       NA       NA
#&gt; Afghanistan-1963 Afghanistan 1963       NA    NA       NA       NA       NA
#&gt; Afghanistan-1964 Afghanistan 1964       NA    NA       NA       NA       NA
#&gt; Afghanistan-1965 Afghanistan 1965       NA    NA       NA       NA       NA
#&gt;                  F1.LIFEEX LIFEEX L1.LIFEEX L2.LIFEEX L3.LIFEEX F1.GINI GINI
#&gt; Afghanistan-1960    32.742 32.292        NA        NA        NA      NA   NA
#&gt; Afghanistan-1961    33.185 32.742    32.292        NA        NA      NA   NA
#&gt; Afghanistan-1962    33.624 33.185    32.742    32.292        NA      NA   NA
#&gt; Afghanistan-1963    34.060 33.624    33.185    32.742    32.292      NA   NA
#&gt; Afghanistan-1964    34.495 34.060    33.624    33.185    32.742      NA   NA
#&gt; Afghanistan-1965    34.928 34.495    34.060    33.624    33.185      NA   NA
#&gt;                  L1.GINI L2.GINI L3.GINI    F1.ODA       ODA    L1.ODA
#&gt; Afghanistan-1960      NA      NA      NA 233350000 114440000        NA
#&gt; Afghanistan-1961      NA      NA      NA 114880000 233350000 114440000
#&gt; Afghanistan-1962      NA      NA      NA 236450000 114880000 233350000
#&gt; Afghanistan-1963      NA      NA      NA 302480000 236450000 114880000
#&gt; Afghanistan-1964      NA      NA      NA 370250000 302480000 236450000
#&gt; Afghanistan-1965      NA      NA      NA 338270000 370250000 302480000
#&gt;                     L2.ODA    L3.ODA
#&gt; Afghanistan-1960        NA        NA
#&gt; Afghanistan-1961        NA        NA
#&gt; Afghanistan-1962 114440000        NA
#&gt; Afghanistan-1963 233350000 114440000
#&gt; Afghanistan-1964 114880000 233350000
#&gt; Afghanistan-1965 236450000 114880000</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span><span class='op'>$</span><span class='va'>PCGDP</span><span class='op'>)</span><span class='op'>)</span>                      <span class='co'># Panel-Growth rates</span>
</div><div class='output co'>#&gt; Afghanistan-1960 Afghanistan-1961 Afghanistan-1962 Afghanistan-1963 
#&gt;               NA               NA               NA               NA 
#&gt; Afghanistan-1964 Afghanistan-1965 
#&gt;               NA               NA </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='fgrowth.html'>G</a></span><span class='op'>(</span><span class='va'>pwlddev</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>9</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      country year G1.PCGDP G1.LIFEEX G1.GINI    G1.ODA
#&gt; Afghanistan-1960 Afghanistan 1960       NA        NA      NA        NA
#&gt; Afghanistan-1961 Afghanistan 1961       NA  1.393534      NA 103.90598
#&gt; Afghanistan-1962 Afghanistan 1962       NA  1.353002      NA -50.76923
#&gt; Afghanistan-1963 Afghanistan 1963       NA  1.322887      NA 105.82347
#&gt; Afghanistan-1964 Afghanistan 1964       NA  1.296693      NA  27.92557
#&gt; Afghanistan-1965 Afghanistan 1965       NA  1.277158      NA  22.40479</div><div class='input'>
<span class='co'># Remove all objects used in this example section</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>v</span>, <span class='va'>d</span>, <span class='va'>w</span>, <span class='va'>f</span>, <span class='va'>f1</span>, <span class='va'>f2</span>, <span class='va'>g</span>, <span class='va'>mtcarsM</span>, <span class='va'>pwlddev</span>, <span class='va'>sds</span>, <span class='va'>series</span>, <span class='va'>wlddev</span><span class='op'>)</span>
<span class='co'># }</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


