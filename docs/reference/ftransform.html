<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fast Transform and Compute Columns on a Data Frame — ftransform • collapse</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Fast Transform and Compute Columns on a Data Frame — ftransform" />
<meta property="og:description" content="ftransform is a much faster update of base::transform for data frames. It returns the data frame with new columns computed and/or existing columns modified or deleted. settransform does all of that by reference i.e. it modifies the data frame in the global environment. fcompute can be used to compute new columns from the columns in a data frame and returns only the computed columns." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../blog/index.html">Blog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/collapse">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast Transform and Compute Columns on a Data Frame</h1>
    
    <div class="hidden name"><code>ftransform.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ftransform</code> is a much faster update of <code><a href='https://rdrr.io/r/base/transform.html'>base::transform</a></code> for data frames. It returns the data frame with new columns computed and/or existing columns modified or deleted. <code>settransform</code> does all of that by reference i.e. it modifies the data frame in the global environment. <code>fcompute</code> can be used to compute new columns from the columns in a data frame and returns only the computed columns.</p>
    </div>

    <pre class="usage"><span class='co'># Modify and return 'data.frame'</span>
<span class='fu'>ftransform</span>(<span class='no'>X</span>, <span class='no'>...</span>)
<span class='fu'>tfm</span>(<span class='no'>X</span>, <span class='no'>...</span>)            <span class='co'># Shortcut for ftransform</span>

<span class='co'># Modify 'data.frame' by reference</span>
<span class='fu'>settransform</span>(<span class='no'>X</span>, <span class='no'>...</span>)
<span class='fu'>settfm</span>(<span class='no'>X</span>, <span class='no'>...</span>)         <span class='co'># Shortcut for settransform</span>

<span class='co'># Compute and return new 'data.frame' from existing one</span>
<span class='fu'>fcompute</span>(<span class='no'>X</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>a data.frame.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments of the form <code>column = value</code>. The <code>value</code> can be a combination of other columns, a scalar value, or <code>NULL</code>, which deletes <code>column</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>...</code> arguments to <code>ftransform</code> are tagged
  vector expressions, which are evaluated in the data frame
  <code>X</code>.  The tags are matched against <code><a href='https://rdrr.io/r/base/names.html'>names(X)</a></code>, and for
  those that match, the value replace the corresponding variable in
  <code>X</code>, and the others are appended to <code>X</code>. It is also possible to delete columns by assigning <code>NULL</code> to them, i.e. <code>ftransform(data, column = NULL)</code> removes <code>column</code> from the data.</p>
<p>The function <code>settransform</code> does all of that by reference, but uses base-R's copy-on modify semantics, which is equivalent to replacing the data with <code>&lt;-</code> (thus it is still memory efficient but the data will have a different memory address after each call of <code>settransform</code>).</p>
<p>Finally, the function <code>fcompute</code> functions just like <code>ftransform</code>, but returns only the changed / computed columns without modifying or appending the data in <code>X</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The modified data.frame <code>X</code>, or, for <code>fcompute</code>, a new data.frame with the columns computed on <code>X</code>. All attributes of <code>X</code> are preserved.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/base/with.html'>with</a></code>, <code><a href='https://rdrr.io/r/base/with.html'>within</a></code>, <a href='fast-data-manipulation.html'>Data Frame Manipulation</a>, <a href='collapse-documentation.html'>Collapse Overview</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'>## ftransform modifies and returns a data.frame</span>
<span class='fu'>ftransform</span>(<span class='no'>airquality</span>, <span class='kw'>Ozone</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>)
<span class='fu'>ftransform</span>(<span class='no'>airquality</span>, <span class='kw'>new</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>, <span class='kw'>Temp</span> <span class='kw'>=</span> (<span class='no'>Temp</span>-<span class='fl'>32</span>)/<span class='fl'>1.8</span>)
<span class='fu'>ftransform</span>(<span class='no'>airquality</span>, <span class='kw'>new</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>, <span class='kw'>new2</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>Temp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)  <span class='co'># Deleting Temp</span>
<span class='fu'>ftransform</span>(<span class='no'>airquality</span>, <span class='kw'>Ozone</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>Temp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)            <span class='co'># Deleting columns</span>

<span class='co'>## settransform modifies a data.frame in the global environment</span>
<span class='no'>airquality_c</span> <span class='kw'>&lt;-</span> <span class='no'>airquality</span>
<span class='fu'>settransform</span>(<span class='no'>airquality_c</span>, <span class='kw'>Ratio</span> <span class='kw'>=</span> <span class='no'>Ozone</span> / <span class='no'>Temp</span>, <span class='kw'>Ozone</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>Temp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>airquality_c</span>)
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='no'>airquality_c</span>)

<span class='co'>## fcompute only returns the modified / computed data</span>
<span class='fu'>fcompute</span>(<span class='no'>airquality</span>, <span class='kw'>Ozone</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>)
<span class='fu'>fcompute</span>(<span class='no'>airquality</span>, <span class='kw'>new</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>, <span class='kw'>Temp</span> <span class='kw'>=</span> (<span class='no'>Temp</span>-<span class='fl'>32</span>)/<span class='fl'>1.8</span>)
<span class='fu'>fcompute</span>(<span class='no'>airquality</span>, <span class='kw'>new</span> <span class='kw'>=</span> -<span class='no'>Ozone</span>, <span class='kw'>new2</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


