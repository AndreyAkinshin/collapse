<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced and Fast Data Transformation in R • collapse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Advanced and Fast Data Transformation in R">
<meta property="og:description" content="A C/C++ based package for advanced data transformation and 
    statistical computing in R that is extremely fast, flexible and 
    parsimonious to code with and programmer friendly. 
    It is well integrated with dplyr, plm and data.table.
    --- Key Features: ---
    (1) Advanced statistical programming: A full set of fast statistical functions 
        supporting grouped and weighted computations on vectors, matrices and 
        data frames. Fast and programmable grouping, ordering, unique values / rows, 
        factor generation and interactions. Fast and flexible functions for data 
        manipulation and data object conversions.
    (2) Advanced aggregation: Fast and easy multi-data-type, multi-function, 
        weighted, parallelized and fully customized data aggregation.
    (3) Advanced transformations: Fast (grouped) replacing and sweeping out of 
        statistics, and (grouped, weighted) scaling / standardizing, between 
        (averaging) and (quasi-)within (centering / demeaning) transformations, 
        higher-dimensional centering (i.e. multiple fixed effects transformations), 
        linear prediction and partialling-out.
    (4) Advanced time-computations: Fast (sequences of) lags / leads, and 
        (lagged / leaded, iterated, quasi-, log-) differences and growth 
        rates on (unordered) time series and panel data. Multivariate auto-, 
        partial- and cross-correlation functions for panel data. 
        Panel data to (ts-)array conversions.
    (5) List processing: (Recursive) list search / identification, extraction / 
        subsetting, data-apply, and generalized row-binding / unlisting in 2D.
    (6) Advanced data exploration: Fast (grouped, weighted, panel-decomposed) 
        summary statistics for complex multilevel / panel data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">collapse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Documentation</a>
</li>
<li>
  <a href="articles/index.html">Vignettes</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/collapse_R">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/SebKrantz/collapse">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="collapse-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#collapse-" class="anchor"></a>collapse <img src="reference/figures/collapse_logo_small.png" width="150px" align="right">
</h1></div>
<!-- badges: start -->

<p><em>collapse</em> is a C/C++ based package for data manipulation in R. It’s aims are</p>
<ul>
<li>to facilitate complex data transformation and exploration tasks in R</li>
<li>to help make R code fast, flexible, parsimonious and programmer friendly</li>
</ul>
<p>It is compatible with <em>dplyr</em>, <em>data.table</em> and the <em>plm</em> approach to panel-data.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li><p><strong>Advanced data programming</strong>: A full set of fast statistical functions supporting grouped and weighted computations on vectors, matrices and data frames. Fast (ordered) and programmable grouping, factor generation, manipulation of data frames and data object conversions.</p></li>
<li><p><strong>Advanced aggregation</strong>: Fast and easy multi-data-type, multi-function, weighted, parallelized and fully customized data aggregation.</p></li>
<li><p><strong>Advanced transformations</strong>: Fast (grouped, weighted) replacing and sweeping out of statistics, scaling / standardizing, centering (i.e.  between and within transformations), higher-dimensional centering (i.e. multiple fixed effects transformations), linear prediction and partialling-out.</p></li>
<li><p><strong>Advanced time-computations</strong>: Fast (sequences of) lags / leads, and (lagged / leaded, iterated, quasi-, log-) differences and growth rates on (unordered) time-series and panel data. Multivariate auto, partial and cross-correlation functions for panel data. Panel data to (ts-)array conversions.</p></li>
<li><p><strong>List processing</strong>: (Recursive) list search / identification, extraction / subsetting, data-apply, and generalized row-binding / unlisting in 2D.</p></li>
<li><p><strong>Advanced data exploration</strong>: Fast (grouped, weighted, panel-decomposed) summary statistics for complex multilevel / panel data.</p></li>
</ul>
<p><em>collapse</em> is mainly coded in C++ and built with <em>Rcpp</em>, but also uses C functions from <em>data.table</em>, <em>lfe</em> and <em>stats</em>. Effort has been expended to minimize the execution speed of R code employed.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<pre class="{r}"><code>install.packages("collapse")

# install the development version
devtools::install_github("SebKrantz/collapse")</code></pre>
</div>
<div id="package-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#package-documentation" class="anchor"></a>Package Documentation</h2>
<p><em>collapse</em> installs with a built-in hierarchically structured documentation, implemented via a set of separate help pages. The top-level documentation page provides a quick overview of the entire functionality of the package and links to all other documentation pages. It can be accessed from the R console by calling <code><a href="reference/collapse-documentation.html">help('collapse-documentation')</a></code>.</p>
<p>In addition, <em>collapse</em> provides 3 vignettes:</p>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/collapse/vignettes/collapse_intro.html">Introduction to <em>collapse</em></a>: Introduces all main features of the package in a structured way.</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/collapse/vignettes/collapse_and_dplyr.html"><em>collapse</em> and <em>dplyr</em></a>: Demonstrates the integration of <em>collapse</em> with <em>dplyr</em> and the <em>tidyverse</em>.</p></li>
<li><p><a href="https://cran.r-project.org/web/packages/collapse/vignettes/collapse_and_plm.html"><em>collapse</em> and <em>plm</em></a>: Demonstrates the integration of <em>collapse</em> with the <em>plm</em> package and provides examples of fast and easy programming with panel data.</p></li>
</ul>
</div>
<div id="demonstration" class="section level2">
<h2 class="hasAnchor">
<a href="#demonstration" class="anchor"></a>Demonstration</h2>
<pre class="{r}"><code>fNdistinct(wlddev)
fNdistinct(wlddev, wlddev$iso3c)

wlddev %&gt;% fgroup_by(iso3c) %&gt;% fNdistinct

collap(wlddev, ~ country + decade, fmean, fmode)

fscale(num_vars(wlddev), wlddec$iso3c)
fwithin(num_vars(wlddev), wlddec$iso3c)

wlddev %&gt;% fgroup_by(country, decade) %&gt;% fselect(PCGDP:ODA) %&gt;% fwithin(ODA)

L(wlddev, -1:1, ~iso3c, ~year, cols = 9:12)

wlddev %&gt;% fgroup_by(country) %&gt;% fselect(PCGDP:ODA, year) %&gt;% flag(-1:1, year)

wlddev %&gt;% fgroup_by(country) %&gt;% fselect(PCGDP:ODA, year) %&gt;% fdiff(-1:1, 1:2, year)
wlddev %&gt;% fgroup_by(country) %&gt;% fselect(PCGDP:ODA, year) %&gt;% fgrowth(1, 1, year)
</code></pre>
<!--
## Contributing 
If you want to contribute, please fork and create a pull request for merging with the **development** branch. Presently I am particularly interested in fast algorithms to compute weighted medians and (weighted) quantiles. -->
<hr>
<div id="notes-on-performance" class="section level3">
<h3 class="hasAnchor">
<a href="#notes-on-performance" class="anchor"></a>Notes on Performance</h3>
<p>Some simple benchmarks are provided in the vignettes. In general:</p>
<ul>
<li><p>On simple aggregations of large data (~ 10 mio. obs) the performance is comparable to <em>data.table</em> (when using functions that <em>data.table</em> GeForce optimizes. The C/C++ programming principles applied and the grouping mechanisms of <em>collapse</em> are similar to <em>data.table</em>). On very large data (100 mio. obs +), <em>data.table</em>’s thread parallelization will let it run faster on a multicore machine.</p></li>
<li><p>For more complex categorical or weighed aggregations, and for nearly all transformations like grouped scaling, centering, panel-differences etc. <em>collapse</em> is ~10x faster than <em>data.table</em>.</p></li>
<li><p>Due to its minimized R overhead and avoidance of non-standard evaluation, <em>collapse</em> is very efficient for programming. On smaller data a <em>collapse</em> implementation will execute within the microsecond domain, whereas packages like <em>dplyr</em> or <em>data.table</em> will typically evaluate in the millisecond domain (~10x slower).</p></li>
<li><p>This performance extends to grouped and weighted computations on vectors and matrices (no internal conversions, vector and matrix methods are also written in C++).</p></li>
</ul>
<!-- *collapse* is not limited to programming with data.frames and it is class-secure and attribute-preserving (thus it can be applied to data.table's, tibbles, grouped tibbles etc. and also to special atomic objects like time-series and time-series matrices etc.). -->
</div>
<div id="notes-on-the-integration-with-dplyr-plm-and-datatable" class="section level3">
<h3 class="hasAnchor">
<a href="#notes-on-the-integration-with-dplyr-plm-and-datatable" class="anchor"></a>Notes on the Integration with <em>dplyr</em>, <em>plm</em> and <em>data.table</em>
</h3>
<ul>
<li><p><strong><em>collapse</em></strong> <strong>and</strong> <strong><em>dplyr</em></strong>: The <em>Fast Statistical Functions</em> and transformation functions and operators provided by <em>collapse</em> all have a <em>grouped_df</em> method, allowing them to be seamlessly integrated into <em>dplyr</em> / <em>tidyverse</em> workflows. Doing so facilitates advanced operations in <em>dplyr</em> and provides remarkable performance improvements (bringing <em>dplyr</em> close to <em>data.table</em> on large data aggregations, and making it faster than <em>data.table</em> for advanced transformations). In addition, <em>collapse</em> provides some simpler and faster replacements for common <em>dplyr</em> verbs (<code>fselect</code>, <code>fgroup_by</code>, <code>fsubset</code> (faster <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter</a></code>), <code>ftransform</code> (faster <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate</a></code>) and <code>TRA</code> (faster <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate</a></code> for grouped replacing and sweeping out statistics)), providing further performance improvements for programming with piped expressions and non-standard evaluation. See also <a href="https://cran.r-project.org/web/packages/collapse/vignettes/collapse_and_dplyr.html">this vignette</a>.</p></li>
<li><p><strong><em>collapse</em></strong> <strong>and</strong> <strong><em>plm</em></strong>: Fast transformation functions and transformation operators provided by <em>collapse</em> also have <em>pseries</em> (panel-series) and <em>pdata.frame</em> (panel-data.frame) methods. This integrates them seamlessly into <em>plm</em> workflows and facilitates the manipulation of panel data. For typical panel-data operations like between- and within-transformations or panel lags / leads / differences, <em>collapse</em> functions are 20-100x faster than <em>plm</em> equivalents, and provide greater versatility (i.e. for applying transformations to multiple variables in a <em>pdata.frame</em>). See also <a href="https://cran.r-project.org/web/packages/collapse/vignettes/collapse_and_plm.html">this vignette</a>.</p></li>
<li><p><strong><em>collapse</em></strong> <strong>and</strong> <strong><em>data.table</em></strong>: All collapse functions can be applied to <em>data.table</em>’s and they will also return a <em>data.table</em> again. The C/C++ programming of <em>collapse</em> was inspired by <em>data.table</em> and directly relies on some <em>data.table</em> source code (i.e. for grouping and row-binding). The function <code>qDT</code> also exists to efficiently convert various objects to <em>data.table</em>, and various functions (<code>mrtl</code>, <code>mctl</code>, <code>unlist2d</code>, …) have an option to output a <em>data.table</em>.</p></li>
</ul>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=collapse">https://​cloud.r-project.org/​package=collapse</a>
</li>
<li>Browse source code at <br><a href="https://github.com/SebKrantz/collapse/">https://​github.com/​SebKrantz/​collapse/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/SebKrantz/collapse/issues">https://​github.com/​SebKrantz/​collapse/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 2) | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sebastian Krantz <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=collapse"><img src="https://www.r-pkg.org/badges/version/collapse" alt="CRAN status"></a></li>
<li><a href="https://travis-ci.com/SebKrantz/collapse"><img src="https://travis-ci.com/SebKrantz/collapse.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
